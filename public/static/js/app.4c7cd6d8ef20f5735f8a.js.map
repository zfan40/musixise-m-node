{"version":3,"sources":["webpack:///static/js/app.4c7cd6d8ef20f5735f8a.js","webpack:///./src/_common/js/api.js","webpack:///./src/App.vue","webpack:///./src/_common/js/util.js","webpack:///./src/components/HelloWorld.vue","webpack:///./src/_common/js/magic.js","webpack:///./src/components/MBMaker.vue","webpack:///./src/components/MBAuthor.vue","webpack:///./src/components/NMBMaker.vue","webpack:///./src/components/MBViewer.vue","webpack:///./src/components/common/countButton.vue","webpack:///./src/components/NMBViewer.vue","webpack:///./src/store/actions.js","webpack:///./src/store/mutations.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?dd23","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?4349","webpack:///src/components/MBMaker.vue","webpack:///./src/components/MBMaker.vue?d60e","webpack:///src/components/MBAuthor.vue","webpack:///./src/components/MBAuthor.vue?7acf","webpack:///./src/_common/js/wx_share.js","webpack:///src/components/NMBMaker.vue","webpack:///./src/components/NMBMaker.vue?ed4f","webpack:///src/components/MBViewer.vue","webpack:///./src/components/MBViewer.vue?b54b","webpack:///src/components/common/countButton.vue","webpack:///./src/components/common/countButton.vue?8446","webpack:///src/components/NMBViewer.vue","webpack:///./src/components/NMBViewer.vue?9e71","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["webpackJsonp","8GxT","module","exports","GJ2J","GWyx","IEmI","KDEC","MhvM","NHnr","__webpack_exports__","__webpack_require__","getUserInfo","wxcode","tokenInCookie","js_cookie","reqConfig","headers","Authorization","axios","post","promise_default","a","resolve","reject","then","res","data","errcode","serviceToken","id_token","expires","catch","err","uploadRecord","record","info","_this","this","formReqConfig","Content-Type","processData","blob","Blob","stringify_default","reader","FileReader","onload","_ref","asyncToGenerator_default","regenerator_default","mark","_callee","event","fd","postFix","workURL","param","wrap","_context","prev","next","FormData","append","target","result","sent","extends_default","url","console","log","abrupt","id","stop","_x","apply","arguments","readAsDataURL","fetchMbox","toggleFavSong","_ref2","workId","status","api_updateWorkTitle","_ref3","title","injectStyle","ssrContext","getUrlParam","key","reg","RegExp","match","location","search","HelloWorld_injectStyle","RealMagic","items","tasksObj","forEach","item","itemNoteFreq","parseInt","magic_Tone","Frequency","note","toFrequency","push","time","taskTypes","keys_default","taskTimeArrays","values_default","machines","groups","length","timeArray","final","j","test","allPreviousOccupied","successFound","counter","SAME_NOTE_INTERVAL","indexOf","concat","toConsumableArray_default","set_default","Math","max","group","index","count","lastMachine","magic_mapNoteTimeToColor","COLOR1","COLOR2","COLOR3","rgb","floor","magic_mapNoteMidiToLength","noteName","toMidi","preview","Transport","state","oncePlayed","mbox","triggerAttack","musicPreview","dispose","Part","value","triggerAttackRelease","start","loop","loopEnd","MBMaker_injectStyle","MBAuthor_injectStyle","NMBMaker_injectStyle","MBViewer_injectStyle","countButton_injectStyle","NMBViewer_injectStyle","Object","defineProperty","vue_esm","vuex_router_sync","vue_touch","vue_touch_default","n","vuex_esm","promise","regenerator","helpers_extends","asyncToGenerator","stringify","Accept","actions","BOUNCE_PROJECT","commit","FETCH_MBOX","_ref4","project","request","XMLHttpRequest","open","send","onreadystatechange","readyState","getResponseHeader","JSON","parse","responseText","FETCH_LIST_DATA","_ref5","_ref6","dispatch","type","undefined","ids","ENSURE_ACTIVE_ITEMS","_ref7","getters","activeIds","FETCH_ITEMS","_ref8","_ref9","now","Date","filter","__lastUpdated","FETCH_USER","_ref10","_ref11","users","user","mutations","SET_USER_INFO","activeType","SET_WORK_INFO","lists","SET_MUSIXISER_INFO","set","SET_BOUNCE_PROJECT","recordProject","SET_ID_PROJECT","recordProjectInfo","SET_FINAL_WORK","SET_USER","itemsPerPage","page","Number","route","params","end","slice","activeItems","map","_","use","App","name","transitionName","beforeRouteUpdate","to","from","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","esExports","selectortype_template_index_0_src_App","normalizeComponent","__vue_styles__","Component","src_App","vue_router_esm","HelloWorld","msg","methods","redirectTo","path","$router","created","docElem","document","documentElement","window","rem","getBoundingClientRect","width","style","fontSize","navigator","userAgent","toLowerCase","replace","alert","realname","HelloWorld_render","staticClass","_v","on","touchstart","$event","HelloWorld_staticRenderFns","HelloWorld_esExports","components_HelloWorld","HelloWorld_normalizeComponent","HelloWorld___vue_styles__","HelloWorld_Component","src_components_HelloWorld","toConsumableArray","values","keys","cancel","Sampler","C4","D#4","F#4","A4","C5","D#5","F#5","A5","C6","release","baseUrl","toMaster","Tone","piano","PluckSynth","recorder","tonepart","bouncepart","timeline","MBMaker","activeNote","timerToStartRecord","recording","replaying","load","startRecord","timer","setInterval","clearInterval","touchStartHandler","e","$set","performance","toFixed","touchEndHandler","triggerRelease","toggleRecord","_this2","toggleReplay","undoRecord","pop","bounceProject","_events","noteInfo","sort","b","mounted","updated","MBMaker_render","class","_s","stopPropagation","preventDefault","touchend","_k","keyCode","Db4","D4","Eb4","E4","F4","Gb4","G4","Ab4","Bb4","B4","Db5","D5","Eb5","E5","F5","Gb5","G5","Ab5","Bb5","B5","click","MBMaker_staticRenderFns","MBMaker_esExports","components_MBMaker","MBMaker_normalizeComponent","MBMaker___vue_styles__","MBMaker_Component","MBAuthor_piano","MBAuthor_bouncepart","MBAuthor_timeline","MBAuthor","MBAuthor_render","MBAuthor_staticRenderFns","MBAuthor_esExports","components_MBAuthor","MBAuthor_normalizeComponent","MBAuthor___vue_styles__","MBAuthor_Component","node_modules_axios","axios_default","weixin_js_sdk","weixin_js_sdk_default","wx_share_reqConfig","wx_share_prepareShareConfig","encodeURIComponent","href","split","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","wx_share_prepareShareContent","desc","fullPath","imgUrl","link","onMenuShareTimeline","success","onMenuShareAppMessage","dist","dist_default","vue_awesome_swiper","NMBMaker_Tone","touchIdKeyMap","extendBtnsTimeout","NMBMaker_piano","clientHeight","innerHeight","NMBMaker_bouncepart","recordStartTime","isLinger","replayInterval","playOffset","lingerOffset","NMBMaker","components","swiper","swiperSlide","vueSlider","recordPart","recordParts","playing","generalControllerShow","activeSwiperIndex","lastActiveSwiperIndex","vuetimeline","showExtendBtns","timelineConfig","height","padding","dotSize","eventType","min","interval","disabled","show","tooltip","piecewise","reverse","display","direction","speed","bgStyle","backgroundColor","boxShadow","tooltipStyle","borderColor","formatter","processStyle","watch","val","PROGRESS_INTERVAL_TIME","computed","$refs","pianoRoll","activePartIndex","PARTNUM","lastActivePartIndex","confirmRecordPart","handleNoteStart","noteId","noteTime","handleNoteEnd","touchNoteStartHandler","changedTouches","identifier","touchNoteEndHandler","shouldClearTime","checkBouncibility","clearRecordPart","trackNum","$store","content","cover","query","mapNoteTimeToColor","t","mapNoteMidiToLength","m","adjustTimeline","onMiniKeyboardScroll","touches","clientY","onMiniKeyboardStart","keng","i","elementFromPoint","clientX","classList","contains","getAttribute","btnStart","_this3","setTimeout","btnEnd","clearTimeout","self","pianoRollSwiperOption","initialSlide","slidesPerView","transitionEnd","activeIndex","origin","pathname","NMBMaker_render","touchmove","Db6","D6","Eb6","E6","F6","ref","options","_l","x","y","operator","radius","in","stdDeviation","flood-color","in2","rx","ry","fill","_e","_b","callback","drag-end","model","$$v","expression","NMBMaker_staticRenderFns","NMBMaker_esExports","components_NMBMaker","NMBMaker_normalizeComponent","NMBMaker___vue_styles__","NMBMaker_Component","src_components_NMBMaker","musicPart","MBViewer_mbox","MBViewer","projectInfo","prepareMusic","togglePlayMusic","loadMusicById","togglePlay","MBViewer_render","_m","MBViewer_staticRenderFns","MBViewer_esExports","components_MBViewer","MBViewer_normalizeComponent","MBViewer___vue_styles__","MBViewer_Component","countButton","props","initCount","initActive","Boolean","iconImg","String","onClickCall","Function","default","currentActiveCount","currentActive","updateButton","countButton_render","directives","rawName","countButton_staticRenderFns","countButton_esExports","common_countButton","countButton_normalizeComponent","countButton___vue_styles__","countButton_Component","components_common_countButton","NMBViewer","loading","workIntroAppear","controlPanalAppear","titleUpdateAppear","userId","favStatus","newWorkTitle","finalNewWorkTitle","toggleFav","updateWorkTitle","redirectToMaker","purchaseItem","NMBViewer_render","src","owner","smallAvatar","alt","nickName","collectNum","placeholder","domProps","input","composing","NMBViewer_staticRenderFns","NMBViewer_esExports","components_NMBViewer","NMBViewer_normalizeComponent","NMBViewer___vue_styles__","NMBViewer_Component","src_components_NMBViewer","router","routes","component","productionTip","store","Store","top","new","ask","job","el","template","O/d9","hoXB","v2ns"],"mappings":"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GAA4B1Z,EAAoB8J,EAAE2P,IAGlDE,GAAqB3Z,EAAoB,QyB55C7C4Z,GAAA5Z,EAAA,QAYA6Z,MAIAC,OAAA,GAEAC,GAAA,GAAAH,IAAA3H,SzB+5CEC,GyB75CF,ezB85CEC,MyB75CF,gBzB85CEC,MyB75CF,gBzB85CEC,GyB75CF,ezB85CEC,GyB75CF,ezB85CEC,MyB75CF,gBzB85CEC,MyB75CF,gBzB85CEC,GyB75CF,ezB85CEC,GyB75CF,iBzB+5CEC,QyB75CF,EzB85CEC,QyB75CF,mBAFAC,YAmBA,GAAA+G,IAAA5G,YAAAH,WAEA3C,SAAAC,gBAAAG,wBAAAC,MACAlJ,KAAAC,IAAA4I,SAAAC,gBAAA6J,aAAA5J,OAAA6J,aAAA,EAEA7J,QAAA8C,WACA,IAAAgH,OAEAC,GAAA,EAEAC,IAAA,EACAC,OAAA1O,GACA2O,GAAA,EACAC,GAAA,EAEAC,IzB+5CEC,YyB55CFC,OAAAf,GAAA,OACAgB,YAAAhB,GAAA,YAEAiB,UAAAlB,GAAA/Y,GzB85CEK,KAAM,WACJ,OACEsS,cACAuH,cACAC,eACAC,SyB75CN,EzB85CMC,uByB75CN,EzB85CMC,kByB75CN,EzB85CMC,sBAAuB,EACvBC,YyB75CN,EzB85CMC,eyB75CN,EzB85CMC,gBACExS,MyB75CR,EzB85CQ0H,MyB75CR,EzB85CQ+K,OyB75CR,MzB85CQC,QyB75CR,IzB85CQC,QyB75CR,GzB85CQC,UyB75CR,OzB85CQC,IyB75CR,EzB85CQpU,IyB75CR,IzB85CQqU,SyB75CR,EzB85CQC,UyB75CR,EzB85CQC,MyB75CR,EzB85CQC,QyB75CR,SzB+5CQC,WyB75CR,EzB85CQC,SyB75CR,EzB85CQxL,OACEyL,QyB55CV,gBzB85CQ9G,MyB75CR,czB85CQ+G,UyB75CR,WzB85CQC,MyBr8CR,GzBs8CQC,SACEC,gByB75CV,mBzB85CUC,UyB55CV,6CzB85CQC,cACEF,gByB75CV,oBzB85CUG,YyB75CV,qBzBg6CQC,UAAW,SAAmB5T,GAC5B,MAAIA,IACMA,EAAQ,IAAIsL,QyB75ChC,WAEA,YzBi6CQuI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","file":"static/js/app.4c7cd6d8ef20f5735f8a.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"8GxT\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"GJ2J\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"GWyx\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"IEmI\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"KDEC\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"MhvM\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// EXTERNAL MODULE: ./node_modules/vuex-router-sync/index.js\nvar vuex_router_sync = __webpack_require__(\"9JMe\");\nvar vuex_router_sync_default = /*#__PURE__*/__webpack_require__.n(vuex_router_sync);\n\n// EXTERNAL MODULE: ./node_modules/vue-touch/dist/vue-touch.js\nvar vue_touch = __webpack_require__(\"I0MY\");\nvar vue_touch_default = /*#__PURE__*/__webpack_require__.n(vue_touch);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"Xxa5\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"exGp\");\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./node_modules/js-cookie/src/js.cookie.js\nvar js_cookie = __webpack_require__(\"lbHh\");\nvar js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);\n\n// CONCATENATED MODULE: ./src/_common/js/api.js\n\n\n\n\n\n\n\nvar axios = __webpack_require__(\"mtWM\");\n\nvar reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n// TODO:cause 500?????? just cuz this few lines???\n\n\nfunction getUserInfo(wxcode) {\n  var tokenInCookie = js_cookie[\"get\"]('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = 'Bearer ' + tokenInCookie;\n    return axios.post('//api.musixise.com/api/user/getInfo', '', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new promise_default.a(function (resolve, reject) {\n      axios.post('//api.musixise.com/api/user/oauth/wechat/callback?code=' + wxcode, '', reqConfig).then(function (res) {\n        if (res.data.errcode === 20001) {\n          reject(20001); // return\n        }\n        var serviceToken = res.data.data.id_token;\n        reqConfig.headers.Authorization = 'Bearer ' + serviceToken;\n        js_cookie[\"set\"]('serviceToken', serviceToken, {\n          expires: 7\n        });\n        return axios.post('//api.musixise.com/api/user/getInfo', '', reqConfig);\n      }, function () {\n        reject();\n      }).then(function (res) {\n        resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  }\n  // !tokenInCookie&&!wxcodeapp.js, \n  return false;\n}\n\nfunction uploadRecord(record, info) {\n  var _this = this;\n\n  return new promise_default.a(function (resolve, reject) {\n    var formReqConfig = { headers: { 'Content-Type': 'multipart/form-data', processData: false } };\n    var blob = new Blob([stringify_default()(record)]);\n    var reader = new FileReader();\n    reader.onload = function () {\n      var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(event) {\n        var fd, postFix, workURL, param;\n        return regenerator_default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fd = new FormData();\n\n                fd.append('fname', 'test.txt');\n                fd.append('data', event.target.result);\n                _context.next = 5;\n                return axios.post('//api.musixise.com/api/uploadAudio', fd, formReqConfig);\n\n              case 5:\n                postFix = _context.sent;\n                workURL = 'http://oiqvdjk3s.bkt.clouddn.com/' + postFix.data.data;\n                param = extends_default()({}, info, {\n                  url: workURL\n                });\n\n                console.log(workURL);\n                return _context.abrupt('return', axios.post('//api.musixise.com/api/work/create', stringify_default()(param), reqConfig).then(function (res) {\n                  resolve(res.data.data.id);\n                }).catch(function (err) {\n                  reject(err);\n                }));\n\n              case 10:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nfunction fetchMbox(id) {\n  return axios.post('//api.musixise.com/api/work/detail/' + id, '', reqConfig);\n}\nfunction toggleFavSong(_ref2) {\n  var workId = _ref2.workId,\n      status = _ref2.status;\n\n  return axios.post('//api.musixise.com/api/favorite/addWork', stringify_default()({ workId: workId, status: status }), reqConfig).then(function (res) {\n    console.log(res);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\nfunction api_updateWorkTitle(_ref3) {\n  var workId = _ref3.workId,\n      title = _ref3.title;\n\n  return axios.post('//api.musixise.com/api/work/updateWork/' + workId, stringify_default()({ workId: workId, title: title }), reqConfig).then(function (res) {\n    console.log(res);\n  }).catch(function (err) {\n    console.log(err);\n  });\n}\n// CONCATENATED MODULE: ./src/store/actions.js\n\n\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\n/* harmony default export */ var actions = ({\n  BOUNCE_PROJECT: function BOUNCE_PROJECT(_ref, _ref2) {\n    var commit = _ref.commit,\n        state = _ref.state;\n    var record = _ref2.record,\n        info = _ref2.info;\n    return uploadRecord(record, info);\n  },\n  // \n  // uploadRecord(record, info).then(() => {\n  //   // commit('SET_BOUNCE_PROJECT', { record, info });\n  //   // commit store\n  // });\n\n  FETCH_MBOX: function FETCH_MBOX(_ref3, _ref4) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    var id = _ref4.id;\n    return new promise_default.a(function (resolve, reject) {\n      // id\n      fetchMbox(id).then(function (project) {\n        console.log('xxi', project.data.data.url);\n        var request = new XMLHttpRequest();\n        request.open('GET', project.data.data.url, true);\n        request.send(null);\n        request.onreadystatechange = function () {\n          if (request.readyState === 4 && request.status === 200) {\n            var type = request.getResponseHeader('Content-Type');\n            if (type.indexOf('text') !== -1) {\n              commit('SET_ID_PROJECT', { record: JSON.parse(request.responseText), info: project.data.data });\n              resolve();\n            }\n          }\n        };\n      });\n    });\n  },\n\n  // ensure data for rendering given list type\n  FETCH_LIST_DATA: function FETCH_LIST_DATA(_ref5, _ref6) {\n    var commit = _ref5.commit,\n        dispatch = _ref5.dispatch,\n        state = _ref5.state;\n    var type = _ref6.type;\n\n    commit('SET_ACTIVE_TYPE', { type: type });\n    return /* Cannot get final name for export \"fetchIdsByType\" in \"./src/_common/js/api.js\" (known exports: getUserInfo uploadRecord fetchMbox toggleFavSong updateWorkTitle, known reexports: ) */ undefined(type).then(function (ids) {\n      return commit('SET_LIST', { type: type, ids: ids });\n    }).then(function () {\n      return dispatch('ENSURE_ACTIVE_ITEMS');\n    });\n  },\n\n  // ensure all active items are fetched\n  ENSURE_ACTIVE_ITEMS: function ENSURE_ACTIVE_ITEMS(_ref7) {\n    var dispatch = _ref7.dispatch,\n        getters = _ref7.getters;\n    return dispatch('FETCH_ITEMS', {\n      ids: getters.activeIds\n    });\n  },\n\n  FETCH_ITEMS: function FETCH_ITEMS(_ref8, _ref9) {\n    var commit = _ref8.commit,\n        state = _ref8.state;\n    var ids = _ref9.ids;\n\n    // on the client, the store itself serves as a cache.\n    // only fetch items that we do not already have, or has expired (3 minutes)\n    var now = Date.now();\n    ids = ids.filter(function (id) {\n      var item = state.items[id];\n      if (!item) {\n        return true;\n      }\n      if (now - item.__lastUpdated > 1000 * 60 * 3) {\n        return true;\n      }\n      return false;\n    });\n    if (ids.length) {\n      return /* Cannot get final name for export \"fetchItems\" in \"./src/_common/js/api.js\" (known exports: getUserInfo uploadRecord fetchMbox toggleFavSong updateWorkTitle, known reexports: ) */ undefined(ids).then(function (items) {\n        return commit('SET_ITEMS', { items: items });\n      });\n    }\n    return promise_default.a.resolve();\n  },\n\n  FETCH_USER: function FETCH_USER(_ref10, _ref11) {\n    var commit = _ref10.commit,\n        state = _ref10.state;\n    var id = _ref11.id;\n    return state.users[id] ? promise_default.a.resolve(state.users[id]) : /* Cannot get final name for export \"fetchUser\" in \"./src/_common/js/api.js\" (known exports: getUserInfo uploadRecord fetchMbox toggleFavSong updateWorkTitle, known reexports: ) */ undefined(id).then(function (user) {\n      return commit('SET_USER', { id: id, user: user });\n    });\n  }\n});\n// CONCATENATED MODULE: ./src/store/mutations.js\n\n\n/* harmony default export */ var mutations = ({\n  SET_USER_INFO: function SET_USER_INFO(state, _ref) {\n    var type = _ref.type;\n    // \n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: function SET_WORK_INFO(state, _ref2) {\n    var type = _ref2.type,\n        ids = _ref2.ids;\n    // \n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: function SET_MUSIXISER_INFO(state, _ref3) {\n    var items = _ref3.items;\n    // \n    items.forEach(function (item) {\n      if (item) {\n        vue_esm[\"a\" /* default */].set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: function SET_BOUNCE_PROJECT(state, _ref4) {\n    var record = _ref4.record;\n    // \n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: function SET_ID_PROJECT(state, _ref5) {\n    var record = _ref5.record,\n        info = _ref5.info;\n    // \n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_FINAL_WORK: function SET_FINAL_WORK(state, _ref6) {\n    var type = _ref6.type;\n    // \n    state.activeType = type;\n  },\n  SET_USER: function SET_USER(state, _ref7) {\n    var id = _ref7.id,\n        user = _ref7.user;\n\n    vue_esm[\"a\" /* default */].set(state.users, id, user || false); /* false means user not found */\n  }\n});\n// CONCATENATED MODULE: ./src/store/getters.js\n/* harmony default export */ var getters = ({\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds: function activeIds(state) {\n    var activeType = state.activeType,\n        itemsPerPage = state.itemsPerPage,\n        lists = state.lists;\n\n    var page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      var start = (page - 1) * itemsPerPage;\n      var end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems: function activeItems(state, getters) {\n    return getters.activeIds.map(function (id) {\n      return state.items[id];\n    }).filter(function (_) {\n      return _;\n    });\n  }\n});\n// CONCATENATED MODULE: ./src/store/index.js\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vuex_esm[\"a\" /* default */]);\n\nfunction createStore() {\n  return new vuex_esm[\"a\" /* default */].Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: []\n      },\n      recordParts: [],\n      recordProject: []\n    },\n    actions: actions,\n    mutations: mutations,\n    getters: getters\n  });\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n//\n//\n\n// https://router.vuejs.org/en/advanced/transitions.html\n/* harmony default export */ var App = ({\n  name: 'app',\n  data: function data() {\n    return {\n      transitionName: 'fade'\n    };\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d7a33f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"hoXB\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7d7a33f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.esm.js\nvar vue_router_esm = __webpack_require__(\"/ocq\");\n\n// CONCATENATED MODULE: ./src/_common/js/util.js\nfunction getUrlParam(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n\nfunction getUrlParam1(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/HelloWorld.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var HelloWorld = ({\n  name: 'hello',\n  data: function data() {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    };\n  },\n\n  methods: {\n    redirectTo: function redirectTo(path) {\n      // IMPORTANT keng. authcodeauth\n      // authcookie\n      this.$router.push(path);\n    }\n  },\n  created: function created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b801b49\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\nvar HelloWorld_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      \\n  \")])])}\nvar HelloWorld_staticRenderFns = []\nvar HelloWorld_esExports = { render: HelloWorld_render, staticRenderFns: HelloWorld_staticRenderFns }\n/* harmony default export */ var components_HelloWorld = (HelloWorld_esExports);\n// CONCATENATED MODULE: ./src/components/HelloWorld.vue\nfunction HelloWorld_injectStyle (ssrContext) {\n  __webpack_require__(\"O/d9\")\n}\nvar HelloWorld_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar HelloWorld___vue_template_functional__ = false\n/* styles */\nvar HelloWorld___vue_styles__ = HelloWorld_injectStyle\n/* scopeId */\nvar HelloWorld___vue_scopeId__ = \"data-v-3b801b49\"\n/* moduleIdentifier (server only) */\nvar HelloWorld___vue_module_identifier__ = null\nvar HelloWorld_Component = HelloWorld_normalizeComponent(\n  HelloWorld,\n  components_HelloWorld,\n  HelloWorld___vue_template_functional__,\n  HelloWorld___vue_styles__,\n  HelloWorld___vue_scopeId__,\n  HelloWorld___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_HelloWorld = (HelloWorld_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/set.js\nvar set = __webpack_require__(\"lHA8\");\nvar set_default = /*#__PURE__*/__webpack_require__.n(set);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/toConsumableArray.js\nvar toConsumableArray = __webpack_require__(\"Gu7T\");\nvar toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/values.js\nvar values = __webpack_require__(\"gRE1\");\nvar values_default = /*#__PURE__*/__webpack_require__.n(values);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/keys.js\nvar keys = __webpack_require__(\"fZjL\");\nvar keys_default = /*#__PURE__*/__webpack_require__.n(keys);\n\n// CONCATENATED MODULE: ./src/_common/js/magic.js\n\n\n\n\n\nvar magic_Tone = __webpack_require__(\"ZnLv\");\n\nmagic_Tone.Transport.cancel();\nvar SAME_NOTE_INTERVAL = 1; // 1\nvar musicPreview = void 0;\n\nvar oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\nvar mbox = new magic_Tone.Sampler({\n  C4: 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  A4: 'A4.[mp3|ogg]',\n  C5: 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  A5: 'A5.[mp3|ogg]',\n  C6: 'C6.[mp3|ogg]'\n}, {\n  release: 1,\n  baseUrl: '/static/audio/'\n}).toMaster();\nfunction RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(stringify_default()(items));\n  var tasksObj = {};\n  items.forEach(function (item) {\n    //* 2 cuz print mbox need 1 octave higher.\n    var itemNoteFreq = parseInt(magic_Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) {\n      tasksObj[itemNoteFreq] = [];\n    }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  var taskTypes = keys_default()(tasksObj); // [659,784,...]  freq array, object.keys\n  var taskTimeArrays = values_default()(tasksObj); // [[2.66][1.0295,1.39,2.6713]] \n  var machines = []; // init with existing types, will add more machines\n  var groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('18');\n    return false;\n  }\n\n  taskTimeArrays.forEach(function (timeArray) {\n    var final = [];\n    timeArray.forEach(function (time, j) {\n      var test = []; // final finaltest\n      var allPreviousOccupied = false;\n      var successFound = false;\n      if (j === 0) {\n        final.push(1); // 1\n      } else {\n        var counter = j;\n        while (counter >= 1 && !allPreviousOccupied) {\n          // TODO: -1 or 0\n          counter -= 1;\n          if (time - timeArray[counter] >= SAME_NOTE_INTERVAL && test.indexOf(final[counter]) === -1) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([].concat(toConsumableArray_default()(new set_default.a(final))).length === [].concat(toConsumableArray_default()(new set_default.a(test))).length) {\n              // finalsetunique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if (counter === 0 && !successFound || allPreviousOccupied) {\n          final.push(Math.max.apply(Math, final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach(function (group, index) {\n    var count = 0;\n    while (count <= Math.max.apply(Math, toConsumableArray_default()(group)) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    var lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('18');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //,\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nfunction magic_mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  var COLOR1 = [151, 255, 241];\n  var COLOR2 = [98, 166, 223];\n  var COLOR3 = [154, 124, 255];\n  var TIME_MAX = 20;\n  var rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [COLOR1[0] + time * (COLOR2[0] - COLOR1[0]) / (TIME_MAX / 2), COLOR1[1] + time * (COLOR2[1] - COLOR1[1]) / (TIME_MAX / 2), COLOR1[2] + time * (COLOR2[2] - COLOR1[2]) / (TIME_MAX / 2)];\n  }\n  rgb = [COLOR2[0] + time * (COLOR3[0] - COLOR2[0]) / (TIME_MAX / 2), COLOR2[1] + time * (COLOR3[1] - COLOR2[1]) / (TIME_MAX / 2), COLOR2[2] + time * (COLOR3[2] - COLOR2[2]) / (TIME_MAX / 2)];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return 'rgb(' + Math.floor(rgb[0]) + ',' + Math.floor(rgb[1]) + ',' + Math.floor(rgb[2]) + ')';\n}\nfunction magic_mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return '' + (75 * 0.8 * ((magic_Tone.Frequency(noteName).toMidi() - 50) / (110 - 40)) + 0.2); // 75 is rem to px\n}\n\nfunction preview(items) {\n  console.log('current state', magic_Tone.Transport.state);\n  if (magic_Tone.Transport.state === 'stopped') {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);oncePlayed = true;\n    }\n    if (musicPreview) musicPreview.dispose();\n    musicPreview = new magic_Tone.Part(function (time, value) {\n      mbox.triggerAttackRelease(value.note, '8n', time);\n    }, items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 17; // 17s\n    magic_Tone.Transport.start('+0.01', 0);\n  } else {\n    magic_Tone.Transport.stop(0);\n  }\n  // try {\n  //   Tone.Transport.stop(0);\n  //   console.log(1);\n  //   // Tone.Part.removeAll();\n  //   Tone.Transport.clear();\n  //   console.log(2);\n  //   music.dispose();\n  //   music = undefined;\n  //   console.log(3);\n  // } catch (e) {\n  //   //\n  // } finally {\n  //   music = new Tone.Part(((time, value) => {\n  //     mbox.triggerAttackRelease(value.note, '8n', time);\n  //   }), items).start(0, 0);\n  //   Tone.Transport.start('+0.01', 0);\n  // }\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MBMaker.vue\n\nwindow.Tone = __webpack_require__(\"ZnLv\");\n\n\n\n\n\nvar piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster();\n\nvar MBMaker_mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster();\n\nvar plucky = new Tone.PluckSynth().toMaster();\n// var part = new Tone.Part(function(time, value){\n// \t//the value is an object which contains both the note and the velocity\n// piano.triggerAttackRelease(value.note, \"8n\", time)\n// }, [{\"time\" : 1.9, \"note\" : \"C3\"},\n// \t   {\"time\" : 2, \"note\" : \"C4\"},\n//      {\"time\" : 3, \"note\" : \"C3\"},\n//      \t   {\"time\" : 4, \"note\" : \"C4\"}\n// ]).start(0)\n// Tone.Transport.start()\n\nwindow.recorder = []; //Tone.Part => schedule notes\n\nwindow.tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nvar bouncepart = [];\nvar timeline = 0;\n/* harmony default export */ var MBMaker = ({\n  data: function data() {\n    return {\n      activeNote: {},\n      timerToStartRecord: 0,\n      recording: false,\n      replaying: false\n    };\n  },\n\n  methods: {\n    load: function load() {},\n    startRecord: function startRecord() {\n      var _this = this;\n\n      this.timerToStartRecord = 3;\n      var timer = setInterval(function () {\n        _this.timerToStartRecord -= 1;\n        if (_this.timerToStartRecord == 0) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    },\n\n    touchStartHandler: function touchStartHandler(e) {\n      console.log('down', e.target.id);\n      piano.triggerAttack(e.target.id);\n      this.$set(this.activeNote, e.target.id, 1);\n      if (this.recording) {\n        recorder.push({\n          'note': e.target.id,\n          'time': +((performance.now() - timeline) / 1000).toFixed(4)\n        });\n      }\n    },\n    touchEndHandler: function touchEndHandler(e) {\n      // console.log('up',e.target.id)\n      piano.triggerRelease(e.target.id);\n      // plucky.triggerRelease(e.target.id)\n      this.$set(this.activeNote, e.target.id, 0);\n    },\n    toggleRecord: function toggleRecord(e) {\n      var _this2 = this;\n\n      this.recording = !this.recording;\n      if (this.recording) {\n        //start recording\n        recorder = [];\n        if (!this.replaying) {\n          this.timerToStartRecord = 3;\n          var timer = setInterval(function () {\n            _this2.timerToStartRecord -= 1;\n            if (_this2.timerToStartRecord == 0) {\n              clearInterval(timer);\n              timeline = performance.now();\n            }\n          }, 1000);\n\n          // timeline = performance.now()\n          // 1. e.timestamp behave not consistent\n          // 2. if currently playing, follow that timeline\n        }\n\n        try {\n          // tonepart.dispose()//disposepart\n        } catch (e) {\n          console.warn('tone cannot be disposed');\n        }\n      } else {\n        //stop recording\n        console.log('kikikiki');\n        if (recorder.length) {\n          tonepart[tonepart.length] = new Tone.Part(function (time, value) {\n            //new\n            piano.triggerAttackRelease(value.note, \"8n\", time);\n          }, recorder).start(0);\n        }\n      }\n    },\n    toggleReplay: function toggleReplay() {\n      console.log(1);\n      this.replaying = !this.replaying;\n      if (this.replaying) {\n        console.log('kokokoko');\n        timeline = performance.now();\n        Tone.Transport.start(\"+0.01\"); // in case < context.currentTime\n      } else {\n        Tone.Transport.stop(0); // TODOstopstartstop..\n      }\n    },\n    undoRecord: function undoRecord() {\n      //TODO:\n      // tonepart[tonepart.length-1].dispose() //disposepartdispose\n      //TODO:tonepart\n      // TODO: tonepartundograyout\n\n      tonepart.pop().dispose(); //dispose\n      // Tone.Transport.clear(tonepart);\n    },\n    bounceProject: function bounceProject() {\n      console.log(tonepart);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          item._events.forEach(function (noteInfo) {\n            bouncepart.push(noteInfo.value);\n          });\n        });\n        while (tonepart.length) {\n          tonepart.pop().dispose(); //dispose\n        }\n        tonepart[0] = new Tone.Part(function (time, value) {\n          //new\n          piano.triggerAttackRelease(value.note, \"8n\", time);\n        }, bouncepart).start(0);\n\n        bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        console.log(bouncepart);\n        /* Cannot get final name for export \"generateJSCadCode\" in \"./src/_common/js/magic.js\" (known exports: RealMagic mapNoteTimeToColor mapNoteMidiToLength preview, known reexports: ) */ undefined(bouncepart);\n      } else {\n        alert('tm');\n      }\n    }\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n\n    //test magic.js\n    // const work = [{note: \"E4\", time: 0.14585000000000037},\n    // {note: \"G4\", time: 1.0295},\n    // {note: \"G4\", time: 1.3985},\n    // {note: \"E4\", time: 2.6605300000000005},\n    // {note: \"D4\", time: 3.4207450000000006},\n    // {note: \"C4\", time: 4.196245000000001},\n    // {note: \"G4\", time: 2.671395000000004},\n    // {note: \"A4\", time: 3.35932},\n    // {note: \"B4\", time: 4.183044999999998}]\n    //\n    // Magic.generateJSCadCode(work)\n\n\n    if (!inWechat) return;\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-94d961f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBMaker.vue\nvar MBMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{class:['mask', _vm.timerToStartRecord>1?'fadein':'fadeout', _vm.timerToStartRecord==0?'hide':'']},[_c('p',{staticClass:\"rotate\",attrs:{\"id\":\"timer\"}},[_vm._v(_vm._s(_vm.timerToStartRecord))])]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"keys\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"controller\"},[_c('div',{staticClass:\"funcBtn record\",class:_vm.recording?'active':'',on:{\"click\":_vm.toggleRecord}},[_c('div',{staticClass:\"recordHint\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn play\",class:_vm.replaying?'active':'',on:{\"click\":_vm.toggleReplay}},[_c('div',{class:['rotate',_vm.replaying?'playHint':'stopHint']})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn undo\",on:{\"click\":_vm.undoRecord}},[_c('div',{staticClass:\"undoHint rotate\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn bounce\",on:{\"click\":_vm.bounceProject}},[_c('div',{staticClass:\"bounceHint rotate\"})])])])])}\nvar MBMaker_staticRenderFns = []\nvar MBMaker_esExports = { render: MBMaker_render, staticRenderFns: MBMaker_staticRenderFns }\n/* harmony default export */ var components_MBMaker = (MBMaker_esExports);\n// CONCATENATED MODULE: ./src/components/MBMaker.vue\nfunction MBMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"GWyx\")\n}\nvar MBMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MBMaker___vue_template_functional__ = false\n/* styles */\nvar MBMaker___vue_styles__ = MBMaker_injectStyle\n/* scopeId */\nvar MBMaker___vue_scopeId__ = \"data-v-94d961f8\"\n/* moduleIdentifier (server only) */\nvar MBMaker___vue_module_identifier__ = null\nvar MBMaker_Component = MBMaker_normalizeComponent(\n  MBMaker,\n  components_MBMaker,\n  MBMaker___vue_template_functional__,\n  MBMaker___vue_styles__,\n  MBMaker___vue_scopeId__,\n  MBMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MBMaker = (MBMaker_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MBAuthor.vue\n\nwindow.Tone = __webpack_require__(\"ZnLv\");\n\n\n\n\n\nvar MBAuthor_piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster();\n\nvar MBAuthor_mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster();\n\nvar MBAuthor_plucky = new Tone.PluckSynth().toMaster();\n// var part = new Tone.Part(function(time, value){\n// \t//the value is an object which contains both the note and the velocity\n// piano.triggerAttackRelease(value.note, \"8n\", time)\n// }, [{\"time\" : 1.9, \"note\" : \"C3\"},\n// \t   {\"time\" : 2, \"note\" : \"C4\"},\n//      {\"time\" : 3, \"note\" : \"C3\"},\n//      \t   {\"time\" : 4, \"note\" : \"C4\"}\n// ]).start(0)\n// Tone.Transport.start()\n\nwindow.recorder = []; //Tone.Part => schedule notes\n\nwindow.tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nvar MBAuthor_bouncepart = [];\nvar MBAuthor_timeline = 0;\n/* harmony default export */ var MBAuthor = ({\n  data: function data() {\n    return {\n      activeNote: {},\n      timerToStartRecord: 0,\n      recording: false,\n      replaying: false\n    };\n  },\n\n  methods: {\n    load: function load() {},\n    startRecord: function startRecord() {\n      var _this = this;\n\n      this.timerToStartRecord = 3;\n      var timer = setInterval(function () {\n        _this.timerToStartRecord -= 1;\n        if (_this.timerToStartRecord == 0) {\n          clearInterval(timer);\n        }\n      }, 1000);\n    },\n\n    touchStartHandler: function touchStartHandler(e) {\n      console.log('down', e.target.id);\n      MBAuthor_piano.triggerAttack(e.target.id);\n      this.$set(this.activeNote, e.target.id, 1);\n      if (this.recording) {\n        recorder.push({\n          'note': e.target.id,\n          'time': +((performance.now() - MBAuthor_timeline) / 1000).toFixed(4)\n        });\n      }\n    },\n    touchEndHandler: function touchEndHandler(e) {\n      // console.log('up',e.target.id)\n      MBAuthor_piano.triggerRelease(e.target.id);\n      // plucky.triggerRelease(e.target.id)\n      this.$set(this.activeNote, e.target.id, 0);\n    },\n    toggleRecord: function toggleRecord(e) {\n      var _this2 = this;\n\n      this.recording = !this.recording;\n      if (this.recording) {\n        //start recording\n        recorder = [];\n        if (!this.replaying) {\n          this.timerToStartRecord = 3;\n          var timer = setInterval(function () {\n            _this2.timerToStartRecord -= 1;\n            if (_this2.timerToStartRecord == 0) {\n              clearInterval(timer);\n              MBAuthor_timeline = performance.now();\n            }\n          }, 1000);\n\n          // timeline = performance.now()\n          // 1. e.timestamp behave not consistent\n          // 2. if currently playing, follow that timeline\n        }\n\n        try {\n          // tonepart.dispose()//disposepart\n        } catch (e) {\n          console.warn('tone cannot be disposed');\n        }\n      } else {\n        //stop recording\n        console.log('kikikiki');\n        if (recorder.length) {\n          tonepart[tonepart.length] = new Tone.Part(function (time, value) {\n            //new\n            MBAuthor_piano.triggerAttackRelease(value.note, \"8n\", time);\n          }, recorder).start(0);\n        }\n      }\n    },\n    toggleReplay: function toggleReplay() {\n      console.log(1);\n      this.replaying = !this.replaying;\n      if (this.replaying) {\n        console.log('kokokoko');\n        MBAuthor_timeline = performance.now();\n        Tone.Transport.start(\"+0.01\"); // in case < context.currentTime\n      } else {\n        Tone.Transport.stop(0); // TODOstopstartstop..\n      }\n    },\n    undoRecord: function undoRecord() {\n      //TODO:\n      // tonepart[tonepart.length-1].dispose() //disposepartdispose\n      //TODO:tonepart\n      // TODO: tonepartundograyout\n\n      tonepart.pop().dispose(); //dispose\n      // Tone.Transport.clear(tonepart);\n    },\n    bounceProject: function bounceProject() {\n      console.log(tonepart);\n      MBAuthor_bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          item._events.forEach(function (noteInfo) {\n            MBAuthor_bouncepart.push(noteInfo.value);\n          });\n        });\n        while (tonepart.length) {\n          tonepart.pop().dispose(); //dispose\n        }\n        tonepart[0] = new Tone.Part(function (time, value) {\n          //new\n          MBAuthor_piano.triggerAttackRelease(value.note, \"8n\", time);\n        }, MBAuthor_bouncepart).start(0);\n\n        MBAuthor_bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        console.log(MBAuthor_bouncepart);\n        /* Cannot get final name for export \"generateJSCadCode\" in \"./src/_common/js/magic.js\" (known exports: RealMagic mapNoteTimeToColor mapNoteMidiToLength preview, known reexports: ) */ undefined(MBAuthor_bouncepart);\n      } else {\n        alert('tm');\n      }\n    }\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n\n    //test magic.js\n    // const work = [{note: \"E4\", time: 0.14585000000000037},\n    // {note: \"G4\", time: 1.0295},\n    // {note: \"G4\", time: 1.3985},\n    // {note: \"E4\", time: 2.6605300000000005},\n    // {note: \"D4\", time: 3.4207450000000006},\n    // {note: \"C4\", time: 4.196245000000001},\n    // {note: \"G4\", time: 2.671395000000004},\n    // {note: \"A4\", time: 3.35932},\n    // {note: \"B4\", time: 4.183044999999998}]\n    //\n    // Magic.generateJSCadCode(work)\n\n\n    if (!inWechat) return;\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-94d961f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBAuthor.vue\nvar MBAuthor_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{class:['mask', _vm.timerToStartRecord>1?'fadein':'fadeout', _vm.timerToStartRecord==0?'hide':'']},[_c('p',{staticClass:\"rotate\",attrs:{\"id\":\"timer\"}},[_vm._v(_vm._s(_vm.timerToStartRecord))])]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"keys\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"controller\"},[_c('div',{staticClass:\"funcBtn record\",class:_vm.recording?'active':'',on:{\"click\":_vm.toggleRecord}},[_c('div',{staticClass:\"recordHint\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn play\",class:_vm.replaying?'active':'',on:{\"click\":_vm.toggleReplay}},[_c('div',{class:['rotate',_vm.replaying?'playHint':'stopHint']})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn undo\",on:{\"click\":_vm.undoRecord}},[_c('div',{staticClass:\"undoHint rotate\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn bounce\",on:{\"click\":_vm.bounceProject}},[_c('div',{staticClass:\"bounceHint rotate\"})])])])])}\nvar MBAuthor_staticRenderFns = []\nvar MBAuthor_esExports = { render: MBAuthor_render, staticRenderFns: MBAuthor_staticRenderFns }\n/* harmony default export */ var components_MBAuthor = (MBAuthor_esExports);\n// CONCATENATED MODULE: ./src/components/MBAuthor.vue\nfunction MBAuthor_injectStyle (ssrContext) {\n  __webpack_require__(\"IEmI\")\n}\nvar MBAuthor_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MBAuthor___vue_template_functional__ = false\n/* styles */\nvar MBAuthor___vue_styles__ = MBAuthor_injectStyle\n/* scopeId */\nvar MBAuthor___vue_scopeId__ = \"data-v-94d961f8\"\n/* moduleIdentifier (server only) */\nvar MBAuthor___vue_module_identifier__ = null\nvar MBAuthor_Component = MBAuthor_normalizeComponent(\n  MBAuthor,\n  components_MBAuthor,\n  MBAuthor___vue_template_functional__,\n  MBAuthor___vue_styles__,\n  MBAuthor___vue_scopeId__,\n  MBAuthor___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MBAuthor = (MBAuthor_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar node_modules_axios = __webpack_require__(\"mtWM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(node_modules_axios);\n\n// EXTERNAL MODULE: ./node_modules/weixin-js-sdk/index.js\nvar weixin_js_sdk = __webpack_require__(\"fxnj\");\nvar weixin_js_sdk_default = /*#__PURE__*/__webpack_require__.n(weixin_js_sdk);\n\n// CONCATENATED MODULE: ./src/_common/js/wx_share.js\n\n\n\n\nvar wx_share_reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\nvar wx_share_prepareShareConfig = function prepareShareConfig() {\n  return new promise_default.a(function (resolve, reject) {\n    axios_default.a.post('//api.musixise.com/wechat/getTicket?url=' + encodeURIComponent(window.location.href.split('#')[0]), '', wx_share_reqConfig).then(function (res) {\n      // alert(`before # url: ${window.location.href.split('#')[0]}`);\n      // alert(`full path: ${window.location.href}`);\n      // alert(JSON.stringify(res.data.data));\n      weixin_js_sdk_default.a.config({\n        debug: true,\n        appId: res.data.data.appId,\n        timestamp: res.data.data.timestamp,\n        nonceStr: res.data.data.nonceStr,\n        signature: res.data.data.signature,\n        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage']\n      });\n      weixin_js_sdk_default.a.ready(function () {\n        // wx.config\n        resolve(weixin_js_sdk_default.a);\n      });\n    }, function () {\n      reject('wx.config');\n    });\n  });\n};\n\n// \nvar wx_share_prepareShareContent = function prepareShareContent(_ref) {\n  var title = _ref.title,\n      desc = _ref.desc,\n      fullPath = _ref.fullPath,\n      imgUrl = _ref.imgUrl;\n\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  var link = fullPath;\n  weixin_js_sdk_default.a.onMenuShareTimeline({\n    title: title,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n  weixin_js_sdk_default.a.onMenuShareAppMessage({\n    title: title,\n    desc: desc,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n};\n\n// \n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // \n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n// EXTERNAL MODULE: ./node_modules/swiper/dist/css/swiper.css\nvar swiper = __webpack_require__(\"v2ns\");\nvar swiper_default = /*#__PURE__*/__webpack_require__.n(swiper);\n\n// EXTERNAL MODULE: ./node_modules/vue-slider-component/dist/index.js\nvar dist = __webpack_require__(\"GDE4\");\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/vue-awesome-swiper/dist/vue-awesome-swiper.js\nvar vue_awesome_swiper = __webpack_require__(\"7QTg\");\nvar vue_awesome_swiper_default = /*#__PURE__*/__webpack_require__.n(vue_awesome_swiper);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBMaker.vue\n\nvar NMBMaker_Tone = __webpack_require__(\"ZnLv\");\n\n\n\n\n\n\n\n\nvar touchIdKeyMap = {}; //touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nvar MINI_KEY_LENGTH = 200; // px\nvar extendBtnsTimeout = void 0;\n\nvar NMBMaker_piano = new NMBMaker_Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': '/static/audio/'\n}).toMaster();\n\n// var mbox = new Tone.Sampler({\n//   'C4': 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   'A4': 'A4.[mp3|ogg]',\n//   'C5': 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   'A5': 'A5.[mp3|ogg]',\n//   'C6': 'C6.[mp3|ogg]',\n// }, {\n//   'release': 1,\n//   'baseUrl': 'static/audio/'\n// }).toMaster()\n\nvar NMBMaker_plucky = new NMBMaker_Tone.PluckSynth().toMaster();\n\nvar SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width;\nvar SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nwindow.tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nvar NMBMaker_bouncepart = [];\n\nvar recordStartTime = 0;\n\nvar isLinger = true; //\nvar replayInterval = undefined; //progressbarsetinterval\nvar playOffset = 0; //bar\nvar lingerOffset = 0; //bar\nvar PROGRESS_INTERVAL_TIME = 0.1; //0.1\n/* harmony default export */ var NMBMaker = ({\n  components: {\n    swiper: vue_awesome_swiper[\"swiper\"],\n    swiperSlide: vue_awesome_swiper[\"swiperSlide\"],\n    vueSlider: dist_default.a\n  },\n  data: function data() {\n    return {\n      activeNote: {},\n      recordPart: [], //current record part\n      recordParts: [], //each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: 0,\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block'\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)'\n        },\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)'\n          // transform: 'rotate(90deg)',\n        },\n        formatter: function formatter(value) {\n          if (value) {\n            return (value / 10).toFixed(1) + 's/20s';\n          } else {\n            return '0.0s/20s';\n          }\n        },\n\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)'\n        }\n      }\n    };\n  },\n\n  watch: {\n    playing: function playing(val) {\n      var _this = this;\n\n      console.log('playing status', val);\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(function () {\n\n          _this.vuetimeline += 1;\n          if (_this.vuetimeline >= 200) {\n            _this.toggleReplay();\n            _this.vuetimeline = 0;\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000);\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval);\n      }\n    }\n  },\n  computed: {\n    swiper: function swiper() {\n      return this.$refs.pianoRoll.swiper;\n    },\n    activePartIndex: function activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1;\n    },\n    lastActivePartIndex: function lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1;\n    }\n  },\n  methods: {\n    load: function load() {},\n    toggleReplay: function toggleReplay() {\n      console.log(1);\n      this.playing = !this.playing;\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0;\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100;\n        console.log('');\n        this.confirmRecordPart(0);\n        console.log('kokokoko');\n        recordStartTime = performance.now();\n        console.log('activeOffsetTime' + this.vuetimeline * 100);\n        NMBMaker_Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000); // TODO:in case < context.currentTime\n      } else {\n        console.log('');\n        NMBMaker_Tone.Transport.stop(0); // TODOstopstartstop..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart: function handleNoteStart(noteId) {\n      var noteTime = 0;\n      // console.log('down', e.target.id)\n      NMBMaker_piano.triggerAttack(noteId);\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1);\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now();\n          lingerOffset = this.vuetimeline * 100;\n          isLinger = false;\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset;\n      } else {\n        noteTime = performance.now() - playOffset;\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000;\n        this.recordPart.push({\n          'note': noteId,\n          'time': +(noteTime / 1000).toFixed(4)\n        });\n      } else {\n        this.vuetimeline = 20 * 10; // 0.1s => 200\n        console.log('cannot record more than 20 seconds');\n      }\n    },\n    handleNoteEnd: function handleNoteEnd(noteId) {\n      NMBMaker_piano.triggerRelease(noteId);\n      this.$set(this.activeNote, noteId, 0);\n    },\n    touchNoteStartHandler: function touchNoteStartHandler(e) {\n      console.log(e);\n      //touchmove\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id; // TODO:  touchstartchangetouches///\n      this.handleNoteStart(e.target.id);\n    },\n    touchNoteEndHandler: function touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id);\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]); // TODO:  touchendchangetouches,\n    },\n    confirmRecordPart: function confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex);\n        if (this.recordParts[this.lastActivePartIndex] && this.recordParts[this.lastActivePartIndex].length) {\n          //track,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex]);\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          tonepart[this.lastActivePartIndex].dispose(); //dispose\n        }\n        tonepart[this.lastActivePartIndex] = new NMBMaker_Tone.Part(function (time, value) {\n          //new\n          NMBMaker_piano.triggerAttackRelease(value.note, \"8n\", time);\n        }, this.recordPart).start(0);\n        this.recordParts[this.lastActivePartIndex] = this.recordPart;\n        this.recordPart = [];\n        if (this.checkBouncibility()) {\n          alert('cool');\n        } else {\n          alert('not cool');\n        }\n      } else {\n        console.log('');\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex;\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0; // this is kind of separate for progress view\n        recordStartTime = 0;\n      }\n      isLinger = true;\n    },\n    clearRecordPart: function clearRecordPart(trackNum) {\n      console.log('cleaning track ' + trackNum);\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = [];\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, []);\n        tonepart[trackNum].dispose(); //dispose\n        tonepart[trackNum] = undefined; //\n      } else {\n        console.log('track ' + trackNum + ' has no content');\n      }\n    },\n    checkBouncibility: function checkBouncibility() {\n      this.confirmRecordPart(0);\n      NMBMaker_bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          item._events.forEach(function (noteInfo) {\n            NMBMaker_bouncepart.push(noteInfo.value);\n          });\n        });\n        NMBMaker_bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        return RealMagic(NMBMaker_bouncepart);\n      }\n      return true;\n    },\n    bounceProject: function bounceProject() {\n      var _this2 = this;\n\n      this.confirmRecordPart(0);\n      console.log(this);\n      console.log(tonepart);\n      NMBMaker_bouncepart = [];\n      alert('0');\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          item._events.forEach(function (noteInfo) {\n            NMBMaker_bouncepart.push(noteInfo.value);\n          });\n        });\n        alert('1');\n        NMBMaker_bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        alert('2');\n        //TODO, semi done\n        this.$store.dispatch('BOUNCE_PROJECT', {\n          record: NMBMaker_bouncepart,\n          info: {\n            title: 'default',\n            content: 'default',\n            cover: 'default'\n          }\n        }).then(function (id) {\n          console.log('successfully bounced');\n          alert('');\n          _this2.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id: id\n            }\n          });\n        }).catch(function (err) {\n          alert('failed to upload');\n        });\n        // while (tonepart.length) {\n        //   tonepart.pop().dispose() //dispose\n        // }\n        // tonepart[0] = new Tone.Part(function(time, value) {\n        //   piano.triggerAttackRelease(value.note, \"8n\", time)\n        // }, bouncepart).start(0)\n        // Magic.RealMagic(bouncepart)\n      } else {\n        alert('');\n      }\n    },\n    mapNoteTimeToColor: function mapNoteTimeToColor(t) {\n      return magic_mapNoteTimeToColor(t);\n    },\n    mapNoteMidiToLength: function mapNoteMidiToLength(m) {\n      return magic_mapNoteMidiToLength(m);\n    },\n    adjustTimeline: function adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc');\n        this.toggleReplay(); //ref this is TODO\n      } else {\n        isLinger = true; //\n      }\n    },\n    onMiniKeyboardScroll: function onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY);\n    },\n    onMiniKeyboardStart: function onMiniKeyboardStart(e) {\n      console.log(e);\n    },\n    keng: function keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e); //e.touches is array like object\n      for (var i = 0; i <= e.changedTouches.length - 1; i++) {\n        var a = document.elementFromPoint(e.changedTouches[i].clientX, e.changedTouches[i].clientY);\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (touchIdKeyMap[e.changedTouches[i].identifier] && touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')) {\n            //touch\n            console.log(touchIdKeyMap);\n            this.handleNoteStart(a.getAttribute('id'));\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2);\n            this.handleNoteStart(a.getAttribute('id'));\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else {\n            console.log(3);\n            //\n          }\n        } else {\n          console.log('');\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined;\n        }\n      }\n    },\n    btnStart: function btnStart(e) {\n      var _this3 = this;\n\n      console.log(e);\n      extendBtnsTimeout = setTimeout(function () {\n        //show extend buttons\n        _this3.showExtendBtns = true;\n      }, 500);\n    },\n    btnEnd: function btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout);\n      var a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        //\n        this.bounceProject();\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //\n        this.toggleReplay();\n      }\n      this.showExtendBtns = false;\n      //hide extend buttons\n    }\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    NMBMaker_Tone.Transport.cancel();\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n    this.PARTNUM = 3;\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd: function transitionEnd(e) {\n          console.log('3', this.activeIndex); // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex;\n          self.confirmRecordPart(!isLinger);\n        }\n      }\n    };\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        fullPath: '' + location.origin + location.pathname + '#/new-music-box-maker',\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace(\n      // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n      'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n    // document.querySelector('#D5').addEventListener( \"pointerenter\", ()=>{\n    //   console.log('jinru')\n    // })\n\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bbb339f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\nvar NMBMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"keys\",on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"keyshadow\"}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"})])])],1)])}\nvar NMBMaker_staticRenderFns = []\nvar NMBMaker_esExports = { render: NMBMaker_render, staticRenderFns: NMBMaker_staticRenderFns }\n/* harmony default export */ var components_NMBMaker = (NMBMaker_esExports);\n// CONCATENATED MODULE: ./src/components/NMBMaker.vue\nfunction NMBMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"GJ2J\")\n}\nvar NMBMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBMaker___vue_template_functional__ = false\n/* styles */\nvar NMBMaker___vue_styles__ = NMBMaker_injectStyle\n/* scopeId */\nvar NMBMaker___vue_scopeId__ = \"data-v-bbb339f8\"\n/* moduleIdentifier (server only) */\nvar NMBMaker___vue_module_identifier__ = null\nvar NMBMaker_Component = NMBMaker_normalizeComponent(\n  NMBMaker,\n  components_NMBMaker,\n  NMBMaker___vue_template_functional__,\n  NMBMaker___vue_styles__,\n  NMBMaker___vue_scopeId__,\n  NMBMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBMaker = (NMBMaker_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MBViewer.vue\n\nwindow.Tone = __webpack_require__(\"ZnLv\");\n\n\n\nvar musicPart = undefined;\n\nvar MBViewer_mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster();\n\n/* harmony default export */ var MBViewer = ({\n  components: {},\n  data: function data() {\n    return {\n      playing: false\n    };\n  },\n\n  computed: {\n    project: function project() {\n      return this.$store.state.recordProject;\n    },\n    projectInfo: function projectInfo() {\n      return this.$store.state.recordProjectInfo;\n    }\n  },\n  methods: {\n    load: function load() {},\n    prepareMusic: function prepareMusic() {\n      try {\n        musicPart.dispose();\n      } catch (e) {\n        //\n      }\n      musicPart = new Tone.Part(function (time, value) {\n        MBViewer_mbox.triggerAttackRelease(value.note, \"8n\", time);\n      }, this.project).start(0);\n    },\n    togglePlayMusic: function togglePlayMusic() {\n      if (this.project.length) {\n        Tone.Transport.start(\"+0.01\", 0);\n      }\n    },\n    loadMusicById: function loadMusicById() {\n      var _this = this;\n\n      console.log('hehe', this.$store.state);\n      var id = this.$store.state.route.query.id;\n      // if (!id||!this.project) {\n      //   console.log('')\n      //   return\n      // }\n\n      if (id) {\n        //id\n        console.log('mmm', id);\n        this.$store.dispatch('FETCH_MBOX', { id: id }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.prepareMusic();\n          _this.togglePlayMusic();\n        });\n      } else if (this.project.length) {\n        //store\n        this.prepareMusic();\n      } else {\n        this.$store.dispatch('FETCH_MBOX', { id: 50 }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.prepareMusic();\n          _this.togglePlayMusic();\n        });\n      }\n    },\n    togglePlay: function togglePlay() {\n      this.playing = !this.playing;\n      if (this.playing) {\n        // Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000)\n        Tone.Transport.start(\"+0.01\", 0);\n      } else {\n        Tone.Transport.stop(0); // TODOstopstartstop..\n      }\n    }\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    alert(1);\n    self.loadMusicById();\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + location.href + '&response_type=code&scope=snsapi_userinfo&state=type&quan,url=' + location.href + '&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        // self.loadMusicById()\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + location.href + '&response_type=code&scope=snsapi_userinfo&state=type&quan,url=' + location.href + '&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + location.href + '&response_type=code&scope=snsapi_userinfo&state=type&quan,url=' + location.href + '&connect_redirect=1#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-07efc117\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBViewer.vue\nvar MBViewer_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"mb\"},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.togglePlay}})]),_vm._v(\" \"),_vm._m(0,false,false)])}\nvar MBViewer_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"operate\"},[_c('div',{staticClass:\"share\"}),_vm._v(\" \"),_c('div',{staticClass:\"purchase\"})])}]\nvar MBViewer_esExports = { render: MBViewer_render, staticRenderFns: MBViewer_staticRenderFns }\n/* harmony default export */ var components_MBViewer = (MBViewer_esExports);\n// CONCATENATED MODULE: ./src/components/MBViewer.vue\nfunction MBViewer_injectStyle (ssrContext) {\n  __webpack_require__(\"KDEC\")\n}\nvar MBViewer_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MBViewer___vue_template_functional__ = false\n/* styles */\nvar MBViewer___vue_styles__ = MBViewer_injectStyle\n/* scopeId */\nvar MBViewer___vue_scopeId__ = \"data-v-07efc117\"\n/* moduleIdentifier (server only) */\nvar MBViewer___vue_module_identifier__ = null\nvar MBViewer_Component = MBViewer_normalizeComponent(\n  MBViewer,\n  components_MBViewer,\n  MBViewer___vue_template_functional__,\n  MBViewer___vue_styles__,\n  MBViewer___vue_scopeId__,\n  MBViewer___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MBViewer = (MBViewer_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/common/countButton.vue\n\n/* harmony default export */ var countButton = ({\n  // https://vuejs.org/v2/guide/components.html#Props\n  props: {\n    initCount: Number,\n    initActive: Boolean,\n    iconImg: String,\n    onClickCall: {\n      type: Function,\n      default: function _default() {\n        return function () {\n          console.log('tap tap in count Button');\n        };\n      }\n    }\n  },\n  computed: {\n    style: function style() {\n      // return 'background-color: ' + this.hovering ? this.color: 'red';\n    }\n  },\n  data: function data() {\n    return {\n      currentActiveCount: 0,\n      currentActive: false\n    };\n  },\n\n  watch: {},\n  created: function created() {\n    this.currentActive = this.initActive;\n    this.currentActiveCount = this.currentActive ? this.initCount : this.initCount + 1;\n  },\n  mounted: function mounted() {},\n  updated: function updated() {},\n\n  methods: {\n    updateButton: function updateButton() {\n      // if (this.currentActive) {\n      //   this.currentActiveCount -= 1;\n      // } else {\n      //   this.currentActiveCount += 1;\n      // }\n      this.currentActive = !this.currentActive;\n      this.onClickCall();\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd02150e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\nvar countButton_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar countButton_staticRenderFns = []\nvar countButton_esExports = { render: countButton_render, staticRenderFns: countButton_staticRenderFns }\n/* harmony default export */ var common_countButton = (countButton_esExports);\n// CONCATENATED MODULE: ./src/components/common/countButton.vue\nfunction countButton_injectStyle (ssrContext) {\n  __webpack_require__(\"8GxT\")\n}\nvar countButton_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar countButton___vue_template_functional__ = false\n/* styles */\nvar countButton___vue_styles__ = countButton_injectStyle\n/* scopeId */\nvar countButton___vue_scopeId__ = \"data-v-fd02150e\"\n/* moduleIdentifier (server only) */\nvar countButton___vue_module_identifier__ = null\nvar countButton_Component = countButton_normalizeComponent(\n  countButton,\n  common_countButton,\n  countButton___vue_template_functional__,\n  countButton___vue_styles__,\n  countButton___vue_scopeId__,\n  countButton___vue_module_identifier__\n)\n\n/* harmony default export */ var components_common_countButton = (countButton_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBViewer.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\nvar NMBViewer_musicPart = undefined;\n\n/* harmony default export */ var NMBViewer = ({\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      workIntroAppear: false,\n      controlPanalAppear: false,\n      titleUpdateAppear: false,\n      playing: false,\n      userId: 0,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: ''\n    };\n  },\n\n  computed: {\n    project: function project() {\n      return this.$store.state.recordProject;\n    },\n    projectInfo: function projectInfo() {\n      return this.$store.state.recordProjectInfo;\n    }\n  },\n  methods: {\n    load: function load() {},\n    loadMusicById: function loadMusicById() {\n      var _this = this;\n\n      console.log('hehe', this.$store.state);\n      var id = this.$store.state.route.query.id;\n\n      if (id) {\n        //id\n        console.log('mmm', id);\n        this.$store.dispatch('FETCH_MBOX', { id: id }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n        });\n      } else {\n        // \n        this.$store.dispatch('FETCH_MBOX', { id: 50 }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n        });\n      }\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      });\n    },\n    updateWorkTitle: function updateWorkTitle() {\n      var _this2 = this;\n\n      api_updateWorkTitle({\n        workId: this.$store.state.route.query.id,\n        title: this.newWorkTitle\n      });\n      this.finalNewWorkTitle = this.newWorkTitle;\n      setTimeout(function () {\n        _this2.titleUpdateAppear = false;\n      }, 300);\n    },\n    redirectToMaker: function redirectToMaker() {\n      this.$router.push({\n        path: '/new-music-box-maker'\n        // query: {\n        //   id\n        // }\n      });\n    },\n    purchaseItem: function purchaseItem() {\n      console.log('you are about to purchase ' + this.projectInfo.id);\n    }\n  },\n\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = res.data.data.userId;\n        alert('welcome' + res.data.data.realname);\n        // if (!this.project) {\n        self.loadMusicById();\n        // }\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 1500);\n    setTimeout(function () {\n      _this3.workIntroAppear = true;\n    }, 4000);\n    setTimeout(function () {\n      _this3.controlPanalAppear = true;\n    }, 5000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7da9305a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\nvar NMBViewer_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar NMBViewer_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar NMBViewer_esExports = { render: NMBViewer_render, staticRenderFns: NMBViewer_staticRenderFns }\n/* harmony default export */ var components_NMBViewer = (NMBViewer_esExports);\n// CONCATENATED MODULE: ./src/components/NMBViewer.vue\nfunction NMBViewer_injectStyle (ssrContext) {\n  __webpack_require__(\"MhvM\")\n}\nvar NMBViewer_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBViewer___vue_template_functional__ = false\n/* styles */\nvar NMBViewer___vue_styles__ = NMBViewer_injectStyle\n/* scopeId */\nvar NMBViewer___vue_scopeId__ = \"data-v-7da9305a\"\n/* moduleIdentifier (server only) */\nvar NMBViewer___vue_module_identifier__ = null\nvar NMBViewer_Component = NMBViewer_normalizeComponent(\n  NMBViewer,\n  components_NMBViewer,\n  NMBViewer___vue_template_functional__,\n  NMBViewer___vue_styles__,\n  NMBViewer___vue_scopeId__,\n  NMBViewer___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBViewer = (NMBViewer_Component.exports);\n\n// CONCATENATED MODULE: ./src/router/index.js\n\n\n\n\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vue_router_esm[\"a\" /* default */]);\n\n/* harmony default export */ var router = (new vue_router_esm[\"a\" /* default */]({\n  // mode: 'history', // avoid hash in url\n  routes: [{\n    path: '/',\n    name: 'HelloWorld',\n    component: src_components_HelloWorld\n  },\n  // {\n  //   path: '/music-box-maker',\n  //   name: 'MBMaker',\n  //   component: MBMaker,\n  // },\n  {\n    path: '/new-music-box-maker',\n    name: 'NMBMaker',\n    component: src_components_NMBMaker\n  }, {\n    path: '/new-music-box-viewer',\n    name: 'NMBViewer',\n    component: src_components_NMBViewer\n  }]\n}));\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n// import Toasted from 'vue-toasted';\n\n\n\n\nvue_esm[\"a\" /* default */].use(vue_touch_default.a, { name: 'v-touch' });\n// Vue.use(Toasted);\nvue_esm[\"a\" /* default */].config.productionTip = false;\nvar store = createStore();\nObject(vuex_router_sync[\"sync\"])(store, router);\n\n/* eslint-disable no-new */\nnew vue_esm[\"a\" /* default */]({\n  el: '#app',\n  router: router,\n  store: store,\n  template: '<App/>',\n  components: { App: src_App }\n});\n\n/***/ }),\n\n/***/ \"O/d9\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"hoXB\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"v2ns\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.4c7cd6d8ef20f5735f8a.js","import * as Cookies from 'js-cookie';\n\nconst axios = require('axios');\n\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\n// TODO:cause 500?????? just cuz this few lines???\n\n\nexport function getUserInfo(wxcode) {\n  const tokenInCookie = Cookies.get('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = `Bearer ${tokenInCookie}`;\n    return axios.post('//api.musixise.com/api/user/getInfo', '', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new Promise((resolve, reject) => {\n      axios.post(`//api.musixise.com/api/user/oauth/wechat/callback?code=${wxcode}`, '', reqConfig)\n        .then((res) => {\n          if (res.data.errcode === 20001) {\n            reject(20001); // return\n          }\n          const serviceToken = res.data.data.id_token;\n          reqConfig.headers.Authorization = `Bearer ${serviceToken}`;\n          Cookies.set('serviceToken', serviceToken, {\n            expires: 7,\n          });\n          return axios.post('//api.musixise.com/api/user/getInfo', '', reqConfig);\n        }, () => {\n          reject();\n        })\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n  // !tokenInCookie&&!wxcodeapp.js, \n  return false;\n}\n\nexport function uploadRecord(record, info) {\n  return new Promise((resolve, reject) => {\n    const formReqConfig = { headers: { 'Content-Type': 'multipart/form-data', processData: false } };\n    const blob = new Blob([JSON.stringify(record)]);\n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      const fd = new FormData();\n      fd.append('fname', 'test.txt');\n      fd.append('data', event.target.result);\n      const postFix = await axios.post('//api.musixise.com/api/uploadAudio', fd, formReqConfig);\n      const workURL = `http://oiqvdjk3s.bkt.clouddn.com/${postFix.data.data}`;\n      const param = {\n        ...info,\n        url: workURL,\n      };\n      console.log(workURL);\n      return axios.post('//api.musixise.com/api/work/create', JSON.stringify(param), reqConfig)\n               .then((res) => {\n                 resolve(res.data.data.id);\n               })\n               .catch((err) => {\n                 reject(err);\n               });\n    };\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nexport function fetchMbox(id) {\n  return axios.post(`//api.musixise.com/api/work/detail/${id}`, '', reqConfig);\n}\nexport function toggleFavSong({ workId, status }) {\n  return axios.post('//api.musixise.com/api/favorite/addWork', JSON.stringify({ workId, status }), reqConfig)\n    .then((res) => { console.log(res); })\n    .catch((err) => { console.log(err); });\n}\nexport function updateWorkTitle({ workId, title }) {\n  return axios.post(`//api.musixise.com/api/work/updateWork/${workId}`, JSON.stringify({ workId, title }), reqConfig)\n    .then((res) => { console.log(res); })\n    .catch((err) => { console.log(err); });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/api.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d7a33f4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d7a33f4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7d7a33f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export function getUrlParam(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\nexport function getUrlParam1(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/util.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b801b49\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b801b49\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3b801b49\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","const Tone = require('tone');\n\nTone.Transport.cancel();\nconst SAME_NOTE_INTERVAL = 1; // 1\nlet musicPreview;\n\nlet oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\nconst mbox = new Tone.Sampler({\n  C4: 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  A4: 'A4.[mp3|ogg]',\n  C5: 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  A5: 'A5.[mp3|ogg]',\n  C6: 'C6.[mp3|ogg]',\n}, {\n  release: 1,\n  baseUrl: '/static/audio/',\n}).toMaster();\nexport function RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(JSON.stringify(items));\n  const tasksObj = {};\n  items.forEach((item) => {\n    //* 2 cuz print mbox need 1 octave higher.\n    const itemNoteFreq = parseInt(Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) { tasksObj[itemNoteFreq] = []; }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  const taskTypes = Object.keys(tasksObj); // [659,784,...]  freq array, object.keys\n  const taskTimeArrays = Object.values(tasksObj); // [[2.66][1.0295,1.39,2.6713]] \n  const machines = []; // init with existing types, will add more machines\n  const groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('18');\n    return false;\n  }\n\n  taskTimeArrays.forEach((timeArray) => {\n    const final = [];\n    timeArray.forEach((time, j) => {\n      const test = []; // final finaltest\n      let allPreviousOccupied = false;\n      let successFound = false;\n      if (j === 0) {\n        final.push(1); // 1\n      } else {\n        let counter = j;\n        while (counter >= 1 && !allPreviousOccupied) { // TODO: -1 or 0\n          counter -= 1;\n          if ((time - timeArray[counter] >= SAME_NOTE_INTERVAL)\n            && test.indexOf(final[counter]) === -1) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([...new Set(final)].length === [...new Set(test)].length) {\n              // finalsetunique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if ((counter === 0 && !successFound) || allPreviousOccupied) {\n          final.push(Math.max(...final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach((group, index) => {\n    let count = 0;\n    while (count <= Math.max(...group) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    const lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('18');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //,\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nexport function mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  const COLOR1 = [151, 255, 241];\n  const COLOR2 = [98, 166, 223];\n  const COLOR3 = [154, 124, 255];\n  const TIME_MAX = 20;\n  let rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [COLOR1[0] + ((time * (COLOR2[0] - COLOR1[0])) / (TIME_MAX / 2)),\n      COLOR1[1] + ((time * (COLOR2[1] - COLOR1[1])) / (TIME_MAX / 2)),\n      COLOR1[2] + ((time * (COLOR2[2] - COLOR1[2])) / (TIME_MAX / 2))];\n  }\n  rgb = [COLOR2[0] + ((time * (COLOR3[0] - COLOR2[0])) / (TIME_MAX / 2)),\n    COLOR2[1] + ((time * (COLOR3[1] - COLOR2[1])) / (TIME_MAX / 2)),\n    COLOR2[2] + ((time * (COLOR3[2] - COLOR2[2])) / (TIME_MAX / 2))];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return `rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`;\n}\nexport function mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 50) / (110 - 40))) + 0.2}`; // 75 is rem to px\n}\n\nexport function preview(items) {\n  console.log('current state', Tone.Transport.state);\n  if (Tone.Transport.state === 'stopped') {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) { mbox.triggerAttack('E6', 0, 0); oncePlayed = true; }\n    if (musicPreview) musicPreview.dispose();\n    musicPreview = new Tone.Part(((time, value) => {\n      mbox.triggerAttackRelease(value.note, '8n', time);\n    }), items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 17; // 17s\n    Tone.Transport.start('+0.01', 0);\n  } else {\n    Tone.Transport.stop(0);\n  }\n  // try {\n  //   Tone.Transport.stop(0);\n  //   console.log(1);\n  //   // Tone.Part.removeAll();\n  //   Tone.Transport.clear();\n  //   console.log(2);\n  //   music.dispose();\n  //   music = undefined;\n  //   console.log(3);\n  // } catch (e) {\n  //   //\n  // } finally {\n  //   music = new Tone.Part(((time, value) => {\n  //     mbox.triggerAttackRelease(value.note, '8n', time);\n  //   }), items).start(0, 0);\n  //   Tone.Transport.start('+0.01', 0);\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/magic.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-94d961f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MBMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MBMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-94d961f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MBMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-94d961f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MBMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-94d961f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MBAuthor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MBAuthor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-94d961f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MBAuthor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-94d961f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MBAuthor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bbb339f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bbb339f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bbb339f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-07efc117\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MBViewer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MBViewer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-07efc117\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MBViewer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-07efc117\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MBViewer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fd02150e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./countButton.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./countButton.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fd02150e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./countButton.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fd02150e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7da9305a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBViewer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBViewer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7da9305a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBViewer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7da9305a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","import {\n  fetchUser,\n  fetchItems,\n  fetchIdsByType,\n  fetchMbox,\n  uploadRecord,\n} from '../_common/js/api';\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\nexport default {\n  BOUNCE_PROJECT: ({ commit, state }, { record, info }) => uploadRecord(record, info),\n    // \n         // uploadRecord(record, info).then(() => {\n    //   // commit('SET_BOUNCE_PROJECT', { record, info });\n    //   // commit store\n    // });\n\n  FETCH_MBOX: ({ commit, state }, { id }) =>\n  new Promise((resolve, reject) => {\n    // id\n    fetchMbox(id)\n      .then((project) => {\n        console.log('xxi', project.data.data.url);\n        const request = new XMLHttpRequest();\n        request.open('GET', project.data.data.url, true);\n        request.send(null);\n        request.onreadystatechange = function () {\n          if (request.readyState === 4 && request.status === 200) {\n            const type = request.getResponseHeader('Content-Type');\n            if (type.indexOf('text') !== -1) {\n              commit('SET_ID_PROJECT', { record: JSON.parse(request.responseText), info: project.data.data });\n              resolve();\n            }\n          }\n        };\n      });\n  }),\n\n  // ensure data for rendering given list type\n  FETCH_LIST_DATA: ({ commit, dispatch, state }, { type }) => {\n    commit('SET_ACTIVE_TYPE', { type });\n    return fetchIdsByType(type)\n      .then(ids => commit('SET_LIST', { type, ids }))\n      .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n  },\n\n  // ensure all active items are fetched\n  ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => dispatch('FETCH_ITEMS', {\n    ids: getters.activeIds,\n  }),\n\n  FETCH_ITEMS: ({ commit, state }, { ids }) => {\n    // on the client, the store itself serves as a cache.\n    // only fetch items that we do not already have, or has expired (3 minutes)\n    const now = Date.now();\n    ids = ids.filter((id) => {\n      const item = state.items[id];\n      if (!item) {\n        return true;\n      }\n      if (now - item.__lastUpdated > 1000 * 60 * 3) {\n        return true;\n      }\n      return false;\n    });\n    if (ids.length) {\n      return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n    }\n    return Promise.resolve();\n  },\n\n  FETCH_USER: ({ commit, state }, { id }) => (state.users[id]\n      ? Promise.resolve(state.users[id])\n      : fetchUser(id).then(user => commit('SET_USER', { id, user }))),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue';\n\nexport default {\n  SET_USER_INFO: (state, { type }) => { // \n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: (state, { type, ids }) => { // \n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: (state, { items }) => { // \n    items.forEach((item) => {\n      if (item) {\n        Vue.set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: (state, { record }) => { // \n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: (state, { record, info }) => { // \n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_FINAL_WORK: (state, { type }) => { // \n    state.activeType = type;\n  },\n  SET_USER: (state, { id, user }) => {\n    Vue.set(state.users, id, user || false); /* false means user not found */\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export default {\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds(state) {\n    const { activeType, itemsPerPage, lists } = state;\n    const page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      const start = (page - 1) * itemsPerPage;\n      const end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems(state, getters) {\n    return getters.activeIds.map(id => state.items[id]).filter(_ => _);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\n\nVue.use(Vuex);\n\nexport function createStore() {\n  return new Vuex.Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: [],\n      },\n      recordParts: [],\n      recordProject: [],\n    },\n    actions,\n    mutations,\n    getters,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\n<div id=\"app\">\n  <transition :name=\"transitionName\">\n    <router-view/>\n  </transition>\n</div>\n</template>\n\n<script>\n// https://router.vuejs.org/en/advanced/transitions.html\nexport default {\n  name: 'app',\n  data() {\n    return {\n      transitionName:'fade',\n    }\n  },\n  beforeRouteUpdate (to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  },\n};\n</script>\n\n<style scoped>\n#app {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height:100%;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d7a33f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"app\">\n    <div class=\"m-logo\"></div>\n    <div class=\"redirect-button\" id=\"mb-maker\" @touchstart=\"redirectTo('/new-music-box-maker')\">\n        \n    </div>\n  </div>\n</template>\n\n<script>\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nexport default {\n  name: 'hello',\n  data() {\n    return {\n      msg: 'Welcome to Your Vue.js App',\n    };\n  },\n  methods:{\n    redirectTo(path) {\n      // IMPORTANT keng. authcodeauth\n      // authcookie\n      this.$router.push(path)\n    }\n  },\n  created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      )\n    }\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n* {\n  box-sizing: border-box;\n  margin:0;\n  padding:0;\n}\n.app {\n\n  background-color: black;\n}\n.m-logo {\n  position: absolute;\n  width: getRem(200);\n  height: getRem(200);\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background:url('//gw.alicdn.com/tps/TB1pfhUOFXXXXaSaXXXXXXXXXXX-350-350.png') no-repeat center center;\n  background-size: getRem(175) getRem(175);\n  background-color: #ffcc33;\n  border-radius: getRem(25);\n  animation: toupperleftwithsize 4.5s linear;\n  -webkit-animation-fill-mode: forwards;\n  animation-fill-mode: forwards;\n  z-index: 2\n}\n.redirect-button {\n  width:getRem(450);\n  height: getRem(100);\n  padding: getRem(20) getRem(50);\n  background-color: #ffcc33;\n  border-radius:getRem(10);\n  color: gray;\n}\n.redirect-button,#mb-maker {\n  position: absolute;\n  top: 60%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size:.57rem;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      \\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b801b49\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","<script>\nwindow.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\n\nvar piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster()\n\nvar mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster()\n\nvar plucky = new Tone.PluckSynth().toMaster()\n// var part = new Tone.Part(function(time, value){\n// \t//the value is an object which contains both the note and the velocity\n// piano.triggerAttackRelease(value.note, \"8n\", time)\n// }, [{\"time\" : 1.9, \"note\" : \"C3\"},\n// \t   {\"time\" : 2, \"note\" : \"C4\"},\n//      {\"time\" : 3, \"note\" : \"C3\"},\n//      \t   {\"time\" : 4, \"note\" : \"C4\"}\n// ]).start(0)\n// Tone.Transport.start()\n\nwindow.recorder = [] //Tone.Part => schedule notes\n\nwindow.tonepart = [] // store all the music parts. (ummm,that's why it's named part...)\nlet bouncepart = []\nvar timeline = 0\nexport default {\n  data() {\n    return {\n      activeNote: {},\n      timerToStartRecord: 0,\n      recording: false,\n      replaying: false,\n    }\n  },\n  methods: {\n    load() {},\n    startRecord() {\n      this.timerToStartRecord = 3\n      let timer = setInterval(() => {\n        this.timerToStartRecord -= 1\n        if (this.timerToStartRecord == 0) {\n          clearInterval(timer)\n        }\n      }, 1000)\n    },\n    touchStartHandler: function(e) {\n      console.log('down', e.target.id)\n      piano.triggerAttack(e.target.id)\n      this.$set(this.activeNote, e.target.id, 1)\n      if (this.recording) {\n        recorder.push({\n          'note': e.target.id,\n          'time': +((performance.now() - timeline) / 1000).toFixed(4)\n        })\n      }\n    },\n    touchEndHandler: function(e) {\n      // console.log('up',e.target.id)\n      piano.triggerRelease(e.target.id)\n      // plucky.triggerRelease(e.target.id)\n      this.$set(this.activeNote, e.target.id, 0)\n    },\n    toggleRecord(e) {\n      this.recording = !this.recording\n      if (this.recording) {\n        //start recording\n        recorder = []\n        if (!this.replaying) {\n          this.timerToStartRecord = 3\n          let timer = setInterval(() => {\n            this.timerToStartRecord -= 1\n            if (this.timerToStartRecord == 0) {\n              clearInterval(timer)\n              timeline = performance.now()\n            }\n          }, 1000)\n\n          // timeline = performance.now()\n          // 1. e.timestamp behave not consistent\n          // 2. if currently playing, follow that timeline\n        }\n\n        try {\n          // tonepart.dispose()//disposepart\n        } catch (e) {\n          console.warn('tone cannot be disposed')\n        }\n      } else {\n        //stop recording\n        console.log('kikikiki')\n        if (recorder.length) {\n          tonepart[tonepart.length] = new Tone.Part(function(time, value) { //new\n            piano.triggerAttackRelease(value.note, \"8n\", time)\n          }, recorder).start(0)\n        }\n      }\n    },\n    toggleReplay() {\n      console.log(1)\n      this.replaying = !this.replaying\n      if (this.replaying) {\n        console.log('kokokoko')\n        timeline = performance.now();\n        Tone.Transport.start(\"+0.01\") // in case < context.currentTime\n      } else {\n        Tone.Transport.stop(0) // TODOstopstartstop..\n      }\n    },\n    undoRecord() {\n      //TODO:\n      // tonepart[tonepart.length-1].dispose() //disposepartdispose\n      //TODO:tonepart\n      // TODO: tonepartundograyout\n\n      tonepart.pop().dispose() //dispose\n      // Tone.Transport.clear(tonepart);\n    },\n    bounceProject() {\n      console.log(tonepart)\n      bouncepart = []\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          item._events.forEach(noteInfo => {\n            bouncepart.push(noteInfo.value)\n          })\n        })\n        while (tonepart.length) {\n          tonepart.pop().dispose() //dispose\n        }\n        tonepart[0] = new Tone.Part(function(time, value) { //new\n          piano.triggerAttackRelease(value.note, \"8n\", time)\n        }, bouncepart).start(0)\n\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        console.log(bouncepart)\n        Magic.generateJSCadCode(bouncepart)\n      } else {\n        alert('tm')\n      }\n    },\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n\n    //test magic.js\n    // const work = [{note: \"E4\", time: 0.14585000000000037},\n    // {note: \"G4\", time: 1.0295},\n    // {note: \"G4\", time: 1.3985},\n    // {note: \"E4\", time: 2.6605300000000005},\n    // {note: \"D4\", time: 3.4207450000000006},\n    // {note: \"C4\", time: 4.196245000000001},\n    // {note: \"G4\", time: 2.671395000000004},\n    // {note: \"A4\", time: 3.35932},\n    // {note: \"B4\", time: 4.183044999999998}]\n    //\n    // Magic.generateJSCadCode(work)\n\n\n    if (!inWechat) return\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div id=\"app\">\n  <div :class=\"['mask', timerToStartRecord>1?'fadein':'fadeout', timerToStartRecord==0?'hide':'']\">\n    <p id=\"timer\" class=\"rotate\">{{timerToStartRecord}}</p>\n  </div>\n  <div class=\"container\">\n    <!-- all the kays -->\n    <div class=\"keys\" @touchstart.stop.prevent=\"touchStartHandler\" @touchend.stop.event=\"touchEndHandler\">\n      <!-- using sharp sign => '#' as object key cause syntax error... -->\n      <!-- <div :class=\"['white', 'a', activeNote.A3?'active-note':'']\" id=\"A3\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb3?'active-note':'']\" id=\"Bb3\"></div>\n      <div :class=\"['white', 'b', activeNote.B3?'active-note':'']\" id=\"B3\"></div> -->\n      <div :class=\"['white', 'c', activeNote.C4?'active-note':'']\" id=\"C4\"></div>\n      <div :class=\"['black', 'd-minor', activeNote.Db4?'active-note':'']\" id=\"Db4\"></div>\n      <div :class=\"['white', 'd', activeNote.D4?'active-note':'']\" id=\"D4\"></div>\n      <div :class=\"['black', 'e-minor', activeNote.Eb4?'active-note':'']\" id=\"Eb4\"></div>\n      <div :class=\"['white', 'e', activeNote.E4?'active-note':'']\" id=\"E4\"></div>\n      <div :class=\"['white', 'f', activeNote.F4?'active-note':'']\" id=\"F4\"></div>\n      <div :class=\"['black', 'f-sharp', activeNote.Gb4?'active-note':'']\" id=\"Gb4\"></div>\n      <div :class=\"['white', 'g', activeNote.G4?'active-note':'']\" id=\"G4\"></div>\n      <div :class=\"['black', 'a-minor', activeNote.Ab4?'active-note':'']\" id=\"Ab4\"></div>\n      <div :class=\"['white', 'a', activeNote.A4?'active-note':'']\" id=\"A4\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb4?'active-note':'']\" id=\"Bb4\"></div>\n      <div :class=\"['white', 'b', activeNote.B4?'active-note':'']\" id=\"B4\"></div>\n      <div :class=\"['white', 'c', activeNote.C5?'active-note':'']\" id=\"C5\"></div>\n      <div :class=\"['black', 'd-minor', activeNote.Db5?'active-note':'']\" id=\"Db5\"></div>\n      <div :class=\"['white', 'd', activeNote.D5?'active-note':'']\" id=\"D5\"></div>\n      <div :class=\"['black', 'e-minor', activeNote.Eb5?'active-note':'']\" id=\"Eb5\"></div>\n      <div :class=\"['white', 'e', activeNote.E5?'active-note':'']\" id=\"E5\"></div>\n      <div :class=\"['white', 'f', activeNote.F5?'active-note':'']\" id=\"F5\"></div>\n      <div :class=\"['black', 'f-sharp', activeNote.Gb5?'active-note':'']\" id=\"Gb5\"></div>\n      <div :class=\"['white', 'g', activeNote.G5?'active-note':'']\" id=\"G5\"></div>\n      <div :class=\"['black', 'a-minor', activeNote.Ab5?'active-note':'']\" id=\"Ab5\"></div>\n      <div :class=\"['white', 'a', activeNote.A5?'active-note':'']\" id=\"A5\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb5?'active-note':'']\" id=\"Bb5\"></div>\n      <div :class=\"['white', 'b', activeNote.B5?'active-note':'']\" id=\"B5\"></div>\n      <div :class=\"['white', 'c', activeNote.C6?'active-note':'']\" id=\"C6\"></div>\n    </div>\n    <!-- the controller panal -->\n    <div class=\"controller\">\n      <div class=\"funcBtn record\" :class=\"recording?'active':''\" @click=\"toggleRecord\">\n        <div class=\"recordHint\"></div>\n      </div>\n      <div class=\"funcBtn play\" :class=\"replaying?'active':''\" @click=\"toggleReplay\">\n        <div :class=\"['rotate',replaying?'playHint':'stopHint']\"></div>\n      </div>\n      <div class=\"funcBtn undo\" @click=\"undoRecord\">\n        <div class=\"undoHint rotate\"></div>\n      </div>\n      <div class=\"funcBtn bounce\" @click=\"bounceProject\">\n        <div class=\"bounceHint rotate\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n\nh2 {\n    font-size: 20px;\n    color: #2c3e50;\n}\n\n* {\n    user-select: none;\n    margin: 0;\n    padding: 0;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n\n.keys {\n    /* position: absolute;  make whole keys appear */\n    /* height: 100%; */\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    float: left;\n    /* padding-right:getRem(347); */\n    box-sizing: border-box;\n}\n\n.controller {\n    background: linear-gradient(90deg, #434343 0%, #212121 100%);\n    width: getRem(350);\n    right: 0;\n    height: 100%;\n    position: fixed;\n    .funcBtn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: getRem(100);\n        height: getRem(220);\n        border-radius: getRem(10);\n        box-sizing: border-box;\n        &.record {\n            background-color: #b70411;\n            .recordHint {\n                width: getRem(50);\n                height: getRem(50);\n                background-color: white;\n                border-radius: 50%;\n            }\n            &.active {\n                background-color: red;\n                border: 1px solid white;\n            }\n        }\n        &.play {\n            background-color: #098244;\n            .playHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/play.svg') center center;\n                background-size: cover;\n            }\n            .stopHint {\n                width: getRem(45);\n                height: getRem(45);\n                background-color: white;\n                border-radius: 10%;\n            }\n            &.active {\n                background-color: #0aca0a;\n                border: 1px solid white;\n            }\n        }\n        &.undo {\n            background-color: #a4af00;\n            .undoHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/undo.svg') center center;\n                background-size: cover;\n            }\n            &:active {\n                background-color: #e3f300;\n                // border: 1px solid white;\n            }\n        }\n        &.bounce {\n            background-color: black;\n            .bounceHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/bounce.svg') center center;\n                background-size: cover;\n            }\n            &.active {\n                background-color: green;\n                border: 1px solid white;\n            }\n        }\n    }\n}\n\n.progressBar {\n    position: fixed;\n    width: getRem(750);\n}\n\n/* piano keyboard layout css  */\n\n.white {\n    width: getRem(400);\n    height: getRem(100);\n    z-index: 1;\n    border-left: 1px solid #bbb;\n    border-bottom: 1px solid #bbb;\n    border-radius: 0 0 5px 5px;\n    box-shadow: -1px 0 0 rgba(255, 255, 255, 0.8) inset, 0 0 5px #ccc inset, 0 0 3px rgba(0, 0, 0, 0.2);\n    background: linear-gradient(top, #eee 0%, #fff 100%);\n    &.active-note {\n        box-shadow: 2px 0 3px rgba(0, 0, 0, 0.1) inset, -5px 5px 20px rgba(0, 0, 0, 0.2) inset, 0 0 3px rgba(0, 0, 0, 0.2);\n        background: linear-gradient(top, #fff 0%, #e9e9e9 100%);\n    }\n}\n\n.black {\n    position: relative;\n    width: getRem(200);\n    height: getRem(50);\n    margin-top: getRem(-25);\n    top: getRem(25);\n    z-index: 2;\n    border: 1px solid #000;\n    border-radius: 0 0 3px 3px;\n    box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -5px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 2px 4px rgba(0, 0, 0, 0.5);\n    background: linear-gradient(45deg, #222 0%, #555 100%);\n    &.active-note {\n        box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -2px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 1px 2px rgba(0, 0, 0, 0.5);\n        background: linear-gradient(left, #444 0%, #222 100%);\n    }\n}\n\n.a,\n.c,\n.d,\n.f,\n.g {\n    margin-bottom: getRem(-25);\n}\n\n/* mask layout */\n\n.mask {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 100;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.mask #timer {\n    color: white;\n    font-size: xx-large;\n    font-style: italic;\n}\n\n.fadein {\n    animation: fadein 1s;\n    animation-fill-mode: forwards;\n}\n\n.fadeout {\n    animation: fadeout 1s;\n    animation-fill-mode: forwards;\n}\n@keyframes fadein {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n@keyframes fadeout {\n    from {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.hide {\n    display: none;\n}\n\n.rotate {\n    transform: rotate(90deg);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MBMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{class:['mask', _vm.timerToStartRecord>1?'fadein':'fadeout', _vm.timerToStartRecord==0?'hide':'']},[_c('p',{staticClass:\"rotate\",attrs:{\"id\":\"timer\"}},[_vm._v(_vm._s(_vm.timerToStartRecord))])]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"keys\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"controller\"},[_c('div',{staticClass:\"funcBtn record\",class:_vm.recording?'active':'',on:{\"click\":_vm.toggleRecord}},[_c('div',{staticClass:\"recordHint\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn play\",class:_vm.replaying?'active':'',on:{\"click\":_vm.toggleReplay}},[_c('div',{class:['rotate',_vm.replaying?'playHint':'stopHint']})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn undo\",on:{\"click\":_vm.undoRecord}},[_c('div',{staticClass:\"undoHint rotate\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn bounce\",on:{\"click\":_vm.bounceProject}},[_c('div',{staticClass:\"bounceHint rotate\"})])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-94d961f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBMaker.vue\n// module id = null\n// module chunks = ","<script>\nwindow.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\n\nvar piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster()\n\nvar mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster()\n\nvar plucky = new Tone.PluckSynth().toMaster()\n// var part = new Tone.Part(function(time, value){\n// \t//the value is an object which contains both the note and the velocity\n// piano.triggerAttackRelease(value.note, \"8n\", time)\n// }, [{\"time\" : 1.9, \"note\" : \"C3\"},\n// \t   {\"time\" : 2, \"note\" : \"C4\"},\n//      {\"time\" : 3, \"note\" : \"C3\"},\n//      \t   {\"time\" : 4, \"note\" : \"C4\"}\n// ]).start(0)\n// Tone.Transport.start()\n\nwindow.recorder = [] //Tone.Part => schedule notes\n\nwindow.tonepart = [] // store all the music parts. (ummm,that's why it's named part...)\nlet bouncepart = []\nvar timeline = 0\nexport default {\n  data() {\n    return {\n      activeNote: {},\n      timerToStartRecord: 0,\n      recording: false,\n      replaying: false,\n    }\n  },\n  methods: {\n    load() {},\n    startRecord() {\n      this.timerToStartRecord = 3\n      let timer = setInterval(() => {\n        this.timerToStartRecord -= 1\n        if (this.timerToStartRecord == 0) {\n          clearInterval(timer)\n        }\n      }, 1000)\n    },\n    touchStartHandler: function(e) {\n      console.log('down', e.target.id)\n      piano.triggerAttack(e.target.id)\n      this.$set(this.activeNote, e.target.id, 1)\n      if (this.recording) {\n        recorder.push({\n          'note': e.target.id,\n          'time': +((performance.now() - timeline) / 1000).toFixed(4)\n        })\n      }\n    },\n    touchEndHandler: function(e) {\n      // console.log('up',e.target.id)\n      piano.triggerRelease(e.target.id)\n      // plucky.triggerRelease(e.target.id)\n      this.$set(this.activeNote, e.target.id, 0)\n    },\n    toggleRecord(e) {\n      this.recording = !this.recording\n      if (this.recording) {\n        //start recording\n        recorder = []\n        if (!this.replaying) {\n          this.timerToStartRecord = 3\n          let timer = setInterval(() => {\n            this.timerToStartRecord -= 1\n            if (this.timerToStartRecord == 0) {\n              clearInterval(timer)\n              timeline = performance.now()\n            }\n          }, 1000)\n\n          // timeline = performance.now()\n          // 1. e.timestamp behave not consistent\n          // 2. if currently playing, follow that timeline\n        }\n\n        try {\n          // tonepart.dispose()//disposepart\n        } catch (e) {\n          console.warn('tone cannot be disposed')\n        }\n      } else {\n        //stop recording\n        console.log('kikikiki')\n        if (recorder.length) {\n          tonepart[tonepart.length] = new Tone.Part(function(time, value) { //new\n            piano.triggerAttackRelease(value.note, \"8n\", time)\n          }, recorder).start(0)\n        }\n      }\n    },\n    toggleReplay() {\n      console.log(1)\n      this.replaying = !this.replaying\n      if (this.replaying) {\n        console.log('kokokoko')\n        timeline = performance.now();\n        Tone.Transport.start(\"+0.01\") // in case < context.currentTime\n      } else {\n        Tone.Transport.stop(0) // TODOstopstartstop..\n      }\n    },\n    undoRecord() {\n      //TODO:\n      // tonepart[tonepart.length-1].dispose() //disposepartdispose\n      //TODO:tonepart\n      // TODO: tonepartundograyout\n\n      tonepart.pop().dispose() //dispose\n      // Tone.Transport.clear(tonepart);\n    },\n    bounceProject() {\n      console.log(tonepart)\n      bouncepart = []\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          item._events.forEach(noteInfo => {\n            bouncepart.push(noteInfo.value)\n          })\n        })\n        while (tonepart.length) {\n          tonepart.pop().dispose() //dispose\n        }\n        tonepart[0] = new Tone.Part(function(time, value) { //new\n          piano.triggerAttackRelease(value.note, \"8n\", time)\n        }, bouncepart).start(0)\n\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        console.log(bouncepart)\n        Magic.generateJSCadCode(bouncepart)\n      } else {\n        alert('tm')\n      }\n    },\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n\n    //test magic.js\n    // const work = [{note: \"E4\", time: 0.14585000000000037},\n    // {note: \"G4\", time: 1.0295},\n    // {note: \"G4\", time: 1.3985},\n    // {note: \"E4\", time: 2.6605300000000005},\n    // {note: \"D4\", time: 3.4207450000000006},\n    // {note: \"C4\", time: 4.196245000000001},\n    // {note: \"G4\", time: 2.671395000000004},\n    // {note: \"A4\", time: 3.35932},\n    // {note: \"B4\", time: 4.183044999999998}]\n    //\n    // Magic.generateJSCadCode(work)\n\n\n    if (!inWechat) return\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box-maker&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box-maker&connect_redirect=1#wechat_redirect'\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div id=\"app\">\n  <div :class=\"['mask', timerToStartRecord>1?'fadein':'fadeout', timerToStartRecord==0?'hide':'']\">\n    <p id=\"timer\" class=\"rotate\">{{timerToStartRecord}}</p>\n  </div>\n  <div class=\"container\">\n    <!-- all the kays -->\n    <div class=\"keys\" @touchstart.stop.prevent=\"touchStartHandler\" @touchend.stop.event=\"touchEndHandler\">\n      <!-- using sharp sign => '#' as object key cause syntax error... -->\n      <!-- <div :class=\"['white', 'a', activeNote.A3?'active-note':'']\" id=\"A3\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb3?'active-note':'']\" id=\"Bb3\"></div>\n      <div :class=\"['white', 'b', activeNote.B3?'active-note':'']\" id=\"B3\"></div> -->\n      <div :class=\"['white', 'c', activeNote.C4?'active-note':'']\" id=\"C4\"></div>\n      <div :class=\"['black', 'd-minor', activeNote.Db4?'active-note':'']\" id=\"Db4\"></div>\n      <div :class=\"['white', 'd', activeNote.D4?'active-note':'']\" id=\"D4\"></div>\n      <div :class=\"['black', 'e-minor', activeNote.Eb4?'active-note':'']\" id=\"Eb4\"></div>\n      <div :class=\"['white', 'e', activeNote.E4?'active-note':'']\" id=\"E4\"></div>\n      <div :class=\"['white', 'f', activeNote.F4?'active-note':'']\" id=\"F4\"></div>\n      <div :class=\"['black', 'f-sharp', activeNote.Gb4?'active-note':'']\" id=\"Gb4\"></div>\n      <div :class=\"['white', 'g', activeNote.G4?'active-note':'']\" id=\"G4\"></div>\n      <div :class=\"['black', 'a-minor', activeNote.Ab4?'active-note':'']\" id=\"Ab4\"></div>\n      <div :class=\"['white', 'a', activeNote.A4?'active-note':'']\" id=\"A4\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb4?'active-note':'']\" id=\"Bb4\"></div>\n      <div :class=\"['white', 'b', activeNote.B4?'active-note':'']\" id=\"B4\"></div>\n      <div :class=\"['white', 'c', activeNote.C5?'active-note':'']\" id=\"C5\"></div>\n      <div :class=\"['black', 'd-minor', activeNote.Db5?'active-note':'']\" id=\"Db5\"></div>\n      <div :class=\"['white', 'd', activeNote.D5?'active-note':'']\" id=\"D5\"></div>\n      <div :class=\"['black', 'e-minor', activeNote.Eb5?'active-note':'']\" id=\"Eb5\"></div>\n      <div :class=\"['white', 'e', activeNote.E5?'active-note':'']\" id=\"E5\"></div>\n      <div :class=\"['white', 'f', activeNote.F5?'active-note':'']\" id=\"F5\"></div>\n      <div :class=\"['black', 'f-sharp', activeNote.Gb5?'active-note':'']\" id=\"Gb5\"></div>\n      <div :class=\"['white', 'g', activeNote.G5?'active-note':'']\" id=\"G5\"></div>\n      <div :class=\"['black', 'a-minor', activeNote.Ab5?'active-note':'']\" id=\"Ab5\"></div>\n      <div :class=\"['white', 'a', activeNote.A5?'active-note':'']\" id=\"A5\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb5?'active-note':'']\" id=\"Bb5\"></div>\n      <div :class=\"['white', 'b', activeNote.B5?'active-note':'']\" id=\"B5\"></div>\n      <div :class=\"['white', 'c', activeNote.C6?'active-note':'']\" id=\"C6\"></div>\n    </div>\n    <!-- the controller panal -->\n    <div class=\"controller\">\n      <div class=\"funcBtn record\" :class=\"recording?'active':''\" @click=\"toggleRecord\">\n        <div class=\"recordHint\"></div>\n      </div>\n      <div class=\"funcBtn play\" :class=\"replaying?'active':''\" @click=\"toggleReplay\">\n        <div :class=\"['rotate',replaying?'playHint':'stopHint']\"></div>\n      </div>\n      <div class=\"funcBtn undo\" @click=\"undoRecord\">\n        <div class=\"undoHint rotate\"></div>\n      </div>\n      <div class=\"funcBtn bounce\" @click=\"bounceProject\">\n        <div class=\"bounceHint rotate\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n\nh2 {\n    font-size: 20px;\n    color: #2c3e50;\n}\n\n* {\n    user-select: none;\n    margin: 0;\n    padding: 0;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n\n.keys {\n    /* position: absolute;  make whole keys appear */\n    /* height: 100%; */\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    float: left;\n    /* padding-right:getRem(347); */\n    box-sizing: border-box;\n}\n\n.controller {\n    background: linear-gradient(90deg, #434343 0%, #212121 100%);\n    width: getRem(350);\n    right: 0;\n    height: 100%;\n    position: fixed;\n    .funcBtn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: getRem(100);\n        height: getRem(220);\n        border-radius: getRem(10);\n        box-sizing: border-box;\n        &.record {\n            background-color: #b70411;\n            .recordHint {\n                width: getRem(50);\n                height: getRem(50);\n                background-color: white;\n                border-radius: 50%;\n            }\n            &.active {\n                background-color: red;\n                border: 1px solid white;\n            }\n        }\n        &.play {\n            background-color: #098244;\n            .playHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/play.svg') center center;\n                background-size: cover;\n            }\n            .stopHint {\n                width: getRem(45);\n                height: getRem(45);\n                background-color: white;\n                border-radius: 10%;\n            }\n            &.active {\n                background-color: #0aca0a;\n                border: 1px solid white;\n            }\n        }\n        &.undo {\n            background-color: #a4af00;\n            .undoHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/undo.svg') center center;\n                background-size: cover;\n            }\n            &:active {\n                background-color: #e3f300;\n                // border: 1px solid white;\n            }\n        }\n        &.bounce {\n            background-color: black;\n            .bounceHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/bounce.svg') center center;\n                background-size: cover;\n            }\n            &.active {\n                background-color: green;\n                border: 1px solid white;\n            }\n        }\n    }\n}\n\n.progressBar {\n    position: fixed;\n    width: getRem(750);\n}\n\n/* piano keyboard layout css  */\n\n.white {\n    width: getRem(400);\n    height: getRem(100);\n    z-index: 1;\n    border-left: 1px solid #bbb;\n    border-bottom: 1px solid #bbb;\n    border-radius: 0 0 5px 5px;\n    box-shadow: -1px 0 0 rgba(255, 255, 255, 0.8) inset, 0 0 5px #ccc inset, 0 0 3px rgba(0, 0, 0, 0.2);\n    background: linear-gradient(top, #eee 0%, #fff 100%);\n    &.active-note {\n        box-shadow: 2px 0 3px rgba(0, 0, 0, 0.1) inset, -5px 5px 20px rgba(0, 0, 0, 0.2) inset, 0 0 3px rgba(0, 0, 0, 0.2);\n        background: linear-gradient(top, #fff 0%, #e9e9e9 100%);\n    }\n}\n\n.black {\n    position: relative;\n    width: getRem(200);\n    height: getRem(50);\n    margin-top: getRem(-25);\n    top: getRem(25);\n    z-index: 2;\n    border: 1px solid #000;\n    border-radius: 0 0 3px 3px;\n    box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -5px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 2px 4px rgba(0, 0, 0, 0.5);\n    background: linear-gradient(45deg, #222 0%, #555 100%);\n    &.active-note {\n        box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -2px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 1px 2px rgba(0, 0, 0, 0.5);\n        background: linear-gradient(left, #444 0%, #222 100%);\n    }\n}\n\n.a,\n.c,\n.d,\n.f,\n.g {\n    margin-bottom: getRem(-25);\n}\n\n/* mask layout */\n\n.mask {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 100;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.mask #timer {\n    color: white;\n    font-size: xx-large;\n    font-style: italic;\n}\n\n.fadein {\n    animation: fadein 1s;\n    animation-fill-mode: forwards;\n}\n\n.fadeout {\n    animation: fadeout 1s;\n    animation-fill-mode: forwards;\n}\n@keyframes fadein {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n@keyframes fadeout {\n    from {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.hide {\n    display: none;\n}\n\n.rotate {\n    transform: rotate(90deg);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MBAuthor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{class:['mask', _vm.timerToStartRecord>1?'fadein':'fadeout', _vm.timerToStartRecord==0?'hide':'']},[_c('p',{staticClass:\"rotate\",attrs:{\"id\":\"timer\"}},[_vm._v(_vm._s(_vm.timerToStartRecord))])]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"keys\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"controller\"},[_c('div',{staticClass:\"funcBtn record\",class:_vm.recording?'active':'',on:{\"click\":_vm.toggleRecord}},[_c('div',{staticClass:\"recordHint\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn play\",class:_vm.replaying?'active':'',on:{\"click\":_vm.toggleReplay}},[_c('div',{class:['rotate',_vm.replaying?'playHint':'stopHint']})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn undo\",on:{\"click\":_vm.undoRecord}},[_c('div',{staticClass:\"undoHint rotate\"})]),_vm._v(\" \"),_c('div',{staticClass:\"funcBtn bounce\",on:{\"click\":_vm.bounceProject}},[_c('div',{staticClass:\"bounceHint rotate\"})])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-94d961f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBAuthor.vue\n// module id = null\n// module chunks = ","import axios from 'axios';\nimport wx from 'weixin-js-sdk';\n\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\nexport const prepareShareConfig = () => new Promise((resolve, reject) => {\n  axios.post(`//api.musixise.com/wechat/getTicket?url=${encodeURIComponent(window.location.href.split('#')[0])}`, '', reqConfig)\n  .then((res) => {\n    // alert(`before # url: ${window.location.href.split('#')[0]}`);\n    // alert(`full path: ${window.location.href}`);\n    // alert(JSON.stringify(res.data.data));\n    wx.config({\n      debug: true,\n      appId: res.data.data.appId,\n      timestamp: res.data.data.timestamp,\n      nonceStr: res.data.data.nonceStr,\n      signature: res.data.data.signature,\n      jsApiList: [\n        'onMenuShareTimeline',\n        'onMenuShareAppMessage',\n      ],\n    });\n    wx.ready(() => { // wx.config\n      resolve(wx);\n    });\n  }, () => {\n    reject('wx.config');\n  });\n});\n\n  // \nexport const prepareShareContent = ({\n    title,\n    desc,\n    fullPath,\n    imgUrl,\n  }) => {\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  const link = fullPath;\n  wx.onMenuShareTimeline({\n    title,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n  wx.onMenuShareAppMessage({\n    title,\n    desc,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n};\n\n// \n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // \n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/wx_share.js","<script>\nconst Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport * as WxShare from '../_common/js/wx_share'\nimport 'swiper/dist/css/swiper.css'\nimport vueSlider from 'vue-slider-component'\nimport {\n  swiper,\n  swiperSlide\n} from 'vue-awesome-swiper'\nconst touchIdKeyMap = {} //touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nconst MINI_KEY_LENGTH = 200 // px\nlet extendBtnsTimeout\n\nvar piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': '/static/audio/'\n}).toMaster()\n\n// var mbox = new Tone.Sampler({\n//   'C4': 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   'A4': 'A4.[mp3|ogg]',\n//   'C5': 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   'A5': 'A5.[mp3|ogg]',\n//   'C6': 'C6.[mp3|ogg]',\n// }, {\n//   'release': 1,\n//   'baseUrl': 'static/audio/'\n// }).toMaster()\n\nvar plucky = new Tone.PluckSynth().toMaster()\n\nconst SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width\nconst SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nwindow.tonepart = [] // store all the music parts. (ummm,that's why it's named part...)\nlet bouncepart = []\n\nlet recordStartTime = 0\n\nlet isLinger = true //\nvar replayInterval = undefined //progressbarsetinterval\nlet playOffset = 0 //bar\nlet lingerOffset = 0 //bar\nconst PROGRESS_INTERVAL_TIME = 0.1 //0.1\nexport default {\n  components: {\n    swiper,\n    swiperSlide,\n    vueSlider,\n  },\n  data() {\n    return {\n      activeNote: {},\n      recordPart: [], //current record part\n      recordParts: [], //each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: 0,\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block',\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)'\n        },\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)',\n          // transform: 'rotate(90deg)',\n        },\n        formatter(value) {\n          if (value) {\n            return `${(value/10).toFixed(1)}s/20s`\n          } else {\n            return `0.0s/20s`\n          }\n        },\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)'\n        }\n      },\n    }\n  },\n  watch: {\n    playing: function(val) {\n      console.log('playing status', val)\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(() => {\n\n          this.vuetimeline += 1\n          if (this.vuetimeline >= 200) {\n            this.toggleReplay()\n            this.vuetimeline = 0\n\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000)\n\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval)\n      }\n    },\n  },\n  computed: {\n    swiper() {\n      return this.$refs.pianoRoll.swiper\n    },\n    activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1\n    },\n    lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1\n    }\n  },\n  methods: {\n    load() {},\n    toggleReplay() {\n      console.log(1)\n      this.playing = !this.playing\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100\n        console.log('')\n        this.confirmRecordPart(0)\n        console.log('kokokoko')\n        recordStartTime = performance.now();\n        console.log(`activeOffsetTime${this.vuetimeline*100}`)\n        Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000) // TODO:in case < context.currentTime\n      } else {\n        console.log('')\n        Tone.Transport.stop(0) // TODOstopstartstop..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart(noteId) {\n      let noteTime = 0\n      // console.log('down', e.target.id)\n      piano.triggerAttack(noteId)\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1)\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now()\n          lingerOffset = this.vuetimeline * 100\n          isLinger = false\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset\n      } else {\n        noteTime = performance.now() - playOffset\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000\n        this.recordPart.push({\n          'note': noteId,\n          'time': +(noteTime / 1000).toFixed(4)\n        })\n      } else {\n        this.vuetimeline = 20 * 10 // 0.1s => 200\n        console.log('cannot record more than 20 seconds')\n      }\n    },\n    handleNoteEnd(noteId) {\n      piano.triggerRelease(noteId)\n      this.$set(this.activeNote, noteId, 0)\n    },\n    touchNoteStartHandler(e) {\n      console.log(e)\n      //touchmove\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id // TODO:  touchstartchangetouches///\n      this.handleNoteStart(e.target.id)\n    },\n    touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id)\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]) // TODO:  touchendchangetouches,\n    },\n    confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex)\n        if (this.recordParts[this.lastActivePartIndex] && this.recordParts[this.lastActivePartIndex].length) {\n          //track,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex])\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          tonepart[this.lastActivePartIndex].dispose() //dispose\n        }\n        tonepart[this.lastActivePartIndex] = new Tone.Part(function(time, value) { //new\n          piano.triggerAttackRelease(value.note, \"8n\", time)\n        }, this.recordPart).start(0)\n        this.recordParts[this.lastActivePartIndex] = this.recordPart\n        this.recordPart = []\n        if (this.checkBouncibility()) {\n          alert('cool')\n        } else {\n          alert('not cool')\n        }\n      } else {\n        console.log('')\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0 // this is kind of separate for progress view\n        recordStartTime = 0\n      }\n      isLinger = true\n    },\n    clearRecordPart(trackNum) {\n      console.log(`cleaning track ${trackNum}`)\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = []\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, [])\n        tonepart[trackNum].dispose() //dispose\n        tonepart[trackNum] = undefined //\n      } else {\n        console.log(`track ${trackNum} has no content`)\n      }\n    },\n    checkBouncibility() {\n      this.confirmRecordPart(0)\n      bouncepart = []\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          item._events.forEach(noteInfo => {\n            bouncepart.push(noteInfo.value)\n          })\n        })\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        return Magic.RealMagic(bouncepart)\n      }\n      return true;\n    },\n    bounceProject() {\n      this.confirmRecordPart(0)\n      console.log(this)\n      console.log(tonepart)\n      bouncepart = []\n      alert('0')\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          item._events.forEach(noteInfo => {\n            bouncepart.push(noteInfo.value)\n          })\n        })\n        alert('1')\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        alert('2')\n        //TODO, semi done\n        this.$store.dispatch('BOUNCE_PROJECT', {\n          record: bouncepart,\n          info: {\n            title: 'default',\n            content: 'default',\n            cover: 'default'\n          },\n        }).then(id => {\n          console.log('successfully bounced')\n          alert('')\n          this.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id\n            }\n          })\n        }).catch((err) => {\n          alert('failed to upload')\n        })\n        // while (tonepart.length) {\n        //   tonepart.pop().dispose() //dispose\n        // }\n        // tonepart[0] = new Tone.Part(function(time, value) {\n        //   piano.triggerAttackRelease(value.note, \"8n\", time)\n        // }, bouncepart).start(0)\n        // Magic.RealMagic(bouncepart)\n      } else {\n        alert('')\n      }\n    },\n    mapNoteTimeToColor(t) {\n      return Magic.mapNoteTimeToColor(t)\n    },\n    mapNoteMidiToLength(m) {\n      return Magic.mapNoteMidiToLength(m)\n    },\n    adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc')\n        this.toggleReplay() //ref this is TODO\n      } else {\n        isLinger = true //\n      }\n    },\n    onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY)\n    },\n    onMiniKeyboardStart(e) {\n      console.log(e)\n    },\n    keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e) //e.touches is array like object\n      for (let i = 0; i <= e.changedTouches.length - 1; i++) {\n        const a = document.elementFromPoint(e.changedTouches[i].clientX, e.changedTouches[i].clientY)\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (touchIdKeyMap[e.changedTouches[i].identifier] && touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')) { //touch\n            console.log(touchIdKeyMap)\n            this.handleNoteStart(a.getAttribute('id'))\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier])\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id')\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2)\n            this.handleNoteStart(a.getAttribute('id'))\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id')\n          } else {\n            console.log(3)\n            //\n          }\n        } else {\n          console.log('')\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier])\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined\n        }\n      }\n    },\n    btnStart(e) {\n      console.log(e)\n      extendBtnsTimeout = setTimeout(() => {\n        //show extend buttons\n        this.showExtendBtns = true;\n      }, 500)\n\n    },\n    btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout)\n      const a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)\n      console.log(a)\n      if (a && a.classList.contains('bounceBtn')) {\n        //\n        this.bounceProject()\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //\n        this.toggleReplay()\n      }\n      this.showExtendBtns = false;\n      //hide extend buttons\n    }\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    Tone.Transport.cancel()\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n    this.PARTNUM = 3\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd: function(e) {\n          console.log('3', this.activeIndex) // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex\n          self.confirmRecordPart(!isLinger)\n        }\n      }\n    }\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    // alert(Cookies.get('serviceToken'))\n    WxShare.prepareShareConfig().then(()=>{\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:'',\n        fullPath:`${location.origin}${location.pathname}#/new-music-box-maker`,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n              // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    // document.querySelector('#D5').addEventListener( \"pointerenter\", ()=>{\n    //   console.log('jinru')\n    // })\n\n  },\n  updated() {\n\n  }\n};\n</script>\n\n<template>\n<div id=\"container\">\n  <!-- <v-touch @pan=\"onPan\"> -->\n  <div class=\"keys\" @touchmove=\"keng\" @touchstart.stop.prevent=\"touchNoteStartHandler\" @touchend.stop.event=\"touchNoteEndHandler\">\n    <!-- using sharp sign => '#' as object key cause syntax error... -->\n    <!-- <div :class=\"['white', 'a', activeNote.A3?'active-note':'']\" id=\"A3\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb3?'active-note':'']\" id=\"Bb3\"></div>\n      <div :class=\"['white', 'b', activeNote.B3?'active-note':'']\" id=\"B3\"></div> -->\n    <div :class=\"['white', 'c', activeNote.C4?'active-note':'']\" id=\"C4\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db4?'active-note':'']\" id=\"Db4\"></div>\n    <div :class=\"['white', 'd', activeNote.D4?'active-note':'']\" id=\"D4\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb4?'active-note':'']\" id=\"Eb4\"></div>\n    <div :class=\"['white', 'e', activeNote.E4?'active-note':'']\" id=\"E4\"></div>\n    <div :class=\"['white', 'f', activeNote.F4?'active-note':'']\" id=\"F4\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb4?'active-note':'']\" id=\"Gb4\"></div>\n    <div :class=\"['white', 'g', activeNote.G4?'active-note':'']\" id=\"G4\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab4?'active-note':'']\" id=\"Ab4\"></div>\n    <div :class=\"['white', 'a', activeNote.A4?'active-note':'']\" id=\"A4\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb4?'active-note':'']\" id=\"Bb4\"></div>\n    <div :class=\"['white', 'b', activeNote.B4?'active-note':'']\" id=\"B4\"></div>\n    <div :class=\"['white', 'c', activeNote.C5?'active-note':'']\" id=\"C5\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db5?'active-note':'']\" id=\"Db5\"></div>\n    <div :class=\"['white', 'd', activeNote.D5?'active-note':'']\" id=\"D5\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb5?'active-note':'']\" id=\"Eb5\"></div>\n    <div :class=\"['white', 'e', activeNote.E5?'active-note':'']\" id=\"E5\"></div>\n    <div :class=\"['white', 'f', activeNote.F5?'active-note':'']\" id=\"F5\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb5?'active-note':'']\" id=\"Gb5\"></div>\n    <div :class=\"['white', 'g', activeNote.G5?'active-note':'']\" id=\"G5\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab5?'active-note':'']\" id=\"Ab5\"></div>\n    <div :class=\"['white', 'a', activeNote.A5?'active-note':'']\" id=\"A5\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb5?'active-note':'']\" id=\"Bb5\"></div>\n    <div :class=\"['white', 'b', activeNote.B5?'active-note':'']\" id=\"B5\"></div>\n    <div :class=\"['white', 'c', activeNote.C6?'active-note':'']\" id=\"C6\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db6?'active-note':'']\" id=\"Db6\"></div>\n    <div :class=\"['white', 'd', activeNote.D6?'active-note':'']\" id=\"D6\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb6?'active-note':'']\" id=\"Eb6\"></div>\n    <div :class=\"['white', 'e', activeNote.E6?'active-note':'']\" id=\"E6\"></div>\n    <div :class=\"['white', 'f', activeNote.F6?'active-note':'']\" id=\"F6\"></div>\n  </div>\n  <div class=\"keyshadow\"></div>\n  <div class=\"scroll-container\"></div>\n  <div class=\"semi-piano-roll\" @touchmove.stop.prevent>\n    <swiper :options=\"pianoRollSwiperOption\" ref=\"pianoRoll\">\n      <!-- slides -->\n      <swiper-slide v-for=\"n in PARTNUM\">\n        <div class=\"current-piano-roll\">\n          <svg :style=\"{height:'90%',padding:timelineConfig.dotSize/2+'px 0'}\">\n\n            <defs>\n\n\n              \t<filter id=\"glowing\" height=\"400%\" width=\"130%\" x=\"-10%\" y=\"-130%\">\n              \t\t<!-- Thicken out the original shape -->\n              \t\t<feMorphology operator=\"dilate\" radius=\"1\" in=\"SourceAlpha\" result=\"thicken\" />\n\n              \t\t<!-- Use a gaussian blur to create the soft blurriness of the glow -->\n              \t\t<feGaussianBlur in=\"thicken\" stdDeviation=\"2\" result=\"blurred\" />\n\n              \t\t<!-- Change the colour -->\n              \t\t<feFlood flood-color=\"rgb(200,200,255)\" result=\"glowColor\" />\n\n              \t\t<!-- Color in the glows -->\n              \t\t<feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"softGlow_colored\" />\n\n              \t\t<!--\tLayer the effects together -->\n              \t\t<feMerge>\n              \t\t\t<feMergeNode in=\"softGlow_colored\"/>\n              \t\t\t<feMergeNode in=\"SourceGraphic\"/>\n              \t\t</feMerge>\n\n              \t</filter>\n\n              <!-- <filter id=\"glowing\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\n                <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"0\" />\n                <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\"2\" />\n                <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\n              </filter> -->\n              <!-- <filter id=\"glowing\">\n                  <feGaussianBlur stdDeviation=\"1\" result=\"coloredBlur\"/>\n                  <feMerge>\n                      <feMergeNode in=\"coloredBlur\"/>\n                      <feMergeNode in=\"SourceGraphic\"/>\n                  </feMerge>\n              </filter> -->\n              <!-- <filter id=\"glowing\">\n                <feGaussianBlur id=\"blur\" in=\"SourceAlpha\" stdDeviation=\"1.5\"/>\n                <feColorMatrix id=\"recolor\"  type=\"matrix\" values=\"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0\" result=\"white-glow\"/>\n                <feMerge>\n                  <feMergeNode in=\"white-glow\"/>\n                  <feMergeNode in=\"SourceGraphic\"/>\n                </feMerge>\n              </filter> -->\n            </defs>\n            <rect v-if=\"activePartIndex===(PARTNUM-n)\" v-for=\"(item,index) in recordPart\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"mapNoteTimeToColor(item.time)\"\n              filter=\"url(#glowing)\" />\n            <rect v-for=\"(item,index) in recordParts[PARTNUM-n]\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"activePartIndex===(PARTNUM-n)?mapNoteTimeToColor(item.time):'rgb(120,120,120)'\"\n              :filter=\"activePartIndex===(PARTNUM-n)?'url(#glowing)':''\" />\n          </svg>\n          <div class=\"temp\" @click=\"clearRecordPart(PARTNUM-n)\"></div>\n        </div>\n      </swiper-slide>\n      <!-- need the bottom two empty slides to fill whole swiper -->\n      <swiper-slide></swiper-slide>\n      <swiper-slide></swiper-slide>\n    </swiper>\n  </div>\n\n  <div class=\"g-controller\">\n    <!-- <div class=\"timeline\">\n      <div class=\"progress\">\n\n      </div>\n      <div class=\"indicator\">\n\n      </div>\n    </div> -->\n    <vue-slider v-model=\"vuetimeline\" v-bind=\"timelineConfig\" @callback=\"adjustTimeline\" @drag-end=\"\"></vue-slider>\n    <div class=\"btnContainer\" @touchstart.stop.prevent=\"btnStart\" @touchend.stop.event=\"btnEnd\">\n      <div :class=\"[playing?'pauseBtn':'playBtn', 'rotate']\" @click=\"toggleReplay\">\n\n      </div>\n      <div :class=\"[showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']\">\n        <div class='bounceBtn rotate'>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- </v-touch> -->\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.g-controller {\n    position: fixed;\n    width: getRem(42);\n    height: 100%;\n    padding-top: getRem(44);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    right: 0.5rem;\n    .timeline {\n        height: 90%;\n        width: getRem(16);\n        background-color: rgb(110,113,158);\n        .progress {\n            height: 5%;\n            background-color: rgb(69,106,255);\n        }\n        .indicator {\n            position: relative;\n            width: getRem(42);\n            height: getRem(42);\n            border-radius: getRem(21);\n            border: 4px;\n            border-color: yellow;\n            background-color: #fff;\n            right: getRem(13);\n        }\n    }\n    .btnContainer {\n        position: relative;\n        width: getRem(84);\n        height: getRem(84);\n        margin-top: 0.3rem;\n        .playBtn {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            border-radius: getRem(42);\n            background: url('../assets/play.svg') center center no-repeat;\n            background-size: getRem(32);\n            background-color: rgb(69,106,255);\n        }\n        .pauseBtn {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            border-radius: getRem(42);\n            background: url('../assets/pause.svg') center center no-repeat;\n            background-size: getRem(32);\n            background-color: rgb(69,106,255);\n        }\n        .bounceBtn {\n            position: absolute;\n            width: getRem(84);\n            height: getRem(84);\n            border-radius: getRem(42);\n            background: url('../assets/check.svg') center center no-repeat;\n            background-size: getRem(32);\n        }\n        .extendBtns {\n            // this element is within rotate, everything is opposite\n            position: absolute;\n            height: getRem(84);\n            border-radius: getRem(42);\n\n            right: 0;\n            z-index: -1;\n            transition: width 2s;\n            background: linear-gradient(to right, rgb(255,61,61),rgb(0,189,255),rgb(69,106,255) 80%);\n        }\n        .extendBtnsShow {\n            width: getRem(300);\n        }\n        .extendBtnsHide {\n            width: getRem(84);\n        }\n    }\n}\n.scroll-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    background: url('../assets/pianolid.png') no-repeat;\n    background-size:getRem(46) 100%;\n    // background-color:black;\n    // transform: rotate(90deg);\n    width: getRem(46);\n    height: 100%;\n    left: getRem(380);\n}\n.keyshadow {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  // background: url('../assets/pianolid.png') no-repeat;\n  background: linear-gradient(to left, rgba(28,28,28,.92) 0%, rgba(48,48,48,.65) 10%,rgba(118,118,118,.1) 40%,rgba(0,0,0,0) 100%);\n  pointer-events: none;\n  // transform: rotate(90deg);\n  width: getRem(388);\n  height: 100%;\n  width: getRem(388);\n  left: 0;\n}\n.temp {\n    width: 0.7rem;\n    height: 0.7rem;\n    border-radius: 0.35rem;\n    margin: 0.5rem 0 0;\n    background: url('../assets/delete.svg') center center no-repeat;\n    background-size: getRem(32);\n    background-color: #8e7aef;\n}\n\n#container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: white;\n}\nh2 {\n    font-size: 20px;\n    color: #2c3e50;\n}\n\n* {\n    user-select: none;\n    margin: 0;\n    padding: 0;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n\n.keys {\n    // position: absolute;  //make whole keys appear\n    //  adjust white and black heights influence all key layout\n    height: 100%;\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    float: left;\n    /* padding-right:getRem(347); */\n    box-sizing: border-box;\n}\n.semi-piano-roll {\n    top: 0;\n    width: getRem(328);\n    position: fixed;\n    right: 0;\n    height: 100%;\n    background-color: rgb(19,19,21);\n    .swiper-container {\n        height: 100%;\n    }\n    .current-piano-roll {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        padding-top: getRem(44);\n        padding-left: getRem(18);\n        svg {\n            bottom: getRem(92);\n            height: 100%;\n            width: 100%;\n        }\n    }\n}\n\n.general-controller {\n    display: flex;\n    width: 2.5rem;\n    position: fixed;\n    right: 0;\n    height: 100%;\n    background: linear-gradient(90deg, rgba(40,40,40,.5) 0%, rgba(40,40,40,.8) 100%);\n    .funcBtn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: getRem(100);\n        height: getRem(220);\n        border-radius: getRem(10);\n        box-sizing: border-box;\n        &.record {\n            background-color: #b70411;\n            .recordHint {\n                width: getRem(50);\n                height: getRem(50);\n                background-color: white;\n                border-radius: 50%;\n            }\n            &.active {\n                background-color: red;\n                border: 1px solid white;\n            }\n        }\n        &.play {\n            background-color: #098244;\n            .playHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/play.svg') center center;\n                background-size: cover;\n            }\n            .stopHint {\n                width: getRem(45);\n                height: getRem(45);\n                background-color: white;\n                border-radius: 10%;\n            }\n            &.active {\n                background-color: #0aca0a;\n                border: 1px solid white;\n            }\n        }\n        &.undo {\n            background-color: #a4af00;\n            .undoHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/undo.svg') center center;\n                background-size: cover;\n            }\n            &:active {\n                background-color: #e3f300;\n                // border: 1px solid white;\n            }\n        }\n        &.bounce {\n            background-color: black;\n            .bounceHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/bounce.svg') center center;\n                background-size: cover;\n            }\n            &.active {\n                background-color: green;\n                border: 1px solid white;\n            }\n        }\n    }\n}\n.general-controller-enter-active,\n.general-controller-leave-active {\n    transition: all 0.5s ease;\n}\n.general-controller-enter,\n.general-controller-leave-to {\n    transform: translateX(3.5rem);\n}\n\n.progressBar {\n    position: fixed;\n    width: getRem(750);\n}\n\n/* piano keyboard layout css  */\n\n.white {\n    width: getRem(388);\n    height: 5.56%;\n    z-index: 1;\n    // border-left: 1px solid #bbb;\n    // border-bottom: 1px solid #bbb;\n    // border-radius: 0 0 5px 5px;\n    // box-shadow: 1px 0 0 rgba(80, 80, 80, 0.8) inset, 0 0 5px #ccc inset, 0 0 3px rgba(0, 0, 0, 0.2);\n    box-shadow: 0 0 1px rgba(65, 65, 65, 0.5) inset, 0 0 2px rgba(211, 211, 211, 0.5) inset;\n    // background: linear-gradient(to left, rgba(28,28,28,.92) 0%, rgba(48,48,48,.65) 10%,rgba(118,118,118,.1) 40%,rgba(0,0,0,0) 100%);\n    background-color:white;\n    &.active-note {\n        box-shadow: 2px 0 3px rgba(0, 0, 0, 0.1) inset, -5px 5px 20px rgba(0, 0, 0, 0.2) inset, 0 0 3px rgba(0, 0, 0, 0.2);\n        // background: linear-gradient(to left, #555 0%, #ddd 40%, #eee 100%);\n        background:linear-gradient(to left, white,rgb(236,236,236));\n    }\n}\n\n.black {\n    position: relative;\n    width: getRem(200);\n    height: getRem(50);\n    margin-top: getRem(-50);\n    top: getRem(25);\n    // height: 4.3%; \n    // margin-top: -4.3%;\n    // top: 2.15%;\n    z-index: 2;\n    border: 2px solid #000;\n    border-radius: getRem(8) 0px 0px getRem(8);\n    // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -5px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 2px 4px rgba(0, 0, 0, 0.5);\n    // background: linear-gradient(45deg, #222 0%, #555 100%);\n    background:url('../assets/blackkey.png') center center no-repeat;\n    background-size:cover;\n    &.active-note {\n        // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -2px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 1px 2px rgba(0, 0, 0, 0.5);\n        // background: linear-gradient(to right, #444 0%, #222 100%);\n        background:url('../assets/blackkeydown.png') center center no-repeat;\n        background-size:cover;\n    }\n}\n\n/* mask layout */\n\n.mask {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 100;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.mask #timer {\n    color: white;\n    font-size: xx-large;\n    font-style: italic;\n}\n\n.fadein {\n    animation: fadein 1s;\n    animation-fill-mode: forwards;\n}\n\n.fadeout {\n    animation: fadeout 1s;\n    animation-fill-mode: forwards;\n}\n@keyframes fadein {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n@keyframes fadeout {\n    from {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.hide {\n    display: none;\n}\n\n.rotate {\n    transform: rotate(90deg);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"keys\",on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"keyshadow\"}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"})])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bbb339f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","<script>\nwindow.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nlet musicPart = undefined\n\nconst mbox = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  'baseUrl': 'static/audio/'\n}).toMaster()\n\nexport default {\n  components: {\n\n  },\n  data() {\n    return {\n      playing: false,\n    }\n  },\n  computed: {\n    project() {\n      return this.$store.state.recordProject\n    },\n    projectInfo() {\n      return this.$store.state.recordProjectInfo\n    },\n  },\n  methods: {\n    load() {},\n    prepareMusic() {\n      try {\n        musicPart.dispose()\n      } catch (e) {\n        //\n      }\n      musicPart = new Tone.Part(function(time, value) {\n        mbox.triggerAttackRelease(value.note, \"8n\", time)\n      }, this.project).start(0)\n    },\n    togglePlayMusic() {\n      if (this.project.length) {\n        Tone.Transport.start(\"+0.01\", 0)\n      }\n    },\n    loadMusicById() {\n      console.log('hehe', this.$store.state)\n      const {id} = this.$store.state.route.query\n      // if (!id||!this.project) {\n      //   console.log('')\n      //   return\n      // }\n      if(id){ //id\n        console.log('mmm',id)\n        this.$store.dispatch('FETCH_MBOX',{id}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.prepareMusic()\n          this.togglePlayMusic()\n        })\n      } else if (this.project.length) { //store\n        this.prepareMusic()\n      } else {\n        this.$store.dispatch('FETCH_MBOX',{id:50}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.prepareMusic()\n          this.togglePlayMusic()\n        })\n      }\n    },\n    togglePlay() {\n      this.playing = !this.playing\n      if (this.playing) {\n        // Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000)\n        Tone.Transport.start(\"+0.01\", 0)\n      } else {\n        Tone.Transport.stop(0) // TODOstopstartstop..\n      }\n    },\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    alert(1)\n    self.loadMusicById()\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          // self.loadMusicById()\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div id=\"container\">\n  <div class=\"mb\">\n    <div :class=\"[playing?'pauseBtn':'playBtn', 'rotate']\" @click=\"togglePlay\"></div>\n  </div>\n  <div class=\"operate\">\n    <div class=\"share\">\n\n    </div>\n    <div class=\"purchase\">\n\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MBViewer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"mb\"},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.togglePlay}})]),_vm._v(\" \"),_vm._m(0,false,false)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"operate\"},[_c('div',{staticClass:\"share\"}),_vm._v(\" \"),_c('div',{staticClass:\"purchase\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-07efc117\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBViewer.vue\n// module id = null\n// module chunks = ","<script>\n  export default {\n    // https://vuejs.org/v2/guide/components.html#Props\n    props: {\n      initCount:Number,\n      initActive:Boolean,\n      iconImg: String,\n      onClickCall: {\n        type: Function,\n        default() {\n          return function(){console.log('tap tap in count Button')};\n        },\n      },\n    },\n    computed: {\n      style() {\n        // return 'background-color: ' + this.hovering ? this.color: 'red';\n      }\n    },\n    data() {\n      return {\n        currentActiveCount:0,\n        currentActive:false,\n      };\n    },\n    watch: {\n    },\n    created() {\n      this.currentActive = this.initActive\n      this.currentActiveCount = this.currentActive?this.initCount:this.initCount+1\n    },\n    mounted() {\n    },\n    updated() {\n    },\n    methods: {\n      updateButton() {\n        // if (this.currentActive) {\n        //   this.currentActiveCount -= 1;\n        // } else {\n        //   this.currentActiveCount += 1;\n        // }\n        this.currentActive = !this.currentActive;\n        this.onClickCall()\n      }\n    },\n  };\n</script>\n\n<template>\n  <div class=\"btnContainer\" @click=\"updateButton\">\n    <transition name=\"fade\">\n      <div class=\"active-btn-background\" v-show=\"currentActive\"></div>\n    </transition>\n    <transition name=\"slideDown\">\n      <div class=\"btn active\" v-show=\"currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount}}</p>\n      </div>\n    </transition>\n    <transition name=\"slideUp\">\n      <div class=\"btn inactive\" v-show=\"!currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount-1}}</p>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../../_common/style/_functions.scss';\n@import '../../_common/style/_variables.scss';\n@import '../../_common/style/_mixins.scss';\n@import '../../_common/style/_reboot.scss';\n.btnContainer{\n  position: relative;width:getRem(92);height:getRem(92);border:1px solid #7D839E;border-radius:50%;overflow: hidden;\n  // -webkit-mask-image: -webkit-radial-gradient(circle, white, black);\n  .active-btn-background {position: absolute;width:100%;height:100%;background-color:#7D839E;border-radius:50%;border:none;overflow: hidden;}\n  .active {\n    // background-color:#7D839E;\n    position: absolute;width: 100%;height:100%;top: 0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:white;}\n  }\n  .inactive {\n    // background-color:blue;\n    position: absolute;width: 100%;height:100%;top:0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like-gray.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:#7D839E;}\n  }\n}\n//\n.slideDown-enter-active {\n  transition: all .3s ease-out;\n}\n.slideDown-leave-active {\n  transition: all .3s ease-out;\n}\n.slideDown-enter,.slideDown-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(100%);\n  opacity: 0;\n}\n.slideUp-enter-active {\n  transition: all .3s ease-out;\n}\n.slideUp-leave-active {\n  transition: all .3s ease-out;\n}\n.slideUp-enter,.slideUp-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(-100%);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/countButton.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd02150e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nlet musicPart = undefined\n\nexport default {\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading:true,\n      workIntroAppear:false,\n      controlPanalAppear:false,\n      titleUpdateAppear:false,\n      playing:false,\n      userId:0,\n      favStatus:false,\n      newWorkTitle:'',\n      finalNewWorkTitle:'',\n    }\n  },\n  computed: {\n    project() {\n      return this.$store.state.recordProject\n    },\n    projectInfo() {\n      return this.$store.state.recordProjectInfo\n    },\n  },\n  methods: {\n    load() {},\n    loadMusicById() {\n      console.log('hehe', this.$store.state)\n      const {id} = this.$store.state.route.query\n      if(id){ //id\n        console.log('mmm',id)\n        this.$store.dispatch('FETCH_MBOX',{id}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.favStatus = this.projectInfo.favStatus\n          // alert('load complete');\n          // this.togglePlay();\n        })\n      } else {\n        // \n        this.$store.dispatch('FETCH_MBOX',{id:50}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.favStatus = this.projectInfo.favStatus\n          // alert('load complete');\n          // this.togglePlay();\n        })\n      }\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project)\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId:this.$store.state.route.query.id,\n        status:this.favStatus,\n      })\n    },\n    updateWorkTitle() {\n      Api.updateWorkTitle({\n        workId:this.$store.state.route.query.id,\n        title:this.newWorkTitle,\n      })\n      this.finalNewWorkTitle = this.newWorkTitle\n      setTimeout(()=>{this.titleUpdateAppear=false},300);\n    },\n    redirectToMaker() {\n      this.$router.push({\n        path: '/new-music-box-maker',\n        // query: {\n        //   id\n        // }\n      })\n    },\n    purchaseItem() {\n      console.log(`you are about to purchase ${this.projectInfo.id}`)\n    }\n  },\n\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) {\n       self.loadMusicById()\n       return\n     }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${self.$store.state.route.query.id}`\n    WxShare.prepareShareConfig().then(()=>{\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:'',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          self.userId = res.data.data.userId\n          alert(`welcome${res.data.data.realname}`)\n          // if (!this.project) {\n            self.loadMusicById()\n          // }\n\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(()=>{this.loading = false},1500)\n    setTimeout(()=>{this.workIntroAppear = true;},4000)\n    setTimeout(()=>{this.controlPanalAppear = true},5000)\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div :class=\"['container', loading?'loading':'']\">\n  <div id=\"ground\"></div>\n  <div id=\"spirit\">\n    <div class=\"spirit-part\" id=\"spirit-body\"></div>\n    <div class=\"spirit-part\" id=\"spirit-front-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back1\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back2\"></div>\n  </div>\n  <div id=\"mb\" @click=\"togglePlay\">\n    <div :class=\"['mb-part', playing?'playing':'']\" id=\"mb-lid\"></div>\n    <div class=\"mb-part\" id=\"mb-body\">\n      <div id=\"play-btn\" v-show=\"!playing\"></div>\n      <div id=\"pause-btn\" v-show=\"playing\"></div>\n    </div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"music-aurora\" v-show=\"playing\"></div>\n  </transition>\n  <div id=\"low-leaf1\"></div>\n  <div id=\"low-leaf2\"></div>\n  <div id=\"low-leaf3\"></div>\n  <div id=\"low-leaf4\"></div>\n  <div id=\"mid-leaf1\"></div>\n  <div id=\"mid-leaf2\"></div>\n  <div id=\"mid-leaf3\"></div>\n  <div id=\"mid-leaf4\"></div>\n  <div id=\"top-leaf1\"></div>\n  <div id=\"top-leaf2\"></div>\n  <div id=\"top-leaf3\"></div>\n  <div id=\"top-leaf4\"></div>\n  <div id=\"top-leaf5\"></div>\n  <div id=\"top-leaf6\"></div>\n  <transition name=\"bounce\">\n    <div id=\"work-intro\" v-if=\"workIntroAppear\">\n      <div class=\"title\">{{finalNewWorkTitle||projectInfo.title}}</div>\n      <div class=\"subtitle\"><span>by</span> <span><img :src=\"projectInfo.owner.smallAvatar\" alt=\"\"></span><span>{{projectInfo.owner.nickName}}</span></div>\n      <div v-if=\"userId === projectInfo.userId\" id=\"edit-work\" @click=\"titleUpdateAppear=true\"></div>\n    </div>\n  </transition>\n  <transition name=\"bounce\">\n    <div id=\"control-panal\" v-if=\"controlPanalAppear\">\n      <!-- <div class=\"likeBtn\">\n        <div class=\"active\">\n          <div class=\"\"></div>\n          <p>1</p>\n        </div>\n        <div class=\"inactive\">\n          <div class=\"\"></div>\n          <p>0</p>\n        </div>\n      </div> -->\n      <count-button :initCount=\"projectInfo.collectNum?projectInfo.collectNum:0\" :initActive=\"projectInfo.favStatus?true:false\" iconImg=\"\" :onClickCall=\"toggleFav\" />\n      <div class=\"purchaseBtn\" @click=\"purchaseItem\"></div>\n      <div class=\"makeBtn\" @click=\"redirectToMaker\"></div>\n    </div>\n  </transition>\n  <transition name=\"fade\">\n    <div id=\"title-update-mask\" v-show=\"titleUpdateAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          \n        </div>\n        <div class=\"input\">\n          <input v-model=\"newWorkTitle\" type=\"text\" placeholder=\"\">\n          <div class=\"splitter\"></div>\n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"titleUpdateAppear=false\"></span>\n          <span class=\"btn confirm\" @click=\"updateWorkTitle\"></span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    flex-direction: column;\n    overflow:hidden;\n    #spirit {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:5rem;width: 9.8rem; height: 7.8rem; margin-left: .2rem;\n      .spirit-part {position: absolute;}\n      #spirit-body {z-index:4;left:getRem(220);top:getRem(136);width: getRem(266);height:getRem(368);background: url('../assets/viewer/spirit-body.png') center center no-repeat;background-size:cover;}\n      #spirit-front-leaf {z-index:5;left:getRem(340);top:getRem(12);width: getRem(398);height:getRem(492);background: url('../assets/viewer/spirit-front-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back-leaf {z-index:3;width: getRem(462);height:getRem(472);background: url('../assets/viewer/spirit-back-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back1 {z-index:1;left:getRem(40);top:getRem(16);opacity:.6;width: getRem(618);height:getRem(526);background: url('../assets/viewer/spirit-back1.png') center center no-repeat;background-size:cover;}\n      #spirit-back2 {z-index:2;transform:rotate(-14deg);opacity: .3;width: getRem(754);height:getRem(580);background: url('../assets/viewer/spirit-back2.png') center center no-repeat;background-size:cover;}\n    }\n    #mb {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:4.2rem;width: 1.4rem; height: 1.6rem; left: 2.4rem;\n      .mb-part {position: absolute;}\n      #mb-lid {z-index:2;left:getRem(0);top:getRem(0);transition: .5s ease-out;transform:rotate(54deg);width: getRem(48);height:getRem(64);background: url('../assets/viewer/mb-lid.png') center center no-repeat;background-size:cover;}\n      #mb-lid.playing {transform:rotate(0deg) translateX(-.3rem);}\n      #mb-body {\n        display:flex;align-items: center;justify-content: center;z-index:1;left:getRem(20);top:getRem(50);width: getRem(64);height:getRem(52);background: url('../assets/viewer/mb-body.png') center center no-repeat;background-size:cover;\n        #play-btn {position: relative;margin-top:.3rem;margin-left:.1rem;width: getRem(12);height:getRem(16);background: url('../assets/viewer/audio-play.png') center center no-repeat;background-size:cover;}\n        #pause-btn {position: relative;margin-top:.3rem;margin-left:.05rem;width: getRem(16);height:getRem(14);background: url('../assets/viewer/audio-pause.png') center center no-repeat;background-size:cover;}\n      }\n    }\n    #music-aurora {\n      position: absolute;\n      bottom: 4.2rem;\n      left:1.5rem;\n      width: getRem(577);\n      height: getRem(577);\n      background: url('../assets/viewer/music_sprite.png'); // background:url('http://c.m.163.com/nc/qa/activity/xijing/img/cover_tit_step2.png');\n      background-size: getRem(577) getRem(4039);\n      animation: music-aurora steps(7) 1.5s infinite;\n      pointer-events: none;\n    }\n    #ground {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      position: absolute;left:-3rem;bottom:-2.3rem;opacity: .4;width: getRem(1522);height:getRem(852);background: url('../assets/viewer/ground.png') center center no-repeat;background-size:cover;\n    }\n    #low-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(168);opacity: .38;left:getRem(-160);bottom:6.5rem;background: url('../assets/viewer/low-leaf1.png') center center no-repeat;background-size:cover;}\n    #low-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(250);height: getRem(300);left:getRem(-106);bottom:2rem;background: url('../assets/viewer/low-leaf2.png') center center no-repeat;background-size:cover;}\n    #low-leaf3 {z-index:-1;will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(365);left:4rem;bottom:8.5rem;background: url('../assets/viewer/low-leaf3.png') center center no-repeat;background-size:cover;}\n    #low-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(310);height: getRem(336);transform:rotate(-23deg);right:-3.5rem;bottom:getRem(400);background: url('../assets/viewer/low-leaf4.png') center center no-repeat;background-size:cover;}\n    #mid-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(557);height: getRem(419);transform:rotate(-10deg);left:-3rem;bottom:getRem(940);background: url('../assets/viewer/mid-leaf1.png') center center no-repeat;background-size:cover;}\n    #mid-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(359);height: getRem(415);transform:rotate(-21deg);left:-2.8rem;bottom:getRem(840);background: url('../assets/viewer/mid-leaf2.png') center center no-repeat;background-size:cover;}\n    #mid-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(583);height: getRem(546);right:-4.2rem;transform:rotate(33deg);bottom:getRem(820);background: url('../assets/viewer/mid-leaf3.png') center center no-repeat;background-size:cover;}\n    #mid-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(384);height: getRem(537);right:-2.6rem;transform:rotate(25deg);bottom:getRem(740);background: url('../assets/viewer/mid-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1226);height: getRem(1232);transform:rotate(56deg) scale(1);right: -10rem;bottom:getRem(1700);background: url('../assets/viewer/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1430);height: getRem(874);opacity: .9;transform:rotate(-6deg) scale(.7);right: -10rem;bottom:getRem(1200);background: url('../assets/viewer/top-leaf2.png') center center no-repeat;background-size:cover;}\n    #top-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1250);height: getRem(986);transform:rotate(-2deg) scale(.7);left:-7rem;bottom:getRem(1870);background: url('../assets/viewer/top-leaf3.png') center center no-repeat;background-size:cover;}\n    #top-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(918);height: getRem(752);transform:rotate(44deg) scale(.8);left:-9.5rem;bottom:getRem(1270);background: url('../assets/viewer/top-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf5 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1048);height: getRem(1054);opacity: .3;transform:rotate(22deg) scale(.9);right:-12rem;bottom:getRem(1500);background: url('../assets/viewer/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf6 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(718);height: getRem(566);opacity: .5;transform:rotate(-1deg) scale(1.2);left:-6rem;bottom:getRem(1700);background: url('../assets/viewer/top-leaf5.png') center center no-repeat;background-size:cover;}\n    #work-intro {\n      position: absolute;bottom:3.4rem;text-align: right;right:1rem;\n      .title{font-size:.6rem;margin-bottom:.3rem;color:#7d839e;}\n      .subtitle {\n        display:flex;\n        height:getRem(60);\n        font-size:.4rem;\n        align-items:center;\n        color:#7d839e;\n        img {width: getRem(60);height:getRem(60);border-radius: 50%;border:none;margin:0 .3rem 0 .3rem;}\n      }\n      #edit-work {\n        position: absolute;width: getRem(28);height: getRem(28);right: getRem(-34);top:getRem(18);background: url('../assets/viewer/edit.svg') center center no-repeat;background-size:cover;\n      }\n    }\n    #control-panal {\n      position: absolute; width: 100%; bottom:0rem; display: flex;height:2.4rem;padding: 0 getRem(50);justify-content: space-between;align-items: center;\n      .purchaseBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n      .makeBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n    }\n    #playBtn {\n      width: 2rem;\n      height: 2rem;\n      background-color:pink;\n    }\n}\n.loading {\n  #spirit {\n    transition: none;\n    transform:translateY(13rem) scale(.85);\n  }\n  #mb {\n    transition: none;\n    transform:translateY(13rem);\n  }\n  #ground {\n    transition: none;transform:translateY(13rem);\n  }\n  #low-leaf1 {transition: none;transform:translateY(13rem);opacity:1}\n  #low-leaf2 {transition: none;transform:translateY(13rem) translateX(2rem);}\n  #low-leaf3 {transition: none;transform:translateY(13rem);}\n  #low-leaf4 {transition: none;transform:translateY(13rem) rotate(0deg);}\n  #mid-leaf1 {transition: none;transform:translateY(12rem) rotate(9deg) scale(0.9);opacity:.9;}\n  #mid-leaf2 {transition: none;transform:translateY(14rem) translateX(1.8rem) rotate(-8deg) scale(0.9);opacity:.8;}\n  #mid-leaf3 {transition: none;transform:translateY(14rem) rotate(8deg) scale(0.9);opacity:.8;}\n  #mid-leaf4 {transition: none;transform:translateY(14rem) rotate(0deg) scale(0.9);opacity:.8;}\n  #top-leaf1 {transition: none;transform:translateY(16.5rem) rotate(35deg) scale(0.7);opacity:1;}\n  #top-leaf2 {transition: none;transform:translateY(14.5rem) translateX(-1rem) rotate(-20deg) scale(0.6);opacity:.9;}\n  #top-leaf3 {transition: none;transform:translateY(15rem) translateX(1rem) rotate(13deg) scale(0.6);opacity:.95;}\n  #top-leaf4 {transition: none;transform:translateY(13rem) translateX(4.5rem) rotate(52deg) scale(0.7);opacity:1;}\n  #top-leaf5 {transition: none;transform:translateY(18rem) translateX(-5rem) rotate(12deg) scale(0.7);opacity:.3;}\n  #top-leaf6 {transition: none;transform:translateY(14.5rem) translateX(2.5rem) rotate(39deg) scale(1);opacity:.5;}\n}\n.bounce-enter-active {\n  transition: all 2s cubic-bezier(.19,2,.32,.91);;\n}\n.bounce-leave-active {\n  transition: all .8s cubic-bezier(.19,1.58,.42,.91);\n}\n.bounce-enter, .bounce-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(3rem);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n@keyframes music-aurora {\n  0% {\n    background-position: 0 0;\n  }\n  // 50% {\n  //   background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  //   // background-position: 0 getRem(-1590); // background-position: 0 -97.7%\n  // }\n  100% {\n    background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  }\n}\n#title-update-mask {\n  position: absolute;width:100%;height:100%;background-color:rgba(0,0,0,.3);display: flex;align-items: center;justify-content: center;\n  .mb-dialog {\n    position: relative;width: getRem(570);padding-top:getRem(75); border-radius:getRem(50);height:getRem(344);background-color:rgba(255,255,255,.96);display:flex;flex-direction:column;\n    .title {flex:1;padding:0 getRem(77); display:flex;align-items:flex-end;position: relative;width:100%;font-size:.32rem;}\n    .input {\n      flex:2;flex-direction: column;padding:0 getRem(77);display:flex;align-items:flex-start;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      input {background: transparent;border: none;outline: none;width: 100%; height:1rem;font-size:.54rem;}\n      .splitter {position:relative;width:100%;height:1px;background-color:gray;padding:0 getRem(77);}\n    }\n    .btns {\n      flex:4;display:flex;align-items:center;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      span.btn {\n        position: relative;width:100%;height:100%;flex:1;display:flex;align-items:center;padding-top:.6rem;\n      }\n      .cancel {color:gray;text-align: right;justify-content: flex-start;padding-left:getRem(77);}\n      .confirm { color:blue;text-align: left;justify-content: flex-end;padding-right:getRem(77);}\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBViewer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7da9305a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\nimport HelloWorld from '@/components/HelloWorld';\nimport MBMaker from '@/components/MBMaker';\n\nimport MBAuthor from '@/components/MBAuthor';\nimport NMBMaker from '@/components/NMBMaker';\nimport MBViewer from '@/components/MBViewer';\nimport NMBViewer from '@/components/NMBViewer';\n\nVue.use(Router);\n\nexport default new Router({\n  // mode: 'history', // avoid hash in url\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld,\n    },\n    // {\n    //   path: '/music-box-maker',\n    //   name: 'MBMaker',\n    //   component: MBMaker,\n    // },\n    {\n      path: '/new-music-box-maker',\n      name: 'NMBMaker',\n      component: NMBMaker,\n    },\n    {\n      path: '/new-music-box-viewer',\n      name: 'NMBViewer',\n      component: NMBViewer,\n    },\n    // {\n    //   path: '/music-box-viewer',\n    //   name: 'MBViewer',\n    //   component: MBViewer,\n    // },\n    // {\n    //   path: '/music-box-author',\n    //   name: 'MBAuthor',\n    //   component: MBAuthor,\n    // },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport { sync } from 'vuex-router-sync';\nimport VueTouch from 'vue-touch';\n// import Toasted from 'vue-toasted';\nimport { createStore } from './store';\nimport App from './App';\nimport router from './router';\n\nVue.use(VueTouch, { name: 'v-touch' });\n// Vue.use(Toasted);\nVue.config.productionTip = false;\nconst store = createStore();\nsync(store, router);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}