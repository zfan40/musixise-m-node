{"version":3,"sources":["webpack:///static/js/app.3023e4ac0874f5881ad9.js","webpack:///./src/_common/js/api.js","webpack:///./src/App.vue","webpack:///./src/_common/js/util.js","webpack:///./src/components/HelloWorld.vue","webpack:///./src/_common/js/magic.js","webpack:///./src/components/NMBMaker.vue","webpack:///./src/components/common/countButton.vue","webpack:///./src/components/NMBViewer.vue","webpack:///./src/components/MBRollMaker.vue","webpack:///./src/components/MusixiserDetail.vue","webpack:///./src/components/MyFav.vue","webpack:///./src/components/Recommend.vue","webpack:///./src/store/actions.js","webpack:///./src/store/mutations.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?0b48","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?4349","webpack:///./src/_common/js/wx_share.js","webpack:///src/components/NMBMaker.vue","webpack:///./src/components/NMBMaker.vue?48d8","webpack:///src/components/common/countButton.vue","webpack:///./src/components/common/countButton.vue?8446","webpack:///src/components/NMBViewer.vue","webpack:///./src/components/NMBViewer.vue?305d","webpack:///src/components/MBRollMaker.vue","webpack:///./src/components/MBRollMaker.vue?d9a5","webpack:///src/components/MusixiserDetail.vue","webpack:///./src/components/MusixiserDetail.vue?6437","webpack:///src/components/MyFav.vue","webpack:///./src/components/MyFav.vue?77a0","webpack:///src/components/Recommend.vue","webpack:///./src/components/Recommend.vue?9cf3","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/assets/oops.png"],"names":["webpackJsonp","/HIm","module","exports","8GxT","NHnr","__webpack_exports__","__webpack_require__","getUserInfo","wxcode","tokenInCookie","js_cookie","reqConfig","headers","Authorization","axios","get","promise_default","a","resolve","reject","post","then","res","data","errcode","serviceToken","id_token","expires","catch","err","uploadRecord","record","info","_this","this","formReqConfig","Content-Type","processData","blob","Blob","stringify_default","reader","FileReader","onload","_ref","asyncToGenerator_default","regenerator_default","mark","_callee","event","fd","postFix","workURL","param","wrap","_context","prev","next","FormData","append","target","result","sent","t0","console","log","extends_default","url","abrupt","stop","_x","apply","arguments","readAsDataURL","fetchMbox","id","fetchMusixiser","fetchWorksFromMusixiser","page","fetchFavWorks","toggleFavSong","_ref2","workId","status","api_updateWorkTitle","_ref3","title","put","getRecommendations","injectStyle","ssrContext","getUrlParam","key","reg","RegExp","match","location","search","HelloWorld_injectStyle","RealMagic","items","tasksObj","forEach","item","itemNoteFreq","parseInt","magic_Tone","Frequency","note","toFrequency","push","time","taskTypes","keys_default","taskTimeArrays","values_default","machines","groups","length","timeArray","final","j","test","allPreviousOccupied","successFound","counter","SAME_NOTE_INTERVAL","indexOf","concat","toConsumableArray_default","set_default","Math","max","group","index","count","lastMachine","magic_mapNoteTimeToColor","COLOR1","COLOR2","COLOR3","rgb","floor","magic_mapNoteMidiToLength","noteName","toMidi","clearTone","parts","part","dispose","e","musicPreview","preview","start","Transport","state","oncePlayed","mbox","triggerAttack","Part","value","triggerAttackRelease","loop","loopEnd","NMBMaker_injectStyle","countButton_injectStyle","NMBViewer_injectStyle","MBRollMaker_injectStyle","MusixiserDetail_injectStyle","MyFav_injectStyle","Recommend_injectStyle","Object","defineProperty","vue_esm","vuex_router_sync","lib","lib_default","n","vuex_esm","promise","regenerator","helpers_extends","asyncToGenerator","stringify","interceptors","response","use","alert","resmsg","Accept","actions","BOUNCE_PROJECT","commit","FETCH_MBOX","_ref4","project","userId","musixiser","userVO","request","XMLHttpRequest","open","send","onreadystatechange","readyState","getResponseHeader","JSON","parse","responseText","FETCH_MUSIXISER","_ref5","_ref6","musixiserInfo","FETCH_WORKS_FROM_MUSIXISER","_ref7","_ref8","works","musixiserWorksObj","FETCH_FAV_WORKS","_ref9","_ref10","favWorksObj","mutations","SET_USER_INFO","type","activeType","SET_WORK_INFO","ids","lists","SET_MUSIXISER_INFO","set","SET_BOUNCE_PROJECT","recordProject","SET_ID_PROJECT","recordProjectInfo","SET_MUSIXISER","PUSH_MUSIXISER_WORKS","current","content","list","total","size","PUSH_FAV_WORKS","getters","activeIds","itemsPerPage","Number","route","params","end","slice","activeItems","map","filter","_","App","name","transitionName","beforeRouteUpdate","to","from","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","esExports","selectortype_template_index_0_src_App","normalizeComponent","__vue_styles__","Component","src_App","vue_router_esm","HelloWorld","msg","methods","redirectTo","path","$router","created","docElem","document","documentElement","window","rem","getBoundingClientRect","width","style","fontSize","navigator","userAgent","toLowerCase","replace","realname","HelloWorld_render","staticClass","_v","on","touchstart","$event","HelloWorld_staticRenderFns","HelloWorld_esExports","components_HelloWorld","HelloWorld_normalizeComponent","HelloWorld___vue_styles__","HelloWorld_Component","src_components_HelloWorld","toConsumableArray","values","keys","cancel","Sampler","B3","E4","G4","B4","C#5","E5","G5","B5","C#6","release","baseUrl","toMaster","node_modules_axios","axios_default","weixin_js_sdk","weixin_js_sdk_default","wx_share_reqConfig","wx_share_prepareShareConfig","encodeURIComponent","href","split","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","wx_share_prepareShareContent","desc","fullPath","imgUrl","link","onMenuShareTimeline","success","onMenuShareAppMessage","dist","dist_default","vue_awesome_swiper","NMBMaker_Tone","touchIdKeyMap","extendBtnsTimeout","piano","C4","D#4","F#4","A4","C5","D#5","F#5","A5","C6","tonepart","clientHeight","innerHeight","bouncepart","recordStartTime","isLinger","replayInterval","undefined","playOffset","lingerOffset","tutorOnceEnter","tutorTimeout","NMBMaker","components","swiper","swiperSlide","vueSlider","portraitMode","activeNote","recordPart","recordParts","playing","generalControllerShow","activeSwiperIndex","lastActiveSwiperIndex","vuetimeline","showExtendBtns","alertAppear","bouncing","tutorSession","handClass","tutorClass","timelineConfig","height","padding","dotSize","eventType","min","interval","disabled","show","tooltip","piecewise","reverse","display","class","direction","speed","bgStyle","backgroundColor","boxShadow","tooltipDir","tooltipStyle","borderColor","transform","transformOrigin","position","left","top","formatter","toFixed","processStyle","watch","val","setInterval","toggleReplay","PROGRESS_INTERVAL_TIME","clearInterval","computed","$refs","pianoRoll","activePartIndex","PARTNUM","lastActivePartIndex","load","performance","now","confirmRecordPart","handleNoteStart","noteId","noteTime","$set","handleNoteEnd","triggerRelease","touchNoteStartHandler","changedTouches","identifier","touchNoteEndHandler","shouldClearTime","clearRecordPart","trackNum","checkBouncibility","_events","noteInfo","sort","b","bounceProject","_this2","$store","dispatch","cover","$toast","query","mapNoteTimeToColor","t","mapNoteMidiToLength","m","adjustTimeline","onMiniKeyboardScroll","touches","clientY","onMiniKeyboardStart","keng","i","elementFromPoint","clientX","classList","contains","getAttribute","btnStart","_this3","setTimeout","btnEnd","clearTimeout","tutorStart","tutorProgress","_this4","clearTutorTimeout","slidePrev","slideNext","v","self","pianoRollSwiperOption","initialSlide","slidesPerView","transitionEnd","activeIndex","origin","pathname","beforeRouteLeave","mounted","updated","NMBMaker_render","touchmove","stopPropagation","preventDefault","touchend","_k","keyCode","Db4","D4","Eb4","F4","Gb4","Ab4","Bb4","Db5","D5","Eb5","F5","Gb5","Ab5","Bb5","Db6","D6","Eb6","E6","F6","ref","options","_l","x","y","operator","radius","in","stdDeviation","flood-color","in2","rx","ry","fill","_e","click","_b","callback","drag-end","model","$$v","expression","directives","rawName","NMBMaker_staticRenderFns","NMBMaker_esExports","components_NMBMaker","NMBMaker_normalizeComponent","NMBMaker___vue_styles__","NMBMaker_Component","src_components_NMBMaker","countButton","props","initCount","initActive","Boolean","iconImg","String","onClickCall","Function","default","currentActiveCount","currentActive","updateButton","countButton_render","_s","countButton_staticRenderFns","countButton_esExports","common_countButton","countButton_normalizeComponent","countButton___vue_styles__","countButton_Component","components_common_countButton","NMBViewer","loading","workIntroAppear","controlPanalAppear","titleUpdateAppear","favStatus","newWorkTitle","finalNewWorkTitle","projectInfo","loadMusicById","togglePlay","toggleFav","updateWorkTitle","redirectToMaker","redirectToMusixiser","purchaseItem","NMBViewer_render","_m","src","smallAvatar","alt","collectNum","placeholder","domProps","input","composing","NMBViewer_staticRenderFns","NMBViewer_esExports","components_NMBViewer","NMBViewer_normalizeComponent","NMBViewer___vue_styles__","NMBViewer_Component","src_components_NMBViewer","vue_konva_min","vue_konva_min_default","Tone","musicScale","colors","last_i","last_j","schedules","aInterval","synth","pulseOptions","oscillator","envelope","MBRollMaker","PolySynth","Synth","NOTE_CATEGORY","ONE_PAGE_NOTE_NUM","NOTE_NUM_PER_SECTOR","tempo","configKonva","configNoteRect","activeJ","sector","rectArray","setupCanvas","stroke","strokeWidth","FULL_NOTE_NUM","scheduleRepeat","setupRect","handleTouchRect","newRow","clear","handleMoveRect","newLastRow","startloop","stoploop","minusTempo","bpm","rampTo","addTempo","scrolldown","scrollup","toNote","submitProject","clearProject","MBRollMaker_render","staticStyle","font-size","line-height","MBRollMaker_staticRenderFns","MBRollMaker_esExports","components_MBRollMaker","MBRollMaker_normalizeComponent","MBRollMaker___vue_styles__","MBRollMaker_Component","src_components_MBRollMaker","vue_infinite_scroll","vue_infinite_scroll_default","MusixiserDetail","infiniteScroll","isMe","busy","loadMusixiserById","loadMore","redirectToWork","MusixiserDetail_render","infinite-scroll-disabled","infinite-scroll-distance","createdDate","MusixiserDetail_staticRenderFns","MusixiserDetail_esExports","components_MusixiserDetail","MusixiserDetail_normalizeComponent","MusixiserDetail___vue_styles__","MusixiserDetail_Component","src_components_MusixiserDetail","MyFav","MyFav_render","user","MyFav_staticRenderFns","MyFav_esExports","components_MyFav","MyFav_normalizeComponent","MyFav___vue_styles__","MyFav_Component","src_components_MyFav","Recommend","searching","recommendations","Recommend_render","owner","nickName","Recommend_staticRenderFns","Recommend_esExports","components_Recommend","Recommend_normalizeComponent","Recommend___vue_styles__","Recommend_Component","src_components_Recommend","router","routes","component","defaultType","duration","wordWrap","productionTip","store","Store","users","new","ask","job","myInfo","el","template","O/d9","QwWM","RLy1","SpEx","p","e195","h4Ia","v2ns","wWKr","wxSa","xJnU"],"mappings":"AAAAA,cAAc,IAERC,OACA,SAAUC,EAAQC,KAMlBC,OACA,SAAUF,EAAQC,KAMlBE,KACA,SAAUH,EAAQI,EAAqBC,GAE7C,YCEO,SAASC,GAAYC,GAC1B,GAAMC,GAAgBC,EAAA,IAAY,eAClC,OAAID,IAEFE,EAAUC,QAAQC,cAAlB,GAAqCJ,EAE9BK,EAAMC,IAAI,yCAA0CJ,MACjDF,IAAiBD,IAEpB,GAAAQ,GAAAC,EAAY,SAACC,EAASC,GAC3BL,EAAMM,KAAN,6DAAwEZ,EAAU,GAAIG,GACnFU,KAAK,SAACC,GACoB,QAArBA,EAAIC,KAAKC,SACXL,EAAO,MAET,IAAMM,GAAeH,EAAIC,KAAKA,KAAKG,QAMnC,OALAf,GAAUC,QAAQC,cAAlB,GAAqCY,EAErCf,EAAA,IAAY,eAAgBe,GAC1BE,QAAS,IAEJb,EAAMC,IAAI,yCAA0CJ,IAC1D,WACDQ,MAEDE,KAAK,SAACC,GACLJ,EAAQI,KAETM,MAAM,SAACC,GACNV,EAAOU,OAQV,QAASC,GAAaC,EAAQC,GAAM,GAAAC,GAAAC,IACzC,OAAO,IAAAlB,GAAAC,EAAY,SAACC,EAASC,GAC3B,GAAMgB,IAAkBvB,SAAWwB,eAAgB,sBAAuBC,aAAa,EAAOxB,cAAeF,EAAUC,QAAQC,gBACzHyB,EAAO,GAAIC,OAAMC,IAAeT,KAChCU,EAAS,GAAIC,WACnBD,GAAOE,OAAP,cAAAC,GAAAC,IAAAC,EAAA7B,EAAA8B,KAAgB,QAAAC,GAAOC,GAAP,GAAAC,GAAAC,EAAAC,EAAAC,CAAA,OAAAP,GAAA7B,EAAAqC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aACRP,GAAK,GAAIQ,UACfR,EAAGS,OAAO,QAAS,YACnBT,EAAGS,OAAO,OAAQV,EAAMW,OAAOC,QAE3BV,EAAU,GALAI,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAOI3C,EAAMM,KAAK,wCAAyC8B,EAAIf,EAP5D,QAOZgB,EAPYI,EAAAO,KAAAP,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAQ,GAAAR,EAAA,SASZS,QAAQC,IAARV,EAAAQ,IACA5C,OAVY,eAYRiC,GAZQ,GAYKD,EAAQ5B,KAAKA,KAC1B8B,EAbQa,OAeTlC,GACHmC,IAAKf,IAEPY,QAAQC,IAAIb,GAlBEG,EAAAa,OAAA,SAmBPtD,EAAMM,KAAK,wCAAyCoB,IAAea,GAAQ1C,GAC9EU,KAAK,SAACC,GACLJ,EAAQI,EAAIC,KAAKA,QAElBK,MAAM,SAACC,GACNV,EAAOU,KAxBE,yBAAA0B,GAAAc,SAAArB,EAAAf,IAAA,UAAhB,iBAAAqC,GAAA,MAAA1B,GAAA2B,MAAArC,KAAAsC,eA2BA/B,EAAOgC,cAAcnC,KAKlB,QAASoC,GAAUC,GACxB,MAAO7D,GAAMC,IAAN,yCAAmD4D,EAAMhE,GAE3D,QAASiE,GAAeD,GAC7B,MAAO7D,GAAMC,IAAN,yCAAmD4D,EAAMhE,GAE3D,QAASkE,GAAwBF,EAAIG,GAC1C,MAAOhE,GAAMC,IAAN,+CAAyD4D,EAAzD,SAAoEG,EAApE,WAAoFnE,GAEtF,QAASoE,GAAcJ,EAAIG,GAChC,MAAOhE,GAAMC,IAAN,kDAA4D4D,EAA5D,SAAuEG,EAAvE,WAAuFnE,GAEzF,QAASqE,GAATC,GAA2C,GAAlBC,GAAkBD,EAAlBC,OAAQC,EAAUF,EAAVE,MACtC,OAAOrE,GAAMM,KAAK,4CAA6CoB,KAAiB0C,SAAQC,WAAWxE,GAI9F,QAASyE,GAATC,GAAwC,GAAbV,GAAaU,EAAbV,GAAIW,EAASD,EAATC,KACpC,OAAOxE,GAAMyE,IAAN,6CAAuDZ,EAAMnC,KAAiB8C,UAAU3E,GAI1F,QAAS6E,KACd,MAAO1E,GAAMM,KAAK,iCAAkC,GAAIT,GCtH1D,QAAA8E,GAAAC,GACApF,EAAA,QCDO,QAASqF,GAAYC,GAC1B,GAAMC,GAAM,GAAIC,QAAJ,QAAmBF,EAAnB,YACNG,EAAQC,SAASC,OAAOF,MAAMF,EACpC,OAAOE,IAASA,EAAM,GCHxB,QAAAG,GAAAR,GACApF,EAAA,QCmEO,QAAS6F,GAAUC,GACxBpC,QAAQC,IAAI,yBACZD,QAAQC,IAAIzB,IAAe4D,GAC3B,IAAMC,KACND,GAAME,QAAQ,SAACC,GAEb,GAAMC,GAAeC,SAAmD,EAA1CC,GAAKC,UAAUJ,EAAKK,MAAMC,cAAmB,GACtER,GAASG,KAAiBH,EAASG,OACxCH,EAASG,GAAcM,KAAKP,EAAKQ,OAKnC,IAAMC,GAAYC,KAAYZ,GACxBa,EAAiBC,KAAcd,GAC/Be,KACAC,IAEN,IAAIL,EAAUM,OAAS,GAErB,MADAtD,SAAQC,IAAI,mBACL,CAgDT,IA7CAiD,EAAeZ,QAAQ,SAACiB,GACtB,GAAMC,KACND,GAAUjB,QAAQ,SAACS,EAAMU,GACvB,GAAMC,MACFC,GAAsB,EACtBC,GAAe,CACnB,IAAU,IAANH,EACFD,EAAMV,KAAK,OACN,CAEL,IADA,GAAIe,GAAUJ,EACPI,GAAW,IAAMF,GAAqB,CAE3C,GADAE,GAAW,EACNd,EAAOQ,EAAUM,IAAYC,KACK,IAAlCJ,EAAKK,QAAQP,EAAMK,IAAkB,CACxCL,EAAMV,KAAKU,EAAMK,IACjBD,GAAe,CACf,OACK,IAAsC,IAAlCF,EAAKK,QAAQP,EAAMK,MAC5BH,EAAKZ,KAAKU,EAAMK,OACZG,OAAAC,KAAI,GAAAC,IAAAjH,EAAQuG,KAAQF,YAAWU,OAAAC,KAAI,GAAAC,IAAAjH,EAAQyG,KAAOJ,QAAQ,CAE5DK,GAAsB,CACtB,SAIW,IAAZE,IAAkBD,GAAiBD,IACtCH,EAAMV,KAAKqB,KAAKC,IAAL7D,MAAA4D,KAAYX,GAAS,MAItCH,EAAOP,KAAKU,KAEdxD,QAAQC,IAAI+C,GACZhD,QAAQC,IAAIiD,GACZlD,QAAQC,IAAI,OAAQoD,GAGpBA,EAAOf,QAAQ,SAAC+B,EAAOC,GAErB,IADA,GAAIC,GAAQ,EACLA,GAASJ,KAAKC,IAAL7D,MAAA4D,KAAAF,KAAYI,IAAS,GACnCjB,EAASN,KAAKE,EAAUsB,IACxBC,GAAS,IAGTnB,EAASE,OAAS,GAEpB,IADA,GAAMkB,GAAcpB,EAASA,EAASE,OAAS,GACxCF,EAASE,OAAS,IACvBF,EAASN,KAAK0B,OAGX,IAAIpB,EAASE,OAAS,GAE3B,MADAtD,SAAQC,IAAI,eACL,CAET,QAAO,EAgCF,QAASwE,GAAmB1B,GAKjC,GAAM2B,IAAU,IAAK,IAAK,KACpBC,GAAU,IAAK,IAAK,KACpBC,GAAU,IAAK,IAAK,KAEtBC,GAAO,EAAG,EAAG,EAYjB,OAXI9B,GAAO,GAAKA,EAFC,IAINA,GAAQ,KACjB8B,GAAOH,EAAO,GAAO3B,GAAQ4B,EAAO,GAAKD,EAAO,IAA5B,GAClBA,EAAO,GAAO3B,GAAQ4B,EAAO,GAAKD,EAAO,IAA5B,GACbA,EAAO,GAAO3B,GAAQ4B,EAAO,GAAKD,EAAO,IAA5B,KAEjBG,GAAOF,EAAO,GAAO5B,GAAQ6B,EAAO,GAAKD,EAAO,IAA5B,GAClBA,EAAO,GAAO5B,GAAQ6B,EAAO,GAAKD,EAAO,IAA5B,GACbA,EAAO,GAAO5B,GAAQ6B,EAAO,GAAKD,EAAO,IAA5B,IAEf,OAAcR,KAAKW,MAAMD,EAAI,IAA7B,IAAoCV,KAAKW,MAAMD,EAAI,IAAnD,IAA0DV,KAAKW,MAAMD,EAAI,IAAzE,IAEK,QAASE,GAAoBC,GAKlC,WAAwBtC,GAAKC,UAAUqC,GAAUC,SAAW,IAArC,GAAZ,GAAsE,IAG5E,QAASC,GAAUC,GAYxB,GAVIA,GAASA,EAAM7B,QAEjB6B,EAAM7C,QAAQ,SAAC8C,GACb,IACEA,EAAKC,UACL,MAAOC,OAKTC,GAEF,IACEA,GAAaF,UACb,MAAOC,KAKN,QAASE,GAAQpD,EAAOqD,GAG7B,GAFAzF,QAAQC,IAAI,gBAAiByC,GAAKgD,UAAUC,OAExCF,EAAO,CAIT,GADKG,KAAcC,GAAKC,cAAc,KAAM,EAAG,GAAIF,IAAa,GAC5DL,GACF,IACEA,GAAaF,UACb,MAAOC,IAIXC,GAAe,GAAI7C,IAAKqD,KAAM,SAAChD,EAAMiD,GACnCH,GAAKI,qBAAqBD,EAAMpD,KAAM,KAAMG,IAC1CX,GAAOqD,MAAM,EAAG,GACpBF,GAAaW,MAAO,EACpBX,GAAaY,QAAU,GACvBzD,GAAKgD,UAAUD,MAAM,QAAS,OAE9B/C,IAAKgD,UAAUrF,KAAK,GC3PxB,QAAA+F,GAAA1E,GACApF,EAAA,QCDA,QAAA+J,GAAA3E,GACApF,EAAA,QCDA,QAAAgK,GAAA5E,GACApF,EAAA,QCDA,QAAAiK,GAAA7E,GACApF,EAAA,QCDA,QAAAkK,GAAA9E,GACApF,EAAA,QCDA,QAAAmK,GAAA/E,GACApF,EAAA,QCDA,QAAAoK,GAAAhF,GACApF,EAAA,QZmBAqK,OAAOC,eAAevK,EAAqB,cAAgB2J,OAAO,GAGlE,IAAIa,GAAUvK,EAAoB,QAG9BwK,EAAmBxK,EAAoB,QAQvCyK,GAJQzK,EAAoB,QAItBA,EAAoB,SAC1B0K,EAA2B1K,EAAoB2K,EAAEF,GAGjDG,EAAW5K,EAAoB,QAG/B6K,EAAU7K,EAAoB,QAC9BU,EAA+BV,EAAoB2K,EAAEE,GAGrDC,EAAc9K,EAAoB,QAClCwC,EAAmCxC,EAAoB2K,EAAEG,GAGzDC,EAAkB/K,EAAoB,QACtC4D,EAA+B5D,EAAoB2K,EAAEI,GAGrDC,EAAmBhL,EAAoB,QACvCuC,EAAwCvC,EAAoB2K,EAAEK,GAG9DC,EAAYjL,EAAoB,QAChCkC,EAAiClC,EAAoB2K,EAAEM,GAGvD7K,EAAYJ,EAAoB,QC3D9BQ,EAAQR,EAAQ,OAEtBQ,GAAM0K,aAAaC,SAASC,IAAI,SAACpK,GAC/B,MAAyB,MAArBA,EAAIC,KAAKC,SACXmK,MAAMrK,EAAIC,KAAKqK,QACR5K,EAAAC,EAAQE,OAAOG,IAEjBA,GAET,IAAMX,IACJC,SACEiL,OAAQ,mBACRzJ,eAAgB,qBYEpB0J,GACEC,eAAgB,SAAAnJ,EAAAqC,GAAArC,EAAGoJ,OAAHpJ,EAAW+G,KAAX,OAAyC7H,GAAzCmD,EAAsBlD,OAAtBkD,EAA8BjD,OAO9CiK,WAAY,SAAA5G,EAAA6G,GAAA,GAAGF,GAAH3G,EAAG2G,OAAmBrH,GAAtBU,EAAWsE,MAAXuC,EAAsBvH,GAAtB,OACZ,IAAA3D,GAAAC,EAAY,SAACC,EAASC,GAEpBuD,EAAUC,GACPtD,KAAK,SAAC8K,GACLnI,QAAQC,IAAI,MAAOkI,EAAQ5K,KAAKA,KAAK4C,KACrCH,QAAQC,IAAI,MAAOkI,EAAQ5K,KAAKA,KAAK6K,QACrCxH,EAAeuH,EAAQ5K,KAAKA,KAAK6K,QAC9B/K,KAAK,SAACgL,GACLrI,QAAQC,IAAI,wBAAyBoI,EAAU9K,KAAKA,MACpD4K,EAAQ5K,KAAKA,KAAK+K,OAASD,EAAU9K,KAAKA,IAC1C,IAAMgL,GAAU,GAAIC,eACpBD,GAAQE,KAAK,MAAON,EAAQ5K,KAAKA,KAAK4C,KAAK,GAC3CoI,EAAQG,KAAK,MACbH,EAAQI,mBAAqB,WAC3B,GAA2B,IAAvBJ,EAAQK,YAAuC,MAAnBL,EAAQpH,OAAgB,EAExB,IADjBoH,EAAQM,kBAAkB,gBAC9B9E,QAAQ,UACfiE,EAAO,kBAAoBjK,OAAQ+K,KAAKC,MAAMR,EAAQS,cAAehL,KAAMmK,EAAQ5K,KAAKA,OACxFL,cAOhB+L,gBAAiB,SAAAC,EAAAC,GAAA,GAAGnB,GAAHkB,EAAGlB,OAAmBrH,GAAtBuI,EAAWvD,MAAXwD,EAAsBxI,GAAtB,OACjB,IAAA3D,GAAAC,EAAY,SAACC,EAASC,GAEpByD,EAAeD,GACZtD,KAAK,SAACgL,GACLrI,QAAQC,IAAI,mBAAoBoI,EAAU9K,KAAKA,MAC/CyK,EAAO,iBAAmBoB,cAAef,EAAU9K,KAAKA,OACxDL,SAGNmM,2BAA4B,SAAAC,EAAAC,GAAA,GAAGvB,GAAHsB,EAAGtB,OAAmBrH,GAAtB2I,EAAW3D,MAAX4D,EAAsB5I,IAAIG,EAA1ByI,EAA0BzI,IAA1B,OAC5B,IAAA9D,GAAAC,EAAY,SAACC,EAASC,GAEpB0D,EAAwBF,EAAIG,GACzBzD,KAAK,SAACmM,GACLxJ,QAAQC,IAAI,eAAgBuJ,EAAMjM,KAAKA,MACvCyK,EAAO,wBAA0ByB,kBAAmBD,EAAMjM,KAAKA,OAC/DL,SAGNwM,gBAAiB,SAAAC,EAAAC,GAAA,GAAG5B,GAAH2B,EAAG3B,OAAmBrH,GAAtBgJ,EAAWhE,MAAXiE,EAAsBjJ,IAAIG,EAA1B8I,EAA0B9I,IAA1B,OACjB,IAAA9D,GAAAC,EAAY,SAACC,EAASC,GAEpB4D,EAAcJ,EAAIG,GACfzD,KAAK,SAACmM,GACLxJ,QAAQC,IAAI,eAAgBuJ,EAAMjM,KAAKA,MACvCyK,EAAO,kBAAoB6B,YAAaL,EAAMjM,KAAKA,OACnDL,UC3ER4M,GACEC,cAAe,SAACpE,EAAD/G,GAAqB,GAAXoL,GAAWpL,EAAXoL,IACvBrE,GAAMsE,WAAaD,GAGrBE,cAAe,SAACvE,EAAD1E,GAA0B,GAAhB+I,GAAgB/I,EAAhB+I,KAAMG,EAAUlJ,EAAVkJ,GAC7BxE,GAAMyE,MAAMJ,GAAQG,GAGtBE,mBAAoB,SAAC1E,EAADtE,GAAsBA,EAAZe,MACtBE,QAAQ,SAACC,GACTA,GACFsE,EAAA,EAAIyD,IAAI3E,EAAMvD,MAAOG,EAAK5B,GAAI4B,MAIpCgI,mBAAoB,SAAC5E,EAADuC,GAAuB,GAAbnK,GAAamK,EAAbnK,MAC5B4H,GAAM6E,cAAgBzM,GAExB0M,eAAgB,SAAC9E,EAADuD,GAA6B,GAAnBnL,GAAmBmL,EAAnBnL,OAAQC,EAAWkL,EAAXlL,IAChC2H,GAAM6E,cAAgBzM,EACtB4H,EAAM+E,kBAAoB1M,GAE5B2M,cAAe,SAAChF,EAADwD,GAA8B,GAApBC,GAAoBD,EAApBC,aACvBzD,GAAMyD,cAAgBA,GAExBwB,qBAAsB,SAACjF,EAAD2D,GAAkC,GAAxBG,GAAwBH,EAAxBG,iBAC9BzJ,SAAQC,IAAI,QAASwJ,EAAkBoB,SACJ,IAA9BpB,EAAkBoB,QACrBlF,EAAM8D,kBAAkBqB,QAAUrB,EAAkBsB,KAEpDpF,EAAM8D,kBAAkBqB,QAAUnF,EAAM8D,kBAAkBqB,QAAQ9G,OAAOyF,EAAkBsB,MAE7FpF,EAAM8D,kBAAkBuB,MAAQvB,EAAkBuB,MAClDrF,EAAM8D,kBAAkBwB,KAAOxB,EAAkBwB,KACjDtF,EAAM8D,kBAAkBoB,QAAUpB,EAAkBoB,SAEtDK,eAAgB,SAACvF,EAAD4D,GAA4B,GAAlBM,GAAkBN,EAAlBM,WACxB7J,SAAQC,IAAI,UAAW4J,GACM,IAAxBA,EAAYgB,QACflF,EAAMkE,YAAYiB,QAAUjB,EAAYkB,KAExCpF,EAAMkE,YAAYiB,QAAUnF,EAAMkE,YAAYiB,QAAQ9G,OAAO6F,EAAYkB,MAE3EpF,EAAMkE,YAAYmB,MAAQnB,EAAYmB,MACtCrF,EAAMkE,YAAYoB,KAAOpB,EAAYoB,KACrCtF,EAAMkE,YAAYgB,QAAUhB,EAAYgB,UChD5CM,GAGEC,UAHa,SAGHzF,GAAO,GACPsE,GAAoCtE,EAApCsE,WAAYoB,EAAwB1F,EAAxB0F,aAAcjB,EAAUzE,EAAVyE,MAC5BtJ,EAAOwK,OAAO3F,EAAM4F,MAAMC,OAAO1K,OAAS,CAChD,IAAImJ,EAAY,CACd,GAAMxE,IAAS3E,EAAO,GAAKuK,EACrBI,EAAM3K,EAAOuK,CACnB,OAAOjB,GAAMH,GAAYyB,MAAMjG,EAAOgG,GAExC,UAKFE,YAhBa,SAgBDhG,EAAOwF,GACjB,MAAOA,GAAQC,UAAUQ,IAAI,SAAAjL,GAAA,MAAMgF,GAAMvD,MAAMzB,KAAKkL,OAAO,SAAAC,GAAA,MAAKA,MCXpEjF,GAAA,EAAIa,IAAIR,EAAA,ECIR,IAAA6E,IjB6eEC,KiB3eF,MjB4eEzO,KAAM,WACJ,OACE0O,eiB1eN,SjB6eEC,kBAAmB,SAA2BC,EAAIC,EAAM3M,MkB7f1D4M,EAAA,WAA0B,GAAAC,GAAApO,KAAaqO,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,OAAOhM,GAAA,SAAY8L,EAAA,cAAmBE,OAAOX,KAAAM,EAAAL,kBAA2BQ,EAAA,wBAClLG,KACAC,GAAiBR,SAAAO,mBACjBE,EAAA,EhBAAC,EAAAzQ,EAAA,QAQA0Q,GAAAvL,EAKAwL,GAAAF,EACAhB,EACAe,GATA,EAWAE,GAPA,KAEA,MAUAE,GAAAD,GAAA,QF6gBIE,GAAiB7Q,EAAoB,QmBzhBzC8Q,InBsjBEpB,KmBpjBF,QnBqjBEzO,KAAM,WACJ,OACE8P,ImBnjBN,+BnBujBEC,SACEC,WAAY,SAAoBC,GAG9BtP,KAAKuP,QAAQ3K,KmBrjBnB0K,KnBwjBEE,QAAS,WACP,GAAIC,GAAUC,SmBrjBlBC,enBsjBIC,QAAOC,IAAMJ,EAAQK,wBAAwBC,MmBrjBjD,GnBsjBIN,EAAQO,MAAMC,SAAWL,OAAOC,ImBpjBpC,KnBsjBmB,iBAAiBrK,KAAK0K,UAAUC,UmBrjBnDC,iBnBujBQ3M,EAAY,SAAWjF,EAAe,IAAE,gBAE1CH,EAAYoF,EmBrjBlB,SAAAtE,KAAA,SAAAC,GnBsjBYA,EAAIC,KAAKC,SAAW,MAEtBd,EAAkB,OmBpjB5B,gBnBqjBUsF,SmBpjBVuM,QAEA,8PnBojBQ5G,MAAM,UAAYrK,EAAIC,KAAKA,KmBljBnCiR,UnBmjBQxO,QAAQC,IAAI,wBAAyB3C,EAAIC,KmBljBjDA,QACAK,MAAA,SAAAC,GnBmjBQnB,EAAkB,OmBjjB1B,gBnBkjBQsF,SmBjjBRuM,QAEA,+PnBmjBMvM,SmBhjBNuM,QAEA,gQC1DAE,GAAA,WAA0B,GAAAnC,GAAApO,KAAaqO,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBiC,YAAA,QAAkBjC,EAAA,OAAYiC,YAAA,WAAqBpC,EAAAqC,GAAA,KAAAlC,EAAA,OAAwBiC,YAAA,kBAAA/B,OAAqChM,GAAA,YAAgBiO,IAAKC,WAAA,SAAAC,GAA8BxC,EAAAiB,WAAA,4BAAyCjB,EAAAqC,GAAA,wBACtTI,MACAC,IAAiB3C,OAAAoC,GAAA7B,gBAAAmC,IACjBE,GAAA,GhBAAC,GAAA5S,EAAA,QAQA6S,GAAAjN,EAKAkN,GAAAF,GACA9B,GACA6B,IATA,EAWAE,GAPA,kBAEA,MAUAE,GAAAD,GAAA,QJqnBI9E,GAAMhO,EAAoB,QAC1B4H,GAA2B5H,EAAoB2K,EAAEqD,IAGjDgF,GAAoBhT,EAAoB,QACxC2H,GAAyC3H,EAAoB2K,EAAEqI,IAG/DC,GAASjT,EAAoB,QAC7B6G,GAA8B7G,EAAoB2K,EAAEsI,IAGpDC,GAAOlT,EAAoB,QAC3B2G,GAA4B3G,EAAoB2K,EAAEuI,IK3pBhD9M,GAAOpG,EAAQ,OAErBoG,IAAKgD,UAAU+J,QACf,IAAM3L,IAAqB,EACvByB,UAEAK,IAAa,EA8CXC,GAAO,GAAInD,IAAKgN,SACpBC,GAAI,eACJC,GAAI,eACJC,GAAI,eACJC,GAAI,eACJC,MAAO,gBACPC,GAAI,eACJC,GAAI,eACJC,GAAI,eACJC,MAAO,kBAEPC,QAAS,EAETC,QAAS,gDACRC,WL86BCC,GAAqBjU,EAAoB,QACzCkU,GAA6BlU,EAAoB2K,EAAEsJ,IAGnDE,GAAgBnU,EAAoB,QACpCoU,GAAqCpU,EAAoB2K,EAAEwJ,IqBl/BzDE,IACJ/T,SACEiL,OAAQ,mBACRzJ,eAAgB,qBAGPwS,GAAqB,iBAAM,IAAA5T,GAAAC,EAAY,SAACC,EAASC,GAC5DqT,GAAAvT,EAAMG,KAAN,kDAA6DyT,mBAAmB/C,OAAO9L,SAAS8O,KAAKC,MAAM,KAAK,IAAO,GAAIJ,IAC1HtT,KAAK,SAACC,GAILoT,GAAAzT,EAAG+T,QACDC,OAAO,EACPC,MAAO5T,EAAIC,KAAKA,KAAK2T,MACrBC,UAAW7T,EAAIC,KAAKA,KAAK4T,UACzBC,SAAU9T,EAAIC,KAAKA,KAAK6T,SACxBC,UAAW/T,EAAIC,KAAKA,KAAK8T,UACzBC,WACE,sBACA,2BAGJZ,GAAAzT,EAAGsU,MAAM,WACPrU,EAAQwT,GAAAzT,MAET,WACDE,EAAO,sBAKEqU,GAAsB,SAAA5S,GAK3B,GAJJ0C,GAII1C,EAJJ0C,MACAmQ,EAGI7S,EAHJ6S,KACAC,EAEI9S,EAFJ8S,SACAC,EACI/S,EADJ+S,OAKIC,EAAOF,CACbhB,IAAAzT,EAAG4U,qBACDvQ,QACAsQ,OACAD,SACAG,QAJqB,aAKrBrC,OALqB,eAOvBiB,GAAAzT,EAAG8U,uBACDzQ,QACAmQ,OACAG,OACAD,SACAG,QALuB,aAMvBrC,OANuB,gBrBkhCvBuC,IAJS1V,EAAoB,QAItBA,EAAoB,SAC3B2V,GAA4B3V,EAAoB2K,EAAE+K,IAGlDE,GAAqB5V,EAAoB,QsBzkC7C6V,GAAA7V,EAAA,QAYA8V,MAIAC,OAAA,GAEAC,GAAA,GAAAH,IAAAzC,StB4kCE6C,GsB1kCF,etB2kCEC,MsB1kCF,gBtB2kCEC,MsB1kCF,gBtB2kCEC,GsB1kCF,etB2kCEC,GsB1kCF,etB2kCEC,MsB1kCF,gBtB2kCEC,MsB1kCF,gBtB2kCEC,GsB1kCF,etB2kCEC,GsB1kCF,iBtB4kCE3C,QsB1kCF,EtB4kCEC,QsB1kCF,2CAHAC,WAUA0C,IAHApF,SAAAC,gBAAAG,wBAAAC,MACA9J,KAAAC,IAAAwJ,SAAAC,gBAAAoF,aAAAnF,OAAAoF,aAAA,OAGAC,MAEAC,GAAA,EAEAC,IAAA,EACAC,OAAAC,GACAC,GAAA,EACAC,GAAA,EAEAC,IAAA,EACAC,MACAC,ItB4kCEC,YsBzkCFC,OAAA5B,GAAA,OACA6B,YAAA7B,GAAA,YAEA8B,UAAA/B,GAAAhV,GtB2kCEM,KAAM,WACJ,OACE0W,csB1kCN,EtB2kCMC,cACAC,cACAC,eACAC,SsB1kCN,EtB2kCMC,uBsB1kCN,EtB2kCMC,kBsB1kCN,EtB2kCMC,sBAAuB,EACvBC,YsB1kCN,EtB2kCMC,gBsB1kCN,EtB2kCMC,asB1kCN,EtB2kCMC,UsB1kCN,EtB2kCMC,asB1kCN,EtB2kCMC,UAAW,GACXC,WAAY,GACZC,gBACEhP,MsB1kCR,EtB2kCQiI,MsB1kCR,EtB2kCQgH,OsB1kCR,MtB2kCQC,QsB1kCR,ItB2kCQC,QsB1kCR,GtB2kCQC,UsB1kCR,OtB2kCQC,IsB1kCR,EtB2kCQjR,IsB1kCR,ItB2kCQkR,SsB1kCR,EtB2kCQC,UsB1kCR,EtB2kCQC,MsB1kCR,EtB2kCQC,QsB1kCR,StB4kCQC,WsB1kCR,EtB2kCQC,SsB1kCR,EtB2kCQzH,OACE0H,QsBzkCV,gBtB2kCQC,MsB1kCR,ctB2kCQC,UsB1kCR,WtB2kCQC,MsB1nCR,GtB2nCQC,SACEC,gBsB1kCV,mBtB2kCUC,UsBzkCV,6CtB2kCQC,WsB1kCR,OtB2kCQC,cACEH,gBsB1kCV,oBtB2kCUI,YsB1kCV,oBtB2kCUC,UsB1kCV,gBtB2kCUC,gBsB1kCV,QtB2kCUC,SsB1kCV,WtB2kCUC,KsB1kCV,StB2kCUC,IsBzkCV,UtB2kCQC,UAAW,SAAmB3Q,GAC5B,MAAIA,IACMA,EAAQ,IAAI4Q,QsB1kChC,WAEA,YtB8kCQC,cACEZ,gBsBxkCV,sBtB8kCEa,OACEzC,QAAS,SAAiB0C,GsB5kC9B,GAAA9Y,GAAAC,ItB+kCM8B,SAAQC,IAAI,iBsB9kClB8W,GtB+kCUA,EAEFzD,GAAiB0D,YAAY,WAC3B/Y,EAAMwW,asB9kChB,EtB+kCcxW,EAAMwW,aAAe,MACvBxW,EsB9kCZgZ,etB+kCYhZ,EAAMwW,YsB9kClB,ItBglCWyC,KAGHC,csB9kCR7D,MtBklCE8D,UACEtD,OAAQ,WACN,MAAO5V,MAAKmZ,MAAMC,UsB9kCxBxD,QtB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","file":"static/js/app.3023e4ac0874f5881ad9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/HIm\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"8GxT\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// EXTERNAL MODULE: ./node_modules/vuex-router-sync/index.js\nvar vuex_router_sync = __webpack_require__(\"9JMe\");\nvar vuex_router_sync_default = /*#__PURE__*/__webpack_require__.n(vuex_router_sync);\n\n// EXTERNAL MODULE: ./node_modules/vue2-toast/lib/toast.css\nvar toast = __webpack_require__(\"e195\");\nvar toast_default = /*#__PURE__*/__webpack_require__.n(toast);\n\n// EXTERNAL MODULE: ./node_modules/vue2-toast/lib/index.js\nvar lib = __webpack_require__(\"1BT9\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"Xxa5\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"exGp\");\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./node_modules/js-cookie/src/js.cookie.js\nvar js_cookie = __webpack_require__(\"lbHh\");\nvar js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);\n\n// CONCATENATED MODULE: ./src/_common/js/api.js\n\n\n\n\n\n\n// import Vue from 'vue';\nvar axios = __webpack_require__(\"mtWM\");\n\naxios.interceptors.response.use(function (res) {\n  if (res.data.errcode !== '0') {\n    alert(res.data.resmsg);\n    return promise_default.a.reject(res);\n  }\n  return res;\n});\nvar reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n// const tokenObj = { access_token: '' };\n// TODO:cause 500?????? just cuz this few lines???\n\n\nfunction getUserInfo(wxcode) {\n  var tokenInCookie = js_cookie[\"get\"]('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = '' + tokenInCookie;\n    // tokenObj.access_token = tokenInCookie;\n    return axios.get('//api.musixise.com/api/v1/user/getInfo', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new promise_default.a(function (resolve, reject) {\n      axios.post('//api.musixise.com/api/v1/user/oauth/wechat/callback?code=' + wxcode, '', reqConfig).then(function (res) {\n        if (res.data.errcode === 20001) {\n          reject(20001); // return\n        }\n        var serviceToken = res.data.data.id_token;\n        reqConfig.headers.Authorization = '' + serviceToken;\n        // tokenObj.access_token = serviceToken;\n        js_cookie[\"set\"]('serviceToken', serviceToken, {\n          expires: 7\n        });\n        return axios.get('//api.musixise.com/api/v1/user/getInfo', reqConfig);\n      }, function () {\n        reject();\n      }).then(function (res) {\n        resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  }\n  // !tokenInCookie&&!wxcodeapp.js, \n  return false;\n}\n\nfunction uploadRecord(record, info) {\n  var _this = this;\n\n  return new promise_default.a(function (resolve, reject) {\n    var formReqConfig = { headers: { 'Content-Type': 'multipart/form-data', processData: false, Authorization: reqConfig.headers.Authorization } };\n    var blob = new Blob([stringify_default()(record)]);\n    var reader = new FileReader();\n    reader.onload = function () {\n      var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(event) {\n        var fd, postFix, workURL, param;\n        return regenerator_default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fd = new FormData();\n\n                fd.append('fname', 'test.txt');\n                fd.append('data', event.target.result);\n                // fd.append('access_token', tokenObj.access_token);\n                postFix = '';\n                _context.prev = 4;\n                _context.next = 7;\n                return axios.post('//api.musixise.com/api/v1/uploadAudio', fd, formReqConfig);\n\n              case 7:\n                postFix = _context.sent;\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context['catch'](4);\n\n                console.log(_context.t0);\n                reject(_context.t0);\n\n              case 14:\n                workURL = '' + postFix.data.data;\n                param = extends_default()({}, info, { // title,content.cover\n                  url: workURL\n                });\n\n                console.log(workURL);\n                return _context.abrupt('return', axios.post('//api.musixise.com/api/v1/work/create', stringify_default()(param), reqConfig).then(function (res) {\n                  resolve(res.data.data);\n                }).catch(function (err) {\n                  reject(err);\n                }));\n\n              case 18:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[4, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nfunction fetchMbox(id) {\n  return axios.get('//api.musixise.com/api/v1/work/detail/' + id, reqConfig);\n}\nfunction fetchMusixiser(id) {\n  return axios.get('//api.musixise.com/api/v1/user/detail/' + id, reqConfig);\n}\nfunction fetchWorksFromMusixiser(id, page) {\n  return axios.get('//api.musixise.com/api/v1/work/getListByUid/' + id + '?page=' + page + '&size=15', reqConfig);\n}\nfunction fetchFavWorks(id, page) {\n  return axios.get('//api.musixise.com/api/v1/favorite/getWorkList/' + id + '?page=' + page + '&size=15', reqConfig);\n}\nfunction toggleFavSong(_ref2) {\n  var workId = _ref2.workId,\n      status = _ref2.status;\n\n  return axios.post('//api.musixise.com/api/v1/favorite/create', stringify_default()({ workId: workId, status: status }), reqConfig);\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nfunction api_updateWorkTitle(_ref3) {\n  var id = _ref3.id,\n      title = _ref3.title;\n\n  return axios.put('//api.musixise.com/api/v1/work/updateWork/' + id, stringify_default()({ title: title }), reqConfig);\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nfunction getRecommendations() {\n  return axios.post('//api.musixise.com/api/v1/home', '', reqConfig);\n}\n// CONCATENATED MODULE: ./src/store/actions.js\n\n\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\n/* harmony default export */ var actions = ({\n  BOUNCE_PROJECT: function BOUNCE_PROJECT(_ref, _ref2) {\n    var commit = _ref.commit,\n        state = _ref.state;\n    var record = _ref2.record,\n        info = _ref2.info;\n    return uploadRecord(record, info);\n  },\n  // \n  // uploadRecord(record, info).then(() => {\n  //   // commit('SET_BOUNCE_PROJECT', { record, info });\n  //   // commit store\n  // });\n\n  FETCH_MBOX: function FETCH_MBOX(_ref3, _ref4) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    var id = _ref4.id;\n    return new promise_default.a(function (resolve, reject) {\n      // id\n      fetchMbox(id).then(function (project) {\n        console.log('xxi', project.data.data.url);\n        console.log('xxi', project.data.data.userId);\n        fetchMusixiser(project.data.data.userId).then(function (musixiser) {\n          console.log('work musixiser info: ', musixiser.data.data);\n          project.data.data.userVO = musixiser.data.data; // \n          var request = new XMLHttpRequest();\n          request.open('GET', project.data.data.url, true);\n          request.send(null);\n          request.onreadystatechange = function () {\n            if (request.readyState === 4 && request.status === 200) {\n              var type = request.getResponseHeader('Content-Type');\n              if (type.indexOf('text') !== -1) {\n                commit('SET_ID_PROJECT', { record: JSON.parse(request.responseText), info: project.data.data });\n                resolve();\n              }\n            }\n          };\n        });\n      });\n    });\n  },\n  FETCH_MUSIXISER: function FETCH_MUSIXISER(_ref5, _ref6) {\n    var commit = _ref5.commit,\n        state = _ref5.state;\n    var id = _ref6.id;\n    return new promise_default.a(function (resolve, reject) {\n      // id\n      fetchMusixiser(id).then(function (musixiser) {\n        console.log('musixiser info: ', musixiser.data.data);\n        commit('SET_MUSIXISER', { musixiserInfo: musixiser.data.data });\n        resolve();\n      });\n    });\n  },\n  FETCH_WORKS_FROM_MUSIXISER: function FETCH_WORKS_FROM_MUSIXISER(_ref7, _ref8) {\n    var commit = _ref7.commit,\n        state = _ref7.state;\n    var id = _ref8.id,\n        page = _ref8.page;\n    return new promise_default.a(function (resolve, reject) {\n      // id\n      fetchWorksFromMusixiser(id, page).then(function (works) {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_MUSIXISER_WORKS', { musixiserWorksObj: works.data.data });\n        resolve();\n      });\n    });\n  },\n  FETCH_FAV_WORKS: function FETCH_FAV_WORKS(_ref9, _ref10) {\n    var commit = _ref9.commit,\n        state = _ref9.state;\n    var id = _ref10.id,\n        page = _ref10.page;\n    return new promise_default.a(function (resolve, reject) {\n      // id\n      fetchFavWorks(id, page).then(function (works) {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_FAV_WORKS', { favWorksObj: works.data.data });\n        resolve();\n      });\n    });\n  }\n  //   // ensure data for rendering given list type\n  //   FETCH_LIST_DATA: ({ commit, dispatch, state }, { type }) => {\n  //     commit('SET_ACTIVE_TYPE', { type });\n  //     return fetchIdsByType(type)\n  //       .then(ids => commit('SET_LIST', { type, ids }))\n  //       .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n  //   },\n  //\n  //   // ensure all active items are fetched\n  //   ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => dispatch('FETCH_ITEMS', {\n  //     ids: getters.activeIds,\n  //   }),\n  //\n  //   FETCH_ITEMS: ({ commit, state }, { ids }) => {\n  //     // on the client, the store itself serves as a cache.\n  //     // only fetch items that we do not already have, or has expired (3 minutes)\n  //     const now = Date.now();\n  //     ids = ids.filter((id) => {\n  //       const item = state.items[id];\n  //       if (!item) {\n  //         return true;\n  //       }\n  //       if (now - item.__lastUpdated > 1000 * 60 * 3) {\n  //         return true;\n  //       }\n  //       return false;\n  //     });\n  //     if (ids.length) {\n  //       return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n  //     }\n  //     return Promise.resolve();\n  //   },\n  //\n  //   FETCH_USER: ({ commit, state }, { id }) => (state.users[id]\n  //       ? Promise.resolve(state.users[id])\n  //       : fetchUser(id).then(user => commit('SET_USER', { id, user }))),\n});\n// CONCATENATED MODULE: ./src/store/mutations.js\n\n\n/* harmony default export */ var mutations = ({\n  SET_USER_INFO: function SET_USER_INFO(state, _ref) {\n    var type = _ref.type;\n    // \n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: function SET_WORK_INFO(state, _ref2) {\n    var type = _ref2.type,\n        ids = _ref2.ids;\n    // \n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: function SET_MUSIXISER_INFO(state, _ref3) {\n    var items = _ref3.items;\n    // \n    items.forEach(function (item) {\n      if (item) {\n        vue_esm[\"a\" /* default */].set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: function SET_BOUNCE_PROJECT(state, _ref4) {\n    var record = _ref4.record;\n    // \n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: function SET_ID_PROJECT(state, _ref5) {\n    var record = _ref5.record,\n        info = _ref5.info;\n    // \n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_MUSIXISER: function SET_MUSIXISER(state, _ref6) {\n    var musixiserInfo = _ref6.musixiserInfo;\n    // \n    state.musixiserInfo = musixiserInfo;\n  },\n  PUSH_MUSIXISER_WORKS: function PUSH_MUSIXISER_WORKS(state, _ref7) {\n    var musixiserWorksObj = _ref7.musixiserWorksObj;\n    // \n    console.log('ccccc', musixiserWorksObj.current);\n    if (+musixiserWorksObj.current === 1) {\n      state.musixiserWorksObj.content = musixiserWorksObj.list;\n    } else {\n      state.musixiserWorksObj.content = state.musixiserWorksObj.content.concat(musixiserWorksObj.list);\n    }\n    state.musixiserWorksObj.total = musixiserWorksObj.total;\n    state.musixiserWorksObj.size = musixiserWorksObj.size;\n    state.musixiserWorksObj.current = musixiserWorksObj.current;\n  },\n  PUSH_FAV_WORKS: function PUSH_FAV_WORKS(state, _ref8) {\n    var favWorksObj = _ref8.favWorksObj;\n    // \n    console.log('xxxxxxx', favWorksObj);\n    if (+favWorksObj.current === 1) {\n      state.favWorksObj.content = favWorksObj.list;\n    } else {\n      state.favWorksObj.content = state.favWorksObj.content.concat(favWorksObj.list);\n    }\n    state.favWorksObj.total = favWorksObj.total;\n    state.favWorksObj.size = favWorksObj.size;\n    state.favWorksObj.current = favWorksObj.current;\n  }\n  // SET_FINAL_WORK: (state, { type }) => { // \n  //   state.activeType = type;\n  // },\n  // SET_USER: (state, { id, user }) => {\n  //   Vue.set(state.users, id, user || false); /* false means user not found */\n  // },\n});\n// CONCATENATED MODULE: ./src/store/getters.js\n/* harmony default export */ var getters = ({\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds: function activeIds(state) {\n    var activeType = state.activeType,\n        itemsPerPage = state.itemsPerPage,\n        lists = state.lists;\n\n    var page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      var start = (page - 1) * itemsPerPage;\n      var end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems: function activeItems(state, getters) {\n    return getters.activeIds.map(function (id) {\n      return state.items[id];\n    }).filter(function (_) {\n      return _;\n    });\n  }\n});\n// CONCATENATED MODULE: ./src/store/index.js\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vuex_esm[\"a\" /* default */]);\n\nfunction createStore() {\n  return new vuex_esm[\"a\" /* default */].Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: []\n      },\n      myInfo: {},\n      recordParts: [],\n      recordProject: [],\n      musixiserInfo: {},\n      musixiserWorksObj: { content: [] },\n      favWorksObj: { content: [] }\n    },\n    actions: actions,\n    mutations: mutations,\n    getters: getters\n  });\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n//\n//\n\n// https://router.vuejs.org/en/advanced/transitions.html\n/* harmony default export */ var App = ({\n  name: 'app',\n  data: function data() {\n    return {\n      transitionName: 'fade'\n    };\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fcaae542\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"h4Ia\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.esm.js\nvar vue_router_esm = __webpack_require__(\"/ocq\");\n\n// CONCATENATED MODULE: ./src/_common/js/util.js\nfunction getUrlParam(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n\nfunction getUrlParam1(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/HelloWorld.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var HelloWorld = ({\n  name: 'hello',\n  data: function data() {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    };\n  },\n\n  methods: {\n    redirectTo: function redirectTo(path) {\n      // IMPORTANT keng. authcodeauth\n      // authcookie\n      this.$router.push(path);\n    }\n  },\n  created: function created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b801b49\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\nvar HelloWorld_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      \\n  \")])])}\nvar HelloWorld_staticRenderFns = []\nvar HelloWorld_esExports = { render: HelloWorld_render, staticRenderFns: HelloWorld_staticRenderFns }\n/* harmony default export */ var components_HelloWorld = (HelloWorld_esExports);\n// CONCATENATED MODULE: ./src/components/HelloWorld.vue\nfunction HelloWorld_injectStyle (ssrContext) {\n  __webpack_require__(\"O/d9\")\n}\nvar HelloWorld_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar HelloWorld___vue_template_functional__ = false\n/* styles */\nvar HelloWorld___vue_styles__ = HelloWorld_injectStyle\n/* scopeId */\nvar HelloWorld___vue_scopeId__ = \"data-v-3b801b49\"\n/* moduleIdentifier (server only) */\nvar HelloWorld___vue_module_identifier__ = null\nvar HelloWorld_Component = HelloWorld_normalizeComponent(\n  HelloWorld,\n  components_HelloWorld,\n  HelloWorld___vue_template_functional__,\n  HelloWorld___vue_styles__,\n  HelloWorld___vue_scopeId__,\n  HelloWorld___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_HelloWorld = (HelloWorld_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/set.js\nvar set = __webpack_require__(\"lHA8\");\nvar set_default = /*#__PURE__*/__webpack_require__.n(set);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/toConsumableArray.js\nvar toConsumableArray = __webpack_require__(\"Gu7T\");\nvar toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/values.js\nvar values = __webpack_require__(\"gRE1\");\nvar values_default = /*#__PURE__*/__webpack_require__.n(values);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/keys.js\nvar keys = __webpack_require__(\"fZjL\");\nvar keys_default = /*#__PURE__*/__webpack_require__.n(keys);\n\n// CONCATENATED MODULE: ./src/_common/js/magic.js\n\n\n\n\n\nvar magic_Tone = __webpack_require__(\"ZnLv\");\n\nmagic_Tone.Transport.cancel();\nvar SAME_NOTE_INTERVAL = 1; // 1\nvar musicPreview = void 0;\n\nvar oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\n// const mbox = new Tone.PolySynth(6, Tone.Synth, {\n//   oscillator: {\n//     partials: [0, 2, 3, 4],\n//   },\n// }).toMaster();\n// const mbox = new Tone.Sampler({\n//   C4: 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   A4: 'A4.[mp3|ogg]',\n//   C5: 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   A5: 'A5.[mp3|ogg]',\n//   C6: 'C6.[mp3|ogg]',\n// }, {\n//   release: 1,\n//   baseUrl: '/static/audio/',\n// }).toMaster();\n\nvar mbox = new magic_Tone.Sampler({\n  B3: 'B3.[mp3|ogg]',\n  E4: 'E4.[mp3|ogg]',\n  G4: 'G4.[mp3|ogg]',\n  B4: 'B4.[mp3|ogg]',\n  'C#5': 'Cs5.[mp3|ogg]',\n  E5: 'E5.[mp3|ogg]',\n  G5: 'G5.[mp3|ogg]',\n  B5: 'B5.[mp3|ogg]',\n  'C#6': 'Cs6.[mp3|ogg]'\n}, {\n  release: 1,\n  // baseUrl: '/static/audio/mbox/',\n  baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/'\n}).toMaster();\n\nfunction RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(stringify_default()(items));\n  var tasksObj = {};\n  items.forEach(function (item) {\n    //* 2 cuz print mbox need 1 octave higher.\n    var itemNoteFreq = parseInt(magic_Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) {\n      tasksObj[itemNoteFreq] = [];\n    }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  var taskTypes = keys_default()(tasksObj); // [659,784,...]  freq array, object.keys\n  var taskTimeArrays = values_default()(tasksObj); // [[2.66][1.0295,1.39,2.6713]] \n  var machines = []; // init with existing types, will add more machines\n  var groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('18');\n    return false;\n  }\n\n  taskTimeArrays.forEach(function (timeArray) {\n    var final = [];\n    timeArray.forEach(function (time, j) {\n      var test = []; // final finaltest\n      var allPreviousOccupied = false;\n      var successFound = false;\n      if (j === 0) {\n        final.push(1); // 1\n      } else {\n        var counter = j;\n        while (counter >= 1 && !allPreviousOccupied) {\n          // TODO: -1 or 0\n          counter -= 1;\n          if (time - timeArray[counter] >= SAME_NOTE_INTERVAL && test.indexOf(final[counter]) === -1) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([].concat(toConsumableArray_default()(new set_default.a(final))).length === [].concat(toConsumableArray_default()(new set_default.a(test))).length) {\n              // finalsetunique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if (counter === 0 && !successFound || allPreviousOccupied) {\n          final.push(Math.max.apply(Math, final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach(function (group, index) {\n    var count = 0;\n    while (count <= Math.max.apply(Math, toConsumableArray_default()(group)) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    var lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('18');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //,\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nfunction magic_mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  // const COLOR1 = [151, 255, 241];\n  // const COLOR2 = [98, 166, 223];\n  // const COLOR3 = [154, 124, 255];\n  var COLOR1 = [151, 255, 241];\n  var COLOR2 = [137, 228, 217];\n  var COLOR3 = [143, 123, 242];\n  var TIME_MAX = 20;\n  var rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [COLOR1[0] + time * (COLOR2[0] - COLOR1[0]) / (TIME_MAX / 2), COLOR1[1] + time * (COLOR2[1] - COLOR1[1]) / (TIME_MAX / 2), COLOR1[2] + time * (COLOR2[2] - COLOR1[2]) / (TIME_MAX / 2)];\n  }\n  rgb = [COLOR2[0] + time * (COLOR3[0] - COLOR2[0]) / (TIME_MAX / 2), COLOR2[1] + time * (COLOR3[1] - COLOR2[1]) / (TIME_MAX / 2), COLOR2[2] + time * (COLOR3[2] - COLOR2[2]) / (TIME_MAX / 2)];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return 'rgb(' + Math.floor(rgb[0]) + ',' + Math.floor(rgb[1]) + ',' + Math.floor(rgb[2]) + ')';\n}\nfunction magic_mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return '' + (75 * 0.8 * ((magic_Tone.Frequency(noteName).toMidi() - 50) / (110 - 40)) + 0.2); // 75 is rem to px\n}\n\nfunction clearTone(parts) {\n  // Tone.js\n  if (parts && parts.length) {\n    //  dispose\n    parts.forEach(function (part) {\n      try {\n        part.dispose();\n      } catch (e) {\n        //\n      }\n    });\n  }\n  if (musicPreview) {\n    // musicPreview\n    try {\n      musicPreview.dispose();\n    } catch (e) {\n      //\n    }\n  }\n}\nfunction preview(items, start) {\n  console.log('current state', magic_Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);oncePlayed = true;\n    }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    musicPreview = new magic_Tone.Part(function (time, value) {\n      mbox.triggerAttackRelease(value.note, '4n', time);\n    }, items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 21; // 20s\n    magic_Tone.Transport.start('+0.01', 0);\n  } else {\n    magic_Tone.Transport.stop(0);\n  }\n  // try {\n  //   Tone.Transport.stop(0);\n  //   console.log(1);\n  //   // Tone.Part.removeAll();\n  //   Tone.Transport.clear();\n  //   console.log(2);\n  //   music.dispose();\n  //   music = undefined;\n  //   console.log(3);\n  // } catch (e) {\n  //   //\n  // } finally {\n  //   music = new Tone.Part(((time, value) => {\n  //     mbox.triggerAttackRelease(value.note, '8n', time);\n  //   }), items).start(0, 0);\n  //   Tone.Transport.start('+0.01', 0);\n  // }\n}\n\n// back up version 1 maker script\n// export function generateFreqs(notesInfo) {\n//   notesObj = {};\n//   notesArray = [];\n//   FreqsResult = [];\n//   console.log(notesInfo);\n//   notesInfo.forEach((item) => {\n//     // console.log(item.note)\n//     // console.log(notesObj)\n//     if (!(item.note in notesObj)) {\n//       console.log('!!');\n//       notesObj[item.note] = 1;\n//       notesArray.push({\n//         note: item.note,\n//         freq: Tone.Frequency(item.note).toFrequency(),\n//       });\n//     }\n//   });\n//   notesArray.sort((a, b) => (a.freq - b.freq));\n//   console.log(`${notesArray.length}`);\n//   notesArray.forEach((item, index) => {\n//     FreqsResult.push(item.freq * 2);\n//     notesObj[item.note] = index + 1;\n//   });\n//   console.log('', FreqsResult);\n//   return FreqsResult;\n// }\n//\n// export function generateJSCadCode(notesInfo) {\n//   let musicboxPins = [];\n//   // norm timing to 15 second\n//   const lastNoteTime = notesInfo[notesInfo.length - 1].time;\n//   if (lastNoteTime > 15) {\n//     notesInfo.forEach((item) => {\n//       item.time = (item.time * 15) / lastNoteTime;\n//     });\n//   }\n//\n//   generateFreqs(notesInfo);\n//   musicboxPins = notesInfo.map(item => `generatePin(${item.time},${notesObj[item.note]})`);\n//   console.log(`\n//   const DOT_WIDTH = 0.6\n//   const RATIO = 0.98\n//   const OFFSET = 2.2 //1.95 is center\n//   const OUTER_RADIUS = 6.6\n//   const INNER_RADIUS = 5.9\n//   function generatePin(noteSec, noteNo) {\n//     return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n//       h: 1,\n//       r: DOT_WIDTH / 2,\n//       center: true\n//     })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n//   }\n//\n//   function main() {\n//     let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n//     let holes = union(${musicboxPins})\n//     return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n//   }`);\n// }\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar node_modules_axios = __webpack_require__(\"mtWM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(node_modules_axios);\n\n// EXTERNAL MODULE: ./node_modules/weixin-js-sdk/index.js\nvar weixin_js_sdk = __webpack_require__(\"fxnj\");\nvar weixin_js_sdk_default = /*#__PURE__*/__webpack_require__.n(weixin_js_sdk);\n\n// CONCATENATED MODULE: ./src/_common/js/wx_share.js\n\n\n\n\nvar wx_share_reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\nvar wx_share_prepareShareConfig = function prepareShareConfig() {\n  return new promise_default.a(function (resolve, reject) {\n    axios_default.a.post('//api.musixise.com/api/v1/wechat/getTicket?url=' + encodeURIComponent(window.location.href.split('#')[0]), '', wx_share_reqConfig).then(function (res) {\n      // alert(`before # url: ${window.location.href.split('#')[0]}`);\n      // alert(`full path: ${window.location.href}`);\n      // alert(JSON.stringify(res.data.data));\n      weixin_js_sdk_default.a.config({\n        debug: false,\n        appId: res.data.data.appId,\n        timestamp: res.data.data.timestamp,\n        nonceStr: res.data.data.nonceStr,\n        signature: res.data.data.signature,\n        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage']\n      });\n      weixin_js_sdk_default.a.ready(function () {\n        // wx.config\n        resolve(weixin_js_sdk_default.a);\n      });\n    }, function () {\n      reject('wx.config');\n    });\n  });\n};\n\n// \nvar wx_share_prepareShareContent = function prepareShareContent(_ref) {\n  var title = _ref.title,\n      desc = _ref.desc,\n      fullPath = _ref.fullPath,\n      imgUrl = _ref.imgUrl;\n\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  var link = fullPath;\n  weixin_js_sdk_default.a.onMenuShareTimeline({\n    title: title,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n  weixin_js_sdk_default.a.onMenuShareAppMessage({\n    title: title,\n    desc: desc,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n};\n\n// \n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // \n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n// EXTERNAL MODULE: ./node_modules/swiper/dist/css/swiper.css\nvar swiper = __webpack_require__(\"v2ns\");\nvar swiper_default = /*#__PURE__*/__webpack_require__.n(swiper);\n\n// EXTERNAL MODULE: ./node_modules/vue-slider-component/dist/index.js\nvar dist = __webpack_require__(\"GDE4\");\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/vue-awesome-swiper/dist/vue-awesome-swiper.js\nvar vue_awesome_swiper = __webpack_require__(\"7QTg\");\nvar vue_awesome_swiper_default = /*#__PURE__*/__webpack_require__.n(vue_awesome_swiper);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBMaker.vue\n\nvar NMBMaker_Tone = __webpack_require__(\"ZnLv\");\n\n\n\n\n\n\n\n\nvar touchIdKeyMap = {}; //touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nvar MINI_KEY_LENGTH = 200; // px\nvar extendBtnsTimeout = void 0;\n\nvar piano = new NMBMaker_Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  // 'baseUrl': '/static/audio/'\n  'baseUrl': '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster();\n\n// var plucky = new Tone.PluckSynth().toMaster()\n\nvar SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width;\nvar SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nvar tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nvar bouncepart = [];\n\nvar recordStartTime = 0;\n\nvar isLinger = true; //\nvar replayInterval = undefined; //progressbarsetinterval\nvar playOffset = 0; //bar\nvar lingerOffset = 0; //bar\nvar PROGRESS_INTERVAL_TIME = 0.1; //0.1\nvar tutorOnceEnter = false;\nvar tutorTimeout = [];\n/* harmony default export */ var NMBMaker = ({\n  components: {\n    swiper: vue_awesome_swiper[\"swiper\"],\n    swiperSlide: vue_awesome_swiper[\"swiperSlide\"],\n    vueSlider: dist_default.a\n  },\n  data: function data() {\n    return {\n      portraitMode: true,\n      activeNote: {},\n      recordPart: [], //current record part\n      recordParts: [], //each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: false,\n      alertAppear: false,\n      bouncing: false,\n      tutorSession: 0,\n      handClass: '', //hand or clickhand\n      tutorClass: '', //hand positioning in different session\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block'\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)'\n        },\n        tooltipDir: 'left',\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)',\n          transform: 'rotate(90deg)',\n          transformOrigin: 'right',\n          position: 'relative',\n          left: '-.2rem',\n          top: '0.9rem'\n        },\n        formatter: function formatter(value) {\n          if (value) {\n            return (value / 10).toFixed(1) + 's/20s';\n          } else {\n            return '0.0s/20s';\n          }\n        },\n\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)'\n        }\n      }\n    };\n  },\n\n  watch: {\n    playing: function playing(val) {\n      var _this = this;\n\n      console.log('playing status', val);\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(function () {\n          _this.vuetimeline += 1;\n          if (_this.vuetimeline >= 200) {\n            _this.toggleReplay();\n            _this.vuetimeline = 0;\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000);\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval);\n      }\n    }\n  },\n  computed: {\n    swiper: function swiper() {\n      return this.$refs.pianoRoll.swiper;\n    },\n    activePartIndex: function activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1;\n    },\n    lastActivePartIndex: function lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1;\n    }\n  },\n  methods: {\n    load: function load() {},\n    toggleReplay: function toggleReplay() {\n      console.log(1);\n      this.playing = !this.playing;\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0;\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100;\n        console.log('');\n        this.confirmRecordPart(0);\n        console.log('kokokoko');\n        recordStartTime = performance.now();\n        console.log('activeOffsetTime' + this.vuetimeline * 100);\n        NMBMaker_Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000); // TODO:in case < context.currentTime\n      } else {\n        console.log('');\n        NMBMaker_Tone.Transport.stop(0); // TODOstopstartstop..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart: function handleNoteStart(noteId) {\n      var noteTime = 0;\n      // console.log('down', e.target.id)\n      piano.triggerAttack(noteId);\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1);\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now();\n          lingerOffset = this.vuetimeline * 100;\n          isLinger = false;\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset;\n      } else {\n        noteTime = performance.now() - playOffset;\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000;\n        this.recordPart.push({\n          'note': noteId,\n          'time': +(noteTime / 1000).toFixed(4)\n        });\n      } else {\n        this.vuetimeline = 20 * 10; // 0.1s => 200\n        console.log('cannot record more than 20 seconds');\n      }\n    },\n    handleNoteEnd: function handleNoteEnd(noteId) {\n      piano.triggerRelease(noteId);\n      this.$set(this.activeNote, noteId, 0);\n    },\n    touchNoteStartHandler: function touchNoteStartHandler(e) {\n      console.log(e);\n      //touchmove\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id; // TODO:  touchstartchangetouches///\n      this.handleNoteStart(e.target.id);\n    },\n    touchNoteEndHandler: function touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id);\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]); // TODO:  touchendchangetouches,\n    },\n    confirmRecordPart: function confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex);\n        if (this.recordParts[this.lastActivePartIndex] && this.recordParts[this.lastActivePartIndex].length) {\n          //track,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex]);\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          try {\n            tonepart[this.lastActivePartIndex].dispose(); //dispose\n          } catch (e) {}\n        }\n        tonepart[this.lastActivePartIndex] = new NMBMaker_Tone.Part(function (time, value) {\n          //new\n          piano.triggerAttackRelease(value.note, \"8n\", time);\n        }, this.recordPart).start(0);\n        this.recordParts[this.lastActivePartIndex] = this.recordPart;\n        this.recordPart = [];\n      } else {\n        console.log('');\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex;\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0; // this is kind of separate for progress view\n        recordStartTime = 0;\n      }\n      isLinger = true;\n    },\n    clearRecordPart: function clearRecordPart(trackNum) {\n      console.log('cleaning track ' + trackNum);\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = [];\n        this.vuetimeline = 0;\n        isLinger = true;\n        this.playing = false;\n        NMBMaker_Tone.Transport.stop(0);\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, []);\n        if (tonepart[trackNum]) {\n          try {\n            tonepart[trackNum].dispose(); //dispose\n          } catch (e) {}\n          tonepart[trackNum] = undefined; //\n        }\n      } else {\n        console.log('track ' + trackNum + ' has no content');\n      }\n    },\n    checkBouncibility: function checkBouncibility() {\n      this.confirmRecordPart(0);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(function (noteInfo) {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        return RealMagic(bouncepart);\n      }\n      return true;\n    },\n    bounceProject: function bounceProject() {\n      var _this2 = this;\n\n      this.confirmRecordPart(0);\n      console.log(this);\n      console.log(tonepart);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(function (noteInfo) {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        //TODO, semi done\n        this.bouncing = true;\n        this.$store.dispatch('BOUNCE_PROJECT', {\n          record: bouncepart,\n          info: {\n            title: '',\n            content: 'default',\n            cover: 'default'\n          }\n        }).then(function (id) {\n          console.log('successfully bounced');\n          _this2.bouncing = false;\n          _this2.$toast('');\n          _this2.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id: id\n            }\n          });\n        }).catch(function (err) {\n          _this2.bouncing = false;\n          _this2.$toast('');\n        });\n      } else {\n        this.$toast('');\n      }\n    },\n    mapNoteTimeToColor: function mapNoteTimeToColor(t) {\n      return magic_mapNoteTimeToColor(t);\n    },\n    mapNoteMidiToLength: function mapNoteMidiToLength(m) {\n      return magic_mapNoteMidiToLength(m);\n    },\n    adjustTimeline: function adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc');\n        this.toggleReplay(); //ref this is TODO\n      } else {\n        isLinger = true; //\n      }\n    },\n    onMiniKeyboardScroll: function onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY);\n    },\n    onMiniKeyboardStart: function onMiniKeyboardStart(e) {\n      console.log(e);\n    },\n    keng: function keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e); //e.touches is array like object\n      for (var i = 0; i <= e.changedTouches.length - 1; i++) {\n        var a = document.elementFromPoint(e.changedTouches[i].clientX, e.changedTouches[i].clientY);\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (touchIdKeyMap[e.changedTouches[i].identifier] && touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')) {\n            //touch\n            console.log(touchIdKeyMap);\n            this.handleNoteStart(a.getAttribute('id'));\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2);\n            this.handleNoteStart(a.getAttribute('id'));\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else {\n            console.log(3);\n            //\n          }\n        } else {\n          console.log('');\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined;\n        }\n      }\n    },\n    btnStart: function btnStart(e) {\n      var _this3 = this;\n\n      console.log(e);\n      extendBtnsTimeout = setTimeout(function () {\n        //show extend buttons\n        _this3.showExtendBtns = true;\n      }, 200);\n    },\n    btnEnd: function btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout);\n      var a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        //\n        if (this.checkBouncibility()) {\n          this.bounceProject();\n        } else {\n          this.alertAppear = true;\n        }\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //\n        this.toggleReplay();\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        //hide extend buttons\n        this.showExtendBtns = false;\n      }\n    },\n    tutorStart: function tutorStart() {\n      //01,23track45,\n      this.tutorSession = 1;\n      this.$toast('');\n      tutorOnceEnter = setTimeout(this.tutorProgress, 3000);\n      // setTimeout(()=>{this.tutorSession=2},3000)\n      // setTimeout(()=>{this.tutorSession=3;this.swiper.slidePrev()},5000)\n      // setTimeout(()=>{this.swiper.slideNext()},7000)\n      // setTimeout(()=>{this.tutorSession=4},8500)\n      // setTimeout(()=>{this.vuetimeline=120},9500)\n      // setTimeout(()=>{this.vuetimeline=0},10500)\n      // setTimeout(()=>{this.tutorSession=5},12000)\n      // setTimeout(()=>{this.showExtendBtns = true},13000)\n      // setTimeout(()=>{this.showExtendBtns=false},15000)\n      // setTimeout(()=>{this.tutorSession=0},16000)\n    },\n    tutorProgress: function tutorProgress() {\n      var _this4 = this;\n\n      clearTimeout(tutorOnceEnter);\n      console.log('??????????');\n      this.tutorSession += 1;\n      console.log(this.tutorSession);\n      switch (this.tutorSession) {\n        case 1:\n          this.clearTutorTimeout();\n          this.$toast(',');\n          break;\n        case 2:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; //clickhand\n          this.tutorClass = 'tutor2start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; //clickhand\n            _this4.tutorClass = 'tutor2end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.vuetimeline = 120;_this4.handClass = 'hand';\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.vuetimeline = 0;_this4.handClass = 'hidehand';\n          }, 2500));\n          break;\n        case 3:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; //clickhand\n          this.tutorClass = 'tutor3start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; //clickhand\n            _this4.tutorClass = 'tutor3end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; //clickhand\n            _this4.tutorClass = 'tutor3end';\n          }, 800));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 1000));\n          break;\n        case 4:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; //clickhand\n          this.tutorClass = 'tutor4start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; //clickhand\n            _this4.tutorClass = 'tutor4end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; //clickhand\n            _this4.tutorClass = 'tutor4start';\n            _this4.showExtendBtns = true;\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 2500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.showExtendBtns = false;\n          }, 3000));\n          break;\n        case 5:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; //clickhand\n          this.tutorClass = 'tutor5start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; //clickhand\n            _this4.tutorClass = 'tutor5end';\n          }, 1200));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.swiper.slidePrev();\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.swiper.slideNext();_this4.handClass = 'hidehand';\n          }, 2500));\n          break;\n        case 6:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; //clickhand\n          this.tutorClass = 'tutor6start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; //clickhand\n            _this4.tutorClass = 'tutor6end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; //clickhand\n            _this4.tutorClass = 'tutor6end';\n          }, 800));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 1500));\n          break;\n        default:\n          this.tutorSession = 0;\n          break;\n      }\n    },\n    clearTutorTimeout: function clearTutorTimeout() {\n      this.showExtendBtns = false;\n      tutorTimeout.forEach(function (v) {\n        return clearTimeout(v);\n      });\n      tutorTimeout = [];\n    }\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n\n    var self = this;\n    NMBMaker_Tone.Transport.cancel();\n    tonepart = [];\n    bouncepart = [];\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    this.PARTNUM = 3;\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd: function transitionEnd(e) {\n          console.log('3', this.activeIndex); // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex;\n          self.confirmRecordPart(!isLinger);\n        }\n      }\n    };\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        fullPath: '' + location.origin + location.pathname + '#/new-music-box-maker',\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        // alert(`welcome${res.data.data.realname}`)\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace(\n      // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n      'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone(tonepart);\n    next();\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n    // pointer events\n    this.tutorStart();\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-98a39902\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\nvar NMBMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{class:['keys',_vm.tutorSession===8?'tutorial-highlight':''],on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{class:['keyshadow',_vm.tutorSession===8?'tutorial-highlight':'']}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",class:[(_vm.tutorSession===5||_vm.tutorSession===6)?'tutorial-highlight':''],on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({class:[_vm.tutorSession===2?'tutorial-highlight':''],on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",class:[(_vm.tutorSession===3||_vm.tutorSession===4)?'tutorial-highlight':''],on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"\")])])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bouncing),expression:\"bouncing\"}],staticClass:\"mask\"},[_c('p',[_vm._v(\"...\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession>0),expression:\"tutorSession>0\"}],staticClass:\"hint-mask\",attrs:{\"id\":\"tutorial-mask\"},on:{\"touchend\":_vm.tutorProgress}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===2),expression:\"tutorSession===2\"}],staticClass:\"hint-text\",attrs:{\"id\":\"timeline-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===3),expression:\"tutorSession===3\"}],staticClass:\"hint-text\",attrs:{\"id\":\"play-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"/\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===4),expression:\"tutorSession===4\"}],staticClass:\"hint-text\",attrs:{\"id\":\"longpress-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"/\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===5),expression:\"tutorSession===5\"}],staticClass:\"hint-text\",attrs:{\"id\":\"swipe-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===6),expression:\"tutorSession===6\"}],staticClass:\"hint-text\",attrs:{\"id\":\"clear-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.handClass!='hidehand'),expression:\"handClass!='hidehand'\"}],class:[_vm.tutorClass],attrs:{\"id\":\"tutorhand\"}},[_c('div',{class:[_vm.handClass]})])],1)}\nvar NMBMaker_staticRenderFns = []\nvar NMBMaker_esExports = { render: NMBMaker_render, staticRenderFns: NMBMaker_staticRenderFns }\n/* harmony default export */ var components_NMBMaker = (NMBMaker_esExports);\n// CONCATENATED MODULE: ./src/components/NMBMaker.vue\nfunction NMBMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"wxSa\")\n}\nvar NMBMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBMaker___vue_template_functional__ = false\n/* styles */\nvar NMBMaker___vue_styles__ = NMBMaker_injectStyle\n/* scopeId */\nvar NMBMaker___vue_scopeId__ = \"data-v-98a39902\"\n/* moduleIdentifier (server only) */\nvar NMBMaker___vue_module_identifier__ = null\nvar NMBMaker_Component = NMBMaker_normalizeComponent(\n  NMBMaker,\n  components_NMBMaker,\n  NMBMaker___vue_template_functional__,\n  NMBMaker___vue_styles__,\n  NMBMaker___vue_scopeId__,\n  NMBMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBMaker = (NMBMaker_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/common/countButton.vue\n\n/* harmony default export */ var countButton = ({\n  // https://vuejs.org/v2/guide/components.html#Props\n  props: {\n    initCount: Number,\n    initActive: Boolean,\n    iconImg: String,\n    onClickCall: {\n      type: Function,\n      default: function _default() {\n        return function () {\n          console.log('tap tap in count Button');\n        };\n      }\n    }\n  },\n  computed: {\n    style: function style() {\n      // return 'background-color: ' + this.hovering ? this.color: 'red';\n    }\n  },\n  data: function data() {\n    return {\n      currentActiveCount: 0,\n      currentActive: false\n    };\n  },\n\n  watch: {},\n  created: function created() {\n    this.currentActive = this.initActive;\n    this.currentActiveCount = this.currentActive ? this.initCount : this.initCount + 1;\n  },\n  mounted: function mounted() {},\n  updated: function updated() {},\n\n  methods: {\n    updateButton: function updateButton() {\n      // if (this.currentActive) {\n      //   this.currentActiveCount -= 1;\n      // } else {\n      //   this.currentActiveCount += 1;\n      // }\n      this.currentActive = !this.currentActive;\n      this.onClickCall();\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd02150e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\nvar countButton_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar countButton_staticRenderFns = []\nvar countButton_esExports = { render: countButton_render, staticRenderFns: countButton_staticRenderFns }\n/* harmony default export */ var common_countButton = (countButton_esExports);\n// CONCATENATED MODULE: ./src/components/common/countButton.vue\nfunction countButton_injectStyle (ssrContext) {\n  __webpack_require__(\"8GxT\")\n}\nvar countButton_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar countButton___vue_template_functional__ = false\n/* styles */\nvar countButton___vue_styles__ = countButton_injectStyle\n/* scopeId */\nvar countButton___vue_scopeId__ = \"data-v-fd02150e\"\n/* moduleIdentifier (server only) */\nvar countButton___vue_module_identifier__ = null\nvar countButton_Component = countButton_normalizeComponent(\n  countButton,\n  common_countButton,\n  countButton___vue_template_functional__,\n  countButton___vue_styles__,\n  countButton___vue_scopeId__,\n  countButton___vue_module_identifier__\n)\n\n/* harmony default export */ var components_common_countButton = (countButton_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBViewer.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\nvar musicPart = undefined;\n\n/* harmony default export */ var NMBViewer = ({\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      workIntroAppear: false,\n      controlPanalAppear: false,\n      titleUpdateAppear: false,\n      playing: false,\n      userId: 0,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: ''\n    };\n  },\n\n  computed: {\n    project: function project() {\n      return this.$store.state.recordProject;\n    },\n    projectInfo: function projectInfo() {\n      return this.$store.state.recordProjectInfo;\n    }\n  },\n  methods: {\n    load: function load() {},\n    loadMusicById: function loadMusicById() {\n      var _this = this;\n\n      console.log('hehe', this.$store.state);\n      var id = this.$store.state.route.query.id;\n\n      if (id) {\n        //id\n        console.log('mmm', id);\n        this.$store.dispatch('FETCH_MBOX', { id: id }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n          var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + _this.$store.state.route.query.id;\n          wx_share_prepareShareContent({\n            title: 'MUSIXISE',\n            desc: '\\u6765\\u542C' + _this.projectInfo.userVO.realname + '\\u7684\\u4F5C\\u54C1-' + _this.projectInfo.title,\n            // fullPath:location.href.split('#')[0],\n            fullPath: fullPath,\n            imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n          });\n        });\n      } else {\n        // \n        this.$store.dispatch('FETCH_MBOX', { id: 50 }).then(function () {\n          console.log('workPart', _this.project);\n          console.log('work info', _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n        });\n      }\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project, !this.playing);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      }).then(function () {}).catch(function (err) {\n        // alert(JSON.stringify(err))\n      });\n    },\n    updateWorkTitle: function updateWorkTitle() {\n      var _this2 = this;\n\n      api_updateWorkTitle({\n        id: this.$store.state.route.query.id,\n        title: this.newWorkTitle\n      });\n      this.finalNewWorkTitle = this.newWorkTitle;\n      var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + this.$store.state.route.query.id;\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '\\u6765\\u542C' + this.projectInfo.userVO.realname + '\\u7684\\u4F5C\\u54C1-' + this.newWorkTitle,\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n      setTimeout(function () {\n        _this2.titleUpdateAppear = false;\n      }, 300);\n    },\n    redirectToMaker: function redirectToMaker() {\n      this.$router.push({\n        path: '/new-music-box-maker'\n        // query: {\n        //   id\n        // }\n      });\n    },\n    redirectToMusixiser: function redirectToMusixiser(id) {\n      if (id) {\n        this.$router.push({\n          path: '/musixiser',\n          query: {\n            id: id\n          }\n        });\n      }\n    },\n    purchaseItem: function purchaseItem() {\n      console.log('you are about to purchase ' + this.projectInfo.id);\n      this.$toast('');\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = res.data.data.userId;\n        // alert(`welcome${res.data.data.realname}`)\n        // if (!this.project) {\n        self.loadMusicById();\n        // }\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    setTimeout(function () {\n      _this3.workIntroAppear = true;\n    }, 4500);\n    setTimeout(function () {\n      _this3.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c579ca46\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\nvar NMBViewer_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})]),_vm._v(\" \"),_c('div',{class:[_vm.playing?'':'not-playing'],attrs:{\"id\":\"mb-shiner\"}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\",on:{\"click\":function($event){_vm.userId === _vm.projectInfo.userId?_vm.titleUpdateAppear=true:_vm.titleUpdateAppear=false}}},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.redirectToMusixiser(_vm.projectInfo.userVO.userId)}}},[_c('img',{attrs:{\"src\":_vm.projectInfo.userVO.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.userVO.realname))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar NMBViewer_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar NMBViewer_esExports = { render: NMBViewer_render, staticRenderFns: NMBViewer_staticRenderFns }\n/* harmony default export */ var components_NMBViewer = (NMBViewer_esExports);\n// CONCATENATED MODULE: ./src/components/NMBViewer.vue\nfunction NMBViewer_injectStyle (ssrContext) {\n  __webpack_require__(\"QwWM\")\n}\nvar NMBViewer_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBViewer___vue_template_functional__ = false\n/* styles */\nvar NMBViewer___vue_styles__ = NMBViewer_injectStyle\n/* scopeId */\nvar NMBViewer___vue_scopeId__ = \"data-v-c579ca46\"\n/* moduleIdentifier (server only) */\nvar NMBViewer___vue_module_identifier__ = null\nvar NMBViewer_Component = NMBViewer_normalizeComponent(\n  NMBViewer,\n  components_NMBViewer,\n  NMBViewer___vue_template_functional__,\n  NMBViewer___vue_styles__,\n  NMBViewer___vue_scopeId__,\n  NMBViewer___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBViewer = (NMBViewer_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-konva/lib/vue-konva.min.js\nvar vue_konva_min = __webpack_require__(\"rc1w\");\nvar vue_konva_min_default = /*#__PURE__*/__webpack_require__.n(vue_konva_min);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MBRollMaker.vue\n\n\n\nwindow.Tone = __webpack_require__(\"ZnLv\");\n\n\n\n\n// import countButton from './common/countButton'\n\nvar MBRollMaker_musicPart = undefined;\n\n\nvar musicScale = [0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24, 26, 28, 29];\nvar colors = ['#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#edda28', '#f7943d'];\nvar last_i = -1;\nvar last_j = -1;\nwindow.schedules = [];\nvar aInterval = undefined;\nvar TIME_PER_NOTE = 0.25;\nvar FULL_NOTE_NUM = 80; //80 notes, then if set 20 per page, it would be 4 pages\nvar NOTE_NUM_PER_SECTOR = 10;\nvue_esm[\"a\" /* default */].use(vue_konva_min_default.a);\nvar synth = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]'\n}, {\n  'release': 1,\n  // 'baseUrl': '/static/audio/'\n  'baseUrl': '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster();\nvar pulseOptions = {\n  oscillator: {\n    type: \"triangle\"\n  },\n  envelope: {\n    release: 0.07\n  }\n};\nvar MBRollMaker_piano = new Tone.PolySynth(18, Tone.Synth, pulseOptions).toMaster();\n/* harmony default export */ var MBRollMaker = ({\n  components: {\n    // countButton,\n  },\n  data: function data() {\n    return {\n      NOTE_CATEGORY: 18,\n      ONE_PAGE_NOTE_NUM: 20,\n      NOTE_NUM_PER_SECTOR: NOTE_NUM_PER_SECTOR,\n      tempo: 120,\n      configKonva: {\n        width: 0,\n        height: 0\n      },\n      configNoteRect: {},\n      activeJ: -1, // highlight timeline\n      sector: 1, // 2*4-1,74\n      rectArray: [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []],\n      alertAppear: false\n    };\n  },\n\n  computed: {},\n  methods: {\n    setupCanvas: function setupCanvas() {\n      var _this = this;\n\n      var docElem = document.documentElement;\n      this.configKonva = {\n        width: docElem.getBoundingClientRect().width - 60,\n        height: window.innerHeight\n      };\n      this.configNoteRect = {\n        width: (docElem.getBoundingClientRect().width - 60) / this.NOTE_CATEGORY,\n        height: window.innerHeight / this.ONE_PAGE_NOTE_NUM,\n        fill: '#fff',\n        stroke: '#d2ecfc',\n        strokeWidth: 1\n      };\n\n      var _loop = function _loop(j) {\n        var _loop2 = function _loop2(sector) {\n          // console.log(111)\n          Tone.Transport.scheduleRepeat(function (time) {\n            _this.activeJ = j + (sector - 1) * _this.NOTE_NUM_PER_SECTOR;\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / _this.tempo, (j + (sector - 1) * _this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / _this.tempo);\n        };\n\n        for (var sector = 0; sector <= _this.sector; sector++) {\n          _loop2(sector);\n        }\n      };\n\n      for (var j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n        _loop(j);\n      }\n    },\n    setupRect: function setupRect(i, j, sector) {\n      var fill = '';\n      // split NOTE_NUM_PER_SECTOR and this.NOTE_NUM_PER_SECTOR for ANIMATION!!!\n      if (j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR == this.activeJ && this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]) {\n        // active current note: lighter color\n        fill = colors[i];\n      } else if (j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR == this.activeJ && !this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]) {\n        // inactive current light blue\n        fill = '#f0f8ff';\n      } else if (this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]) {\n        // active non-current note\n        fill = colors[i];\n      } else {\n        // incative non-current note\n        fill = '#fff';\n      }\n      return extends_default()({}, this.configNoteRect, {\n        x: i * this.configKonva.width / this.NOTE_CATEGORY,\n        y: j * this.configKonva.height / this.ONE_PAGE_NOTE_NUM,\n        fill: fill\n      });\n    },\n    handleTouchRect: function handleTouchRect(i, j, sector) {\n      // console.log(`trigger ${i},${j+(sector-1)*this.NOTE_NUM_PER_SECTOR}`)\n      // make sound\n      synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5);\n      // this.rectArray[i][j] = !this.rectArray[i][j] // this is how to assign a two dim array in vue 2.0...\n      var newRow = this.rectArray[i].slice(0);\n      newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR];\n      this.$set(this.rectArray, i, newRow);\n      // schedule/clearEvent\n      if (newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) {\n        //schedule\n        schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat(function (time) {\n          synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5);\n        }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n        console.log('schedule ' + i + ',' + (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n      } else {\n        // clear\n        console.log('clear ' + i + ',' + (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n        Tone.Transport.clear(schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n      }\n      // update last\n      last_i = i;\n      last_j = j;\n    },\n    handleMoveRect: function handleMoveRect(i, j, sector) {\n      if (j != last_j) {\n        // take this as real note, store arrange\n        this.handleTouchRect(i, j, sector);\n      } else if (i != last_i && j == last_j) {\n        // take this as testing note, no store, no arrange\n        // make sound\n        synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5);\n\n        // operate current note view\n        var newRow = this.rectArray[i].slice(0);\n        newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR];\n        this.$set(this.rectArray, i, newRow);\n\n        // operate current note scheduling\n        if (newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) {\n          // to activate the note\n          schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat(function (time) {\n            // this.activeJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n            // console.log('bibibi', this.activeJ)\n            synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5);\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n          console.log('schedule ' + i + ',' + (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n        } else {\n          Tone.Transport.clear(schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n          console.log('clear ' + i + ',' + (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n        }\n        // restore last note view\n        var newLastRow = this.rectArray[last_i].slice(0);\n        newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR];\n        this.$set(this.rectArray, last_i, newLastRow);\n        // restore last note scheduling\n        if (newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) {\n          schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat(function (time) {\n            // this.activeJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n            // console.log('bibibi', this.activeJ)\n            synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[last_i], \"midi\"), 0.5);\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n          console.log('reschedule ' + last_i + ',' + (last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n        } else {\n          console.log('reclear ' + last_i + ',' + (last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR), schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n          Tone.Transport.clear(schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]);\n        }\n        // update last\n        last_i = i;\n        last_j = j;\n      } else {\n        // console.log(`ignore ${i},${j}`)\n      }\n    },\n    startloop: function startloop() {\n      Tone.Transport.start('+0.1');\n    },\n    stoploop: function stoploop() {\n      Tone.Transport.stop();\n    },\n    minusTempo: function minusTempo() {\n      this.tempo -= 10;\n      Tone.Transport.bpm.rampTo(this.tempo, .1);\n    },\n    addTempo: function addTempo() {\n      this.tempo += 10;\n      Tone.Transport.bpm.rampTo(this.tempo, .1);\n    },\n    scrolldown: function scrolldown() {\n      var _this2 = this;\n\n      clearInterval(aInterval);\n      this.sector == FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 1 ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR - 2 : this.NOTE_NUM_PER_SECTOR = 1; // for animation,\n      this.sector <= FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 2 ? this.sector += 1 : ''; // this line is real scroll down\n      // below is for animation\n      aInterval = setInterval(function () {\n        _this2.NOTE_NUM_PER_SECTOR += 1;\n        if (_this2.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    scrollup: function scrollup() {\n      var _this3 = this;\n\n      clearInterval(aInterval);\n      this.sector == 1 ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR + 2 : this.NOTE_NUM_PER_SECTOR = 20; // for animation,\n      this.sector >= 2 ? this.sector -= 1 : '';\n      aInterval = setInterval(function () {\n        _this3.NOTE_NUM_PER_SECTOR -= 1;\n        if (_this3.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    checkBouncibility: function checkBouncibility() {\n      var result = [];\n      for (var i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (var j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], \"midi\").toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            });\n          }\n        }\n      }\n      result.sort(function (a, b) {\n        return 0 + a.time - b.time;\n      });\n      return RealMagic(result);\n    },\n    bounceProject: function bounceProject() {\n      var _this4 = this;\n\n      // finally get something like [{note:'A4',time:0},{note:'A5',time:0.3227}]\n      var result = [];\n      for (var i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (var j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], \"midi\").toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            });\n          }\n        }\n      }\n      this.$store.dispatch('BOUNCE_PROJECT', {\n        record: result,\n        info: {\n          title: '',\n          content: 'default',\n          cover: 'default'\n        }\n      }).then(function (id) {\n        console.log('successfully bounced');\n        _this4.bouncing = false;\n        _this4.$toast('');\n        _this4.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id: id\n          }\n        });\n      }).catch(function (err) {\n        _this4.bouncing = false;\n        _this4.$toast('');\n      });\n    },\n    submitProject: function submitProject() {\n      if (this.checkBouncibility()) {\n        alert(1);\n        this.bounceProject();\n      } else {\n        alert(2);\n        this.alertAppear = true;\n      }\n    },\n    clearProject: function clearProject() {}\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    this.setupCanvas();\n    schedules = JSON.parse(stringify_default()(this.rectArray));\n\n    // regular setup\n    var self = this;\n    Tone.Transport.cancel();\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        fullPath: '' + location.origin + location.pathname + '#/new-music-box-roll',\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        // alert(`welcome${res.data.data.realname}`)\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace(\n      // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n      'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {},\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-503ec609\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBRollMaker.vue\nvar MBRollMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('v-stage',{attrs:{\"config\":_vm.configKonva}},[_c('v-layer',[_vm._l((_vm.NOTE_CATEGORY),function(i){return _vm._l((_vm.ONE_PAGE_NOTE_NUM),function(j){return _c('v-rect',{attrs:{\"config\":_vm.setupRect(i-1,j-1,_vm.sector)},on:{\"touchstart\":function($event){_vm.handleTouchRect(i-1,j-1,_vm.sector)},\"touchmove\":function($event){_vm.handleMoveRect(i-1,j-1,_vm.sector)}}})})})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"control-panal\"},[_c('div',{on:{\"touchstart\":_vm.startloop}},[_vm._v(\">\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.stoploop}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.scrollup}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.scrolldown}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"16px\",\"line-height\":\"46px\"},on:{\"touchstart\":_vm.minusTempo}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"16px\",\"line-height\":\"46px\"},on:{\"touchstart\":_vm.addTempo}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.clearProject}},[_vm._v(\"x\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.submitProject}},[_vm._v(\"\")])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"\")])])])])])],1)}\nvar MBRollMaker_staticRenderFns = []\nvar MBRollMaker_esExports = { render: MBRollMaker_render, staticRenderFns: MBRollMaker_staticRenderFns }\n/* harmony default export */ var components_MBRollMaker = (MBRollMaker_esExports);\n// CONCATENATED MODULE: ./src/components/MBRollMaker.vue\nfunction MBRollMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"/HIm\")\n}\nvar MBRollMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MBRollMaker___vue_template_functional__ = false\n/* styles */\nvar MBRollMaker___vue_styles__ = MBRollMaker_injectStyle\n/* scopeId */\nvar MBRollMaker___vue_scopeId__ = \"data-v-503ec609\"\n/* moduleIdentifier (server only) */\nvar MBRollMaker___vue_module_identifier__ = null\nvar MBRollMaker_Component = MBRollMaker_normalizeComponent(\n  MBRollMaker,\n  components_MBRollMaker,\n  MBRollMaker___vue_template_functional__,\n  MBRollMaker___vue_styles__,\n  MBRollMaker___vue_scopeId__,\n  MBRollMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MBRollMaker = (MBRollMaker_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-infinite-scroll/vue-infinite-scroll.js\nvar vue_infinite_scroll = __webpack_require__(\"bqTm\");\nvar vue_infinite_scroll_default = /*#__PURE__*/__webpack_require__.n(vue_infinite_scroll);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MusixiserDetail.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\n\n\nvar MusixiserDetail_musicPart = undefined;\n\n/* harmony default export */ var MusixiserDetail = ({\n  directives: {\n    infiniteScroll: vue_infinite_scroll_default.a\n  },\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true\n    };\n  },\n\n  computed: {\n    musixiserInfo: function musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    musixiserWorksObj: function musixiserWorksObj() {\n      return this.$store.state.musixiserWorksObj;\n    }\n  },\n  methods: {\n    loadMusixiserById: function loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      var id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id: id\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore: function loadMore() {\n      var _this = this;\n\n      //will call automatically when enter!\n      var id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.musixiserWorksObj.current);\n      this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n        id: id,\n        page: this.musixiserWorksObj.current ? this.musixiserWorksObj.current + 1 : 1\n      }).then(function () {\n        console.log('2222222', _this.musixiserWorksObj);\n        if (_this.musixiserWorksObj.content.length < _this.musixiserWorksObj.total) {\n          _this.busy = false;\n        }\n      });\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      });\n    },\n    redirectToWork: function redirectToWork(id) {\n      this.$router.push({\n        path: '/new-music-box-viewer',\n        query: {\n          id: id\n        }\n      });\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: 'd',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = _this2.$store.state.route.query.id || res.data.data.userId;\n        self.isMe = self.userId == res.data.data.userId;\n        self.loadMusixiserById();\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd399b5a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MusixiserDetail.vue\nvar MusixiserDetail_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.musixiserWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.userVO.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.userVO.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\": \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.musixiserWorksObj.content.length==0),expression:\"!loading && musixiserWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar MusixiserDetail_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":__webpack_require__(\"SpEx\"),\"alt\":\"\"}})])}]\nvar MusixiserDetail_esExports = { render: MusixiserDetail_render, staticRenderFns: MusixiserDetail_staticRenderFns }\n/* harmony default export */ var components_MusixiserDetail = (MusixiserDetail_esExports);\n// CONCATENATED MODULE: ./src/components/MusixiserDetail.vue\nfunction MusixiserDetail_injectStyle (ssrContext) {\n  __webpack_require__(\"wWKr\")\n}\nvar MusixiserDetail_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MusixiserDetail___vue_template_functional__ = false\n/* styles */\nvar MusixiserDetail___vue_styles__ = MusixiserDetail_injectStyle\n/* scopeId */\nvar MusixiserDetail___vue_scopeId__ = \"data-v-fd399b5a\"\n/* moduleIdentifier (server only) */\nvar MusixiserDetail___vue_module_identifier__ = null\nvar MusixiserDetail_Component = MusixiserDetail_normalizeComponent(\n  MusixiserDetail,\n  components_MusixiserDetail,\n  MusixiserDetail___vue_template_functional__,\n  MusixiserDetail___vue_styles__,\n  MusixiserDetail___vue_scopeId__,\n  MusixiserDetail___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MusixiserDetail = (MusixiserDetail_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MyFav.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\n\n\nvar MyFav_musicPart = undefined;\n\n/* harmony default export */ var MyFav = ({\n  directives: {\n    infiniteScroll: vue_infinite_scroll_default.a\n  },\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true\n    };\n  },\n\n  computed: {\n    musixiserInfo: function musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    favWorksObj: function favWorksObj() {\n      return this.$store.state.favWorksObj;\n    }\n  },\n  methods: {\n    loadMusixiserById: function loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      var id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id: id\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore: function loadMore() {\n      var _this = this;\n\n      //will call automatically when enter!\n      var id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.favWorksObj.current);\n      this.$store.dispatch('FETCH_FAV_WORKS', {\n        id: id,\n        page: this.favWorksObj.current ? this.favWorksObj.current + 1 : 1\n      }).then(function () {\n        console.log('2222222', _this.favWorksObj);\n        if (_this.favWorksObj.content.length < _this.favWorksObj.total) {\n          _this.busy = false;\n        }\n      });\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      });\n    },\n    redirectToWork: function redirectToWork(id) {\n      if (id) {\n        this.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id: id\n          }\n        });\n      }\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: 'd',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = _this2.$store.state.route.query.id || res.data.data.userId;\n        self.isMe = self.userId == res.data.data.userId;\n        self.loadMusixiserById();\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c75542ca\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MyFav.vue\nvar MyFav_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.favWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.user.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.user.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\": \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.favWorksObj.content.length==0),expression:\"!loading && favWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar MyFav_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":__webpack_require__(\"SpEx\"),\"alt\":\"\"}})])}]\nvar MyFav_esExports = { render: MyFav_render, staticRenderFns: MyFav_staticRenderFns }\n/* harmony default export */ var components_MyFav = (MyFav_esExports);\n// CONCATENATED MODULE: ./src/components/MyFav.vue\nfunction MyFav_injectStyle (ssrContext) {\n  __webpack_require__(\"xJnU\")\n}\nvar MyFav_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MyFav___vue_template_functional__ = false\n/* styles */\nvar MyFav___vue_styles__ = MyFav_injectStyle\n/* scopeId */\nvar MyFav___vue_scopeId__ = \"data-v-c75542ca\"\n/* moduleIdentifier (server only) */\nvar MyFav___vue_module_identifier__ = null\nvar MyFav_Component = MyFav_normalizeComponent(\n  MyFav,\n  components_MyFav,\n  MyFav___vue_template_functional__,\n  MyFav___vue_styles__,\n  MyFav___vue_scopeId__,\n  MyFav___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MyFav = (MyFav_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Recommend.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\nvar Recommend_musicPart = undefined;\n\n/* harmony default export */ var Recommend = ({\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      searching: false,\n      loading: false,\n      recommendations: {}\n    };\n  },\n\n  computed: {},\n  methods: {\n    load: function load() {\n      getRecommendations().then(function (res) {\n        console.log('index:', res);\n      });\n    },\n    search: function search() {}\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // cookie\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = res.data.data.userId;\n        // alert(`welcome${res.data.data.realname}`)\n        // if (!this.project) {\n        self.loadMusicById();\n        // }\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //auth codetokencookie\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this.loading = false;\n    }, 2000);\n    setTimeout(function () {\n      _this.workIntroAppear = true;\n    }, 4500);\n    setTimeout(function () {\n      _this.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-268f8d33\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Recommend.vue\nvar Recommend_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar Recommend_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar Recommend_esExports = { render: Recommend_render, staticRenderFns: Recommend_staticRenderFns }\n/* harmony default export */ var components_Recommend = (Recommend_esExports);\n// CONCATENATED MODULE: ./src/components/Recommend.vue\nfunction Recommend_injectStyle (ssrContext) {\n  __webpack_require__(\"RLy1\")\n}\nvar Recommend_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar Recommend___vue_template_functional__ = false\n/* styles */\nvar Recommend___vue_styles__ = Recommend_injectStyle\n/* scopeId */\nvar Recommend___vue_scopeId__ = \"data-v-268f8d33\"\n/* moduleIdentifier (server only) */\nvar Recommend___vue_module_identifier__ = null\nvar Recommend_Component = Recommend_normalizeComponent(\n  Recommend,\n  components_Recommend,\n  Recommend___vue_template_functional__,\n  Recommend___vue_styles__,\n  Recommend___vue_scopeId__,\n  Recommend___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Recommend = (Recommend_Component.exports);\n\n// CONCATENATED MODULE: ./src/router/index.js\n\n\n\n// import MBMaker from '@/components/MBMaker';\n\n// import MBAuthor from '@/components/MBAuthor';\n\n// import MBViewer from '@/components/MBViewer';\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vue_router_esm[\"a\" /* default */]);\n\n/* harmony default export */ var router = (new vue_router_esm[\"a\" /* default */]({\n  // mode: 'history', // avoid hash in url\n  routes: [{\n    path: '/',\n    name: 'HelloWorld',\n    component: src_components_HelloWorld\n  }, {\n    path: '/new-music-box-maker',\n    name: 'NMBMaker',\n    component: src_components_NMBMaker\n  }, {\n    path: '/new-music-box-roll',\n    name: 'MBRoll',\n    component: src_components_MBRollMaker\n  }, {\n    path: '/new-music-box-viewer',\n    name: 'NMBViewer',\n    component: src_components_NMBViewer\n  }, {\n    path: '/musixiser',\n    name: 'MusixiserDetail',\n    component: src_components_MusixiserDetail\n  }, {\n    path: '/myfav',\n    name: 'MyFav',\n    component: src_components_MyFav\n  }, {\n    path: '/recommend',\n    name: 'Recommend',\n    component: src_components_Recommend\n  }]\n}));\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n// import VueTouch from 'vue-touch';\n\n\n\n\n\n\n// Vue.use(VueTouch, { name: 'v-touch' });\nvue_esm[\"a\" /* default */].use(lib_default.a, { defaultType: 'center', duration: 2500, wordWrap: false, width: 'auto' });\nvue_esm[\"a\" /* default */].config.productionTip = false;\nvar store = createStore();\nObject(vuex_router_sync[\"sync\"])(store, router);\n\n/* eslint-disable no-new */\nnew vue_esm[\"a\" /* default */]({\n  el: '#app',\n  router: router,\n  store: store,\n  template: '<App/>',\n  components: { App: src_App }\n});\n\n/***/ }),\n\n/***/ \"O/d9\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"QwWM\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"RLy1\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"SpEx\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/oops.7bb4a06.png\";\n\n/***/ }),\n\n/***/ \"e195\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"h4Ia\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"v2ns\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"wWKr\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"wxSa\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"xJnU\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.3023e4ac0874f5881ad9.js","import * as Cookies from 'js-cookie';\n// import Vue from 'vue';\nconst axios = require('axios');\n\naxios.interceptors.response.use((res) => {\n  if (res.data.errcode !== '0') {\n    alert(res.data.resmsg);\n    return Promise.reject(res);\n  }\n  return res;\n});\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\n// const tokenObj = { access_token: '' };\n// TODO:cause 500?????? just cuz this few lines???\n\n\nexport function getUserInfo(wxcode) {\n  const tokenInCookie = Cookies.get('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = `${tokenInCookie}`;\n    // tokenObj.access_token = tokenInCookie;\n    return axios.get('//api.musixise.com/api/v1/user/getInfo', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new Promise((resolve, reject) => {\n      axios.post(`//api.musixise.com/api/v1/user/oauth/wechat/callback?code=${wxcode}`, '', reqConfig)\n        .then((res) => {\n          if (res.data.errcode === 20001) {\n            reject(20001); // return\n          }\n          const serviceToken = res.data.data.id_token;\n          reqConfig.headers.Authorization = `${serviceToken}`;\n          // tokenObj.access_token = serviceToken;\n          Cookies.set('serviceToken', serviceToken, {\n            expires: 7,\n          });\n          return axios.get('//api.musixise.com/api/v1/user/getInfo', reqConfig);\n        }, () => {\n          reject();\n        })\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n  // !tokenInCookie&&!wxcodeapp.js, \n  return false;\n}\n\nexport function uploadRecord(record, info) {\n  return new Promise((resolve, reject) => {\n    const formReqConfig = { headers: { 'Content-Type': 'multipart/form-data', processData: false, Authorization: reqConfig.headers.Authorization } };\n    const blob = new Blob([JSON.stringify(record)]);\n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      const fd = new FormData();\n      fd.append('fname', 'test.txt');\n      fd.append('data', event.target.result);\n      // fd.append('access_token', tokenObj.access_token);\n      let postFix = '';\n      try { // important, othereise dispatch won't be stoped here...\n        postFix = await axios.post('//api.musixise.com/api/v1/uploadAudio', fd, formReqConfig);\n      } catch (e) {\n        console.log(e);\n        reject(e);\n      }\n      const workURL = `${postFix.data.data}`;\n      const param = {\n        // ...tokenObj,\n        ...info, // title,content.cover\n        url: workURL,\n      };\n      console.log(workURL);\n      return axios.post('//api.musixise.com/api/v1/work/create', JSON.stringify(param), reqConfig)\n         .then((res) => {\n           resolve(res.data.data);\n         })\n         .catch((err) => {\n           reject(err);\n         });\n    };\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nexport function fetchMbox(id) {\n  return axios.get(`//api.musixise.com/api/v1/work/detail/${id}`, reqConfig);\n}\nexport function fetchMusixiser(id) {\n  return axios.get(`//api.musixise.com/api/v1/user/detail/${id}`, reqConfig);\n}\nexport function fetchWorksFromMusixiser(id, page) {\n  return axios.get(`//api.musixise.com/api/v1/work/getListByUid/${id}?page=${page}&size=15`, reqConfig);\n}\nexport function fetchFavWorks(id, page) {\n  return axios.get(`//api.musixise.com/api/v1/favorite/getWorkList/${id}?page=${page}&size=15`, reqConfig);\n}\nexport function toggleFavSong({ workId, status }) {\n  return axios.post('//api.musixise.com/api/v1/favorite/create', JSON.stringify({ workId, status }), reqConfig);\n    // .then((res) => { console.log(res); })\n    // .catch((err) => { console.log(err); });\n}\nexport function updateWorkTitle({ id, title }) {\n  return axios.put(`//api.musixise.com/api/v1/work/updateWork/${id}`, JSON.stringify({ title }), reqConfig);\n    // .then((res) => { console.log(res); })\n    // .catch((err) => { console.log(err); });\n}\nexport function getRecommendations() {\n  return axios.post('//api.musixise.com/api/v1/home', '', reqConfig);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/api.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fcaae542\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fcaae542\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export function getUrlParam(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\nexport function getUrlParam1(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/util.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b801b49\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b801b49\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3b801b49\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","const Tone = require('tone');\n\nTone.Transport.cancel();\nconst SAME_NOTE_INTERVAL = 1; // 1\nlet musicPreview;\n\nlet oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\n// const mbox = new Tone.PolySynth(6, Tone.Synth, {\n//   oscillator: {\n//     partials: [0, 2, 3, 4],\n//   },\n// }).toMaster();\n// const mbox = new Tone.Sampler({\n//   C4: 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   A4: 'A4.[mp3|ogg]',\n//   C5: 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   A5: 'A5.[mp3|ogg]',\n//   C6: 'C6.[mp3|ogg]',\n// }, {\n//   release: 1,\n//   baseUrl: '/static/audio/',\n// }).toMaster();\n\nconst mbox = new Tone.Sampler({\n  B3: 'B3.[mp3|ogg]',\n  E4: 'E4.[mp3|ogg]',\n  G4: 'G4.[mp3|ogg]',\n  B4: 'B4.[mp3|ogg]',\n  'C#5': 'Cs5.[mp3|ogg]',\n  E5: 'E5.[mp3|ogg]',\n  G5: 'G5.[mp3|ogg]',\n  B5: 'B5.[mp3|ogg]',\n  'C#6': 'Cs6.[mp3|ogg]',\n}, {\n  release: 1,\n  // baseUrl: '/static/audio/mbox/',\n  baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/',\n}).toMaster();\n\nexport function RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(JSON.stringify(items));\n  const tasksObj = {};\n  items.forEach((item) => {\n    //* 2 cuz print mbox need 1 octave higher.\n    const itemNoteFreq = parseInt(Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) { tasksObj[itemNoteFreq] = []; }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  const taskTypes = Object.keys(tasksObj); // [659,784,...]  freq array, object.keys\n  const taskTimeArrays = Object.values(tasksObj); // [[2.66][1.0295,1.39,2.6713]] \n  const machines = []; // init with existing types, will add more machines\n  const groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('18');\n    return false;\n  }\n\n  taskTimeArrays.forEach((timeArray) => {\n    const final = [];\n    timeArray.forEach((time, j) => {\n      const test = []; // final finaltest\n      let allPreviousOccupied = false;\n      let successFound = false;\n      if (j === 0) {\n        final.push(1); // 1\n      } else {\n        let counter = j;\n        while (counter >= 1 && !allPreviousOccupied) { // TODO: -1 or 0\n          counter -= 1;\n          if ((time - timeArray[counter] >= SAME_NOTE_INTERVAL)\n            && test.indexOf(final[counter]) === -1) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([...new Set(final)].length === [...new Set(test)].length) {\n              // finalsetunique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if ((counter === 0 && !successFound) || allPreviousOccupied) {\n          final.push(Math.max(...final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach((group, index) => {\n    let count = 0;\n    while (count <= Math.max(...group) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    const lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('18');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //,\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nexport function mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  // const COLOR1 = [151, 255, 241];\n  // const COLOR2 = [98, 166, 223];\n  // const COLOR3 = [154, 124, 255];\n  const COLOR1 = [151, 255, 241];\n  const COLOR2 = [137, 228, 217];\n  const COLOR3 = [143, 123, 242];\n  const TIME_MAX = 20;\n  let rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [COLOR1[0] + ((time * (COLOR2[0] - COLOR1[0])) / (TIME_MAX / 2)),\n      COLOR1[1] + ((time * (COLOR2[1] - COLOR1[1])) / (TIME_MAX / 2)),\n      COLOR1[2] + ((time * (COLOR2[2] - COLOR1[2])) / (TIME_MAX / 2))];\n  }\n  rgb = [COLOR2[0] + ((time * (COLOR3[0] - COLOR2[0])) / (TIME_MAX / 2)),\n    COLOR2[1] + ((time * (COLOR3[1] - COLOR2[1])) / (TIME_MAX / 2)),\n    COLOR2[2] + ((time * (COLOR3[2] - COLOR2[2])) / (TIME_MAX / 2))];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return `rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`;\n}\nexport function mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 50) / (110 - 40))) + 0.2}`; // 75 is rem to px\n}\n\nexport function clearTone(parts) {\n  // Tone.js\n  if (parts && parts.length) {\n    //  dispose\n    parts.forEach((part) => {\n      try {\n        part.dispose();\n      } catch (e) {\n      //\n      }\n    });\n  }\n  if (musicPreview) {\n    // musicPreview\n    try {\n      musicPreview.dispose();\n    } catch (e) {\n      //\n    }\n  }\n}\nexport function preview(items, start) {\n  console.log('current state', Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) { mbox.triggerAttack('E6', 0, 0); oncePlayed = true; }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    musicPreview = new Tone.Part(((time, value) => {\n      mbox.triggerAttackRelease(value.note, '4n', time);\n    }), items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 21; // 20s\n    Tone.Transport.start('+0.01', 0);\n  } else {\n    Tone.Transport.stop(0);\n  }\n  // try {\n  //   Tone.Transport.stop(0);\n  //   console.log(1);\n  //   // Tone.Part.removeAll();\n  //   Tone.Transport.clear();\n  //   console.log(2);\n  //   music.dispose();\n  //   music = undefined;\n  //   console.log(3);\n  // } catch (e) {\n  //   //\n  // } finally {\n  //   music = new Tone.Part(((time, value) => {\n  //     mbox.triggerAttackRelease(value.note, '8n', time);\n  //   }), items).start(0, 0);\n  //   Tone.Transport.start('+0.01', 0);\n  // }\n}\n\n// back up version 1 maker script\n// export function generateFreqs(notesInfo) {\n//   notesObj = {};\n//   notesArray = [];\n//   FreqsResult = [];\n//   console.log(notesInfo);\n//   notesInfo.forEach((item) => {\n//     // console.log(item.note)\n//     // console.log(notesObj)\n//     if (!(item.note in notesObj)) {\n//       console.log('!!');\n//       notesObj[item.note] = 1;\n//       notesArray.push({\n//         note: item.note,\n//         freq: Tone.Frequency(item.note).toFrequency(),\n//       });\n//     }\n//   });\n//   notesArray.sort((a, b) => (a.freq - b.freq));\n//   console.log(`${notesArray.length}`);\n//   notesArray.forEach((item, index) => {\n//     FreqsResult.push(item.freq * 2);\n//     notesObj[item.note] = index + 1;\n//   });\n//   console.log('', FreqsResult);\n//   return FreqsResult;\n// }\n//\n// export function generateJSCadCode(notesInfo) {\n//   let musicboxPins = [];\n//   // norm timing to 15 second\n//   const lastNoteTime = notesInfo[notesInfo.length - 1].time;\n//   if (lastNoteTime > 15) {\n//     notesInfo.forEach((item) => {\n//       item.time = (item.time * 15) / lastNoteTime;\n//     });\n//   }\n//\n//   generateFreqs(notesInfo);\n//   musicboxPins = notesInfo.map(item => `generatePin(${item.time},${notesObj[item.note]})`);\n//   console.log(`\n//   const DOT_WIDTH = 0.6\n//   const RATIO = 0.98\n//   const OFFSET = 2.2 //1.95 is center\n//   const OUTER_RADIUS = 6.6\n//   const INNER_RADIUS = 5.9\n//   function generatePin(noteSec, noteNo) {\n//     return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n//       h: 1,\n//       r: DOT_WIDTH / 2,\n//       center: true\n//     })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n//   }\n//\n//   function main() {\n//     let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n//     let holes = union(${musicboxPins})\n//     return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n//   }`);\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/magic.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-98a39902\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-98a39902\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-98a39902\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fd02150e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./countButton.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./countButton.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fd02150e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./countButton.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fd02150e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c579ca46\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBViewer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBViewer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c579ca46\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBViewer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c579ca46\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-503ec609\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MBRollMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MBRollMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-503ec609\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MBRollMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-503ec609\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MBRollMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fd399b5a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MusixiserDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MusixiserDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fd399b5a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MusixiserDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fd399b5a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MusixiserDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c75542ca\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MyFav.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyFav.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c75542ca\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MyFav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c75542ca\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MyFav.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-268f8d33\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-268f8d33\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-268f8d33\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Recommend.vue\n// module id = null\n// module chunks = ","import {\n  // fetchUser,\n  // fetchItems,\n  // fetchIdsByType,\n  fetchMbox,\n  uploadRecord,\n  fetchMusixiser,\n  fetchWorksFromMusixiser,\n  fetchFavWorks,\n} from '../_common/js/api';\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\nexport default {\n  BOUNCE_PROJECT: ({ commit, state }, { record, info }) => uploadRecord(record, info),\n    // \n         // uploadRecord(record, info).then(() => {\n    //   // commit('SET_BOUNCE_PROJECT', { record, info });\n    //   // commit store\n    // });\n\n  FETCH_MBOX: ({ commit, state }, { id }) =>\n  new Promise((resolve, reject) => {\n    // id\n    fetchMbox(id)\n      .then((project) => {\n        console.log('xxi', project.data.data.url);\n        console.log('xxi', project.data.data.userId);\n        fetchMusixiser(project.data.data.userId)\n          .then((musixiser) => {\n            console.log('work musixiser info: ', musixiser.data.data);\n            project.data.data.userVO = musixiser.data.data; // \n            const request = new XMLHttpRequest();\n            request.open('GET', project.data.data.url, true);\n            request.send(null);\n            request.onreadystatechange = function () {\n              if (request.readyState === 4 && request.status === 200) {\n                const type = request.getResponseHeader('Content-Type');\n                if (type.indexOf('text') !== -1) {\n                  commit('SET_ID_PROJECT', { record: JSON.parse(request.responseText), info: project.data.data });\n                  resolve();\n                }\n              }\n            };\n          });\n      });\n  }),\n  FETCH_MUSIXISER: ({ commit, state }, { id }) =>\n  new Promise((resolve, reject) => {\n    // id\n    fetchMusixiser(id)\n      .then((musixiser) => {\n        console.log('musixiser info: ', musixiser.data.data);\n        commit('SET_MUSIXISER', { musixiserInfo: musixiser.data.data });\n        resolve();\n      });\n  }),\n  FETCH_WORKS_FROM_MUSIXISER: ({ commit, state }, { id, page }) =>\n  new Promise((resolve, reject) => {\n    // id\n    fetchWorksFromMusixiser(id, page)\n      .then((works) => {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_MUSIXISER_WORKS', { musixiserWorksObj: works.data.data });\n        resolve();\n      });\n  }),\n  FETCH_FAV_WORKS: ({ commit, state }, { id, page }) =>\n  new Promise((resolve, reject) => {\n    // id\n    fetchFavWorks(id, page)\n      .then((works) => {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_FAV_WORKS', { favWorksObj: works.data.data });\n        resolve();\n      });\n  }),\n//   // ensure data for rendering given list type\n//   FETCH_LIST_DATA: ({ commit, dispatch, state }, { type }) => {\n//     commit('SET_ACTIVE_TYPE', { type });\n//     return fetchIdsByType(type)\n//       .then(ids => commit('SET_LIST', { type, ids }))\n//       .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n//   },\n//\n//   // ensure all active items are fetched\n//   ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => dispatch('FETCH_ITEMS', {\n//     ids: getters.activeIds,\n//   }),\n//\n//   FETCH_ITEMS: ({ commit, state }, { ids }) => {\n//     // on the client, the store itself serves as a cache.\n//     // only fetch items that we do not already have, or has expired (3 minutes)\n//     const now = Date.now();\n//     ids = ids.filter((id) => {\n//       const item = state.items[id];\n//       if (!item) {\n//         return true;\n//       }\n//       if (now - item.__lastUpdated > 1000 * 60 * 3) {\n//         return true;\n//       }\n//       return false;\n//     });\n//     if (ids.length) {\n//       return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n//     }\n//     return Promise.resolve();\n//   },\n//\n//   FETCH_USER: ({ commit, state }, { id }) => (state.users[id]\n//       ? Promise.resolve(state.users[id])\n//       : fetchUser(id).then(user => commit('SET_USER', { id, user }))),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue';\n\nexport default {\n  SET_USER_INFO: (state, { type }) => { // \n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: (state, { type, ids }) => { // \n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: (state, { items }) => { // \n    items.forEach((item) => {\n      if (item) {\n        Vue.set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: (state, { record }) => { // \n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: (state, { record, info }) => { // \n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_MUSIXISER: (state, { musixiserInfo }) => { // \n    state.musixiserInfo = musixiserInfo;\n  },\n  PUSH_MUSIXISER_WORKS: (state, { musixiserWorksObj }) => { // \n    console.log('ccccc', musixiserWorksObj.current);\n    if (+musixiserWorksObj.current === 1) {\n      state.musixiserWorksObj.content = musixiserWorksObj.list;\n    } else {\n      state.musixiserWorksObj.content = state.musixiserWorksObj.content.concat(musixiserWorksObj.list);\n    }\n    state.musixiserWorksObj.total = musixiserWorksObj.total;\n    state.musixiserWorksObj.size = musixiserWorksObj.size;\n    state.musixiserWorksObj.current = musixiserWorksObj.current;\n  },\n  PUSH_FAV_WORKS: (state, { favWorksObj }) => { // \n    console.log('xxxxxxx', favWorksObj);\n    if (+favWorksObj.current === 1) {\n      state.favWorksObj.content = favWorksObj.list;\n    } else {\n      state.favWorksObj.content = state.favWorksObj.content.concat(favWorksObj.list);\n    }\n    state.favWorksObj.total = favWorksObj.total;\n    state.favWorksObj.size = favWorksObj.size;\n    state.favWorksObj.current = favWorksObj.current;\n  },\n  // SET_FINAL_WORK: (state, { type }) => { // \n  //   state.activeType = type;\n  // },\n  // SET_USER: (state, { id, user }) => {\n  //   Vue.set(state.users, id, user || false); /* false means user not found */\n  // },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export default {\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds(state) {\n    const { activeType, itemsPerPage, lists } = state;\n    const page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      const start = (page - 1) * itemsPerPage;\n      const end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems(state, getters) {\n    return getters.activeIds.map(id => state.items[id]).filter(_ => _);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\n\nVue.use(Vuex);\n\nexport function createStore() {\n  return new Vuex.Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: [],\n      },\n      myInfo: {},\n      recordParts: [],\n      recordProject: [],\n      musixiserInfo: {},\n      musixiserWorksObj: { content: [] },\n      favWorksObj: { content: [] },\n    },\n    actions,\n    mutations,\n    getters,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\n<div id=\"app\">\n  <transition :name=\"transitionName\">\n    <router-view/>\n  </transition>\n</div>\n</template>\n\n<script>\n// https://router.vuejs.org/en/advanced/transitions.html\nexport default {\n  name: 'app',\n  data() {\n    return {\n      transitionName:'fade',\n    }\n  },\n  beforeRouteUpdate (to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  },\n};\n</script>\n\n<style>\n\n.lx-toast {\n  rotate: 90deg;\n  transform-origin: left;\n}\n.vue-slider-component .vue-slider-tooltip-wrap.vue-slider-tooltip-left .vue-slider-tooltip:before {\n  border:none !important;\n}\n#app {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height:100%;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  user-select: none;\n  overflow:hidden;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fcaae542\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"app\">\n    <div class=\"m-logo\"></div>\n    <div class=\"redirect-button\" id=\"mb-maker\" @touchstart=\"redirectTo('/new-music-box-maker')\">\n        \n    </div>\n  </div>\n</template>\n\n<script>\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nexport default {\n  name: 'hello',\n  data() {\n    return {\n      msg: 'Welcome to Your Vue.js App',\n    };\n  },\n  methods:{\n    redirectTo(path) {\n      // IMPORTANT keng. authcodeauth\n      // authcookie\n      this.$router.push(path)\n    }\n  },\n  created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            )\n          }\n          alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      )\n    }\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n* {\n  box-sizing: border-box;\n  margin:0;\n  padding:0;\n}\n.app {\n\n  background-color: black;\n}\n.m-logo {\n  position: absolute;\n  width: getRem(200);\n  height: getRem(200);\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background:url('//gw.alicdn.com/tps/TB1pfhUOFXXXXaSaXXXXXXXXXXX-350-350.png') no-repeat center center;\n  background-size: getRem(175) getRem(175);\n  background-color: #ffcc33;\n  border-radius: getRem(25);\n  animation: toupperleftwithsize 4.5s linear;\n  -webkit-animation-fill-mode: forwards;\n  animation-fill-mode: forwards;\n  z-index: 2\n}\n.redirect-button {\n  width:getRem(450);\n  height: getRem(100);\n  padding: getRem(20) getRem(50);\n  background-color: #ffcc33;\n  border-radius:getRem(10);\n  color: gray;\n}\n.redirect-button,#mb-maker {\n  position: absolute;\n  top: 60%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size:.57rem;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      \\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b801b49\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","import axios from 'axios';\nimport wx from 'weixin-js-sdk';\n\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\nexport const prepareShareConfig = () => new Promise((resolve, reject) => {\n  axios.post(`//api.musixise.com/api/v1/wechat/getTicket?url=${encodeURIComponent(window.location.href.split('#')[0])}`, '', reqConfig)\n  .then((res) => {\n    // alert(`before # url: ${window.location.href.split('#')[0]}`);\n    // alert(`full path: ${window.location.href}`);\n    // alert(JSON.stringify(res.data.data));\n    wx.config({\n      debug: false,\n      appId: res.data.data.appId,\n      timestamp: res.data.data.timestamp,\n      nonceStr: res.data.data.nonceStr,\n      signature: res.data.data.signature,\n      jsApiList: [\n        'onMenuShareTimeline',\n        'onMenuShareAppMessage',\n      ],\n    });\n    wx.ready(() => { // wx.config\n      resolve(wx);\n    });\n  }, () => {\n    reject('wx.config');\n  });\n});\n\n  // \nexport const prepareShareContent = ({\n    title,\n    desc,\n    fullPath,\n    imgUrl,\n  }) => {\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  const link = fullPath;\n  wx.onMenuShareTimeline({\n    title,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n  wx.onMenuShareAppMessage({\n    title,\n    desc,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n};\n\n// \n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // \n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/wx_share.js","<script>\nconst Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport * as WxShare from '../_common/js/wx_share'\nimport 'swiper/dist/css/swiper.css'\nimport vueSlider from 'vue-slider-component'\nimport {\n  swiper,\n  swiperSlide\n} from 'vue-awesome-swiper'\nconst touchIdKeyMap = {} //touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nconst MINI_KEY_LENGTH = 200 // px\nlet extendBtnsTimeout\n\nvar piano = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  // 'baseUrl': '/static/audio/'\n  'baseUrl': '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster()\n\n// var plucky = new Tone.PluckSynth().toMaster()\n\nconst SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width\nconst SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nlet tonepart = [] // store all the music parts. (ummm,that's why it's named part...)\nlet bouncepart = []\n\nlet recordStartTime = 0\n\nlet isLinger = true //\nvar replayInterval = undefined //progressbarsetinterval\nlet playOffset = 0 //bar\nlet lingerOffset = 0 //bar\nconst PROGRESS_INTERVAL_TIME = 0.1 //0.1\nlet tutorOnceEnter = false\nlet tutorTimeout = []\nexport default {\n  components: {\n    swiper,\n    swiperSlide,\n    vueSlider,\n  },\n  data() {\n    return {\n      portraitMode: true,\n      activeNote: {},\n      recordPart: [], //current record part\n      recordParts: [], //each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: false,\n      alertAppear: false,\n      bouncing: false,\n      tutorSession:0,\n      handClass:'', //hand or clickhand\n      tutorClass:'', //hand positioning in different session\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block',\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)'\n        },\n        tooltipDir: 'left',\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)',\n          transform: 'rotate(90deg)',\n          transformOrigin: 'right',\n          position:'relative',\n          left: '-.2rem',\n          top: '0.9rem'\n        },\n        formatter(value) {\n          if (value) {\n            return `${(value/10).toFixed(1)}s/20s`\n          } else {\n            return `0.0s/20s`\n          }\n        },\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)'\n        }\n      },\n    }\n  },\n  watch: {\n    playing: function(val) {\n      console.log('playing status', val)\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(() => {\n          this.vuetimeline += 1\n          if (this.vuetimeline >= 200) {\n            this.toggleReplay()\n            this.vuetimeline = 0\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000)\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval)\n      }\n    },\n  },\n  computed: {\n    swiper() {\n      return this.$refs.pianoRoll.swiper\n    },\n    activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1\n    },\n    lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1\n    }\n  },\n  methods: {\n    load() {},\n    toggleReplay() {\n      console.log(1)\n      this.playing = !this.playing\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100\n        console.log('')\n        this.confirmRecordPart(0)\n        console.log('kokokoko')\n        recordStartTime = performance.now();\n        console.log(`activeOffsetTime${this.vuetimeline*100}`)\n        Tone.Transport.start(\"+0.01\", this.vuetimeline * 100 / 1000) // TODO:in case < context.currentTime\n      } else {\n        console.log('')\n        Tone.Transport.stop(0) // TODOstopstartstop..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart(noteId) {\n      let noteTime = 0\n      // console.log('down', e.target.id)\n      piano.triggerAttack(noteId)\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1)\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now()\n          lingerOffset = this.vuetimeline * 100\n          isLinger = false\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset\n      } else {\n        noteTime = performance.now() - playOffset\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000\n        this.recordPart.push({\n          'note': noteId,\n          'time': +(noteTime / 1000).toFixed(4)\n        })\n      } else {\n        this.vuetimeline = 20 * 10 // 0.1s => 200\n        console.log('cannot record more than 20 seconds')\n      }\n    },\n    handleNoteEnd(noteId) {\n      piano.triggerRelease(noteId)\n      this.$set(this.activeNote, noteId, 0)\n    },\n    touchNoteStartHandler(e) {\n      console.log(e)\n      //touchmove\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id // TODO:  touchstartchangetouches///\n      this.handleNoteStart(e.target.id)\n    },\n    touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id)\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]) // TODO:  touchendchangetouches,\n    },\n    confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex)\n        if (this.recordParts[this.lastActivePartIndex] && this.recordParts[this.lastActivePartIndex].length) {\n          //track,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex])\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          try {\n            tonepart[this.lastActivePartIndex].dispose() //dispose\n          } catch (e) {\n\n          }\n        }\n        tonepart[this.lastActivePartIndex] = new Tone.Part(function(time, value) { //new\n          piano.triggerAttackRelease(value.note, \"8n\", time)\n        }, this.recordPart).start(0)\n        this.recordParts[this.lastActivePartIndex] = this.recordPart\n        this.recordPart = []\n      } else {\n        console.log('')\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0 // this is kind of separate for progress view\n        recordStartTime = 0\n      }\n      isLinger = true\n    },\n    clearRecordPart(trackNum) {\n      console.log(`cleaning track ${trackNum}`)\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = []\n        this.vuetimeline = 0\n        isLinger = true\n        this.playing = false;\n        Tone.Transport.stop(0)\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, [])\n        if (tonepart[trackNum]) {\n          try {\n            tonepart[trackNum].dispose() //dispose\n          } catch (e) {\n\n          }\n          tonepart[trackNum] = undefined //\n        }\n      } else {\n        console.log(`track ${trackNum} has no content`)\n      }\n\n    },\n    checkBouncibility() {\n      this.confirmRecordPart(0)\n      bouncepart = []\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(noteInfo => {\n              bouncepart.push(noteInfo.value)\n            })\n          }\n        })\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        return Magic.RealMagic(bouncepart)\n      }\n      return true;\n    },\n    bounceProject() {\n      this.confirmRecordPart(0)\n      console.log(this)\n      console.log(tonepart)\n      bouncepart = []\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(noteInfo => {\n              bouncepart.push(noteInfo.value)\n            })\n          }\n        })\n        bouncepart.sort((a, b) => (0 + a.time - b.time))\n        //TODO, semi done\n        this.bouncing = true;\n        this.$store.dispatch('BOUNCE_PROJECT', {\n          record: bouncepart,\n          info: {\n            title: '',\n            content: 'default',\n            cover: 'default'\n          },\n        }).then(id => {\n          console.log('successfully bounced')\n          this.bouncing = false;\n          this.$toast('')\n          this.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id\n            }\n          })\n        }).catch((err) => {\n          this.bouncing = false;\n          this.$toast('')\n        })\n      } else {\n        this.$toast('')\n      }\n    },\n    mapNoteTimeToColor(t) {\n      return Magic.mapNoteTimeToColor(t)\n    },\n    mapNoteMidiToLength(m) {\n      return Magic.mapNoteMidiToLength(m)\n    },\n    adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc')\n        this.toggleReplay() //ref this is TODO\n      } else {\n        isLinger = true //\n      }\n    },\n    onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY)\n    },\n    onMiniKeyboardStart(e) {\n      console.log(e)\n    },\n    keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e) //e.touches is array like object\n      for (let i = 0; i <= e.changedTouches.length - 1; i++) {\n        const a = document.elementFromPoint(e.changedTouches[i].clientX, e.changedTouches[i].clientY)\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (touchIdKeyMap[e.changedTouches[i].identifier] && touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')) { //touch\n            console.log(touchIdKeyMap)\n            this.handleNoteStart(a.getAttribute('id'))\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier])\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id')\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2)\n            this.handleNoteStart(a.getAttribute('id'))\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id')\n          } else {\n            console.log(3)\n            //\n          }\n        } else {\n          console.log('')\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier])\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined\n        }\n      }\n    },\n    btnStart(e) {\n      console.log(e)\n      extendBtnsTimeout = setTimeout(() => {\n        //show extend buttons\n        this.showExtendBtns = true;\n      }, 200)\n\n    },\n    btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout)\n      const a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY)\n      console.log(a)\n      if (a && a.classList.contains('bounceBtn')) {\n        //\n        if (this.checkBouncibility()) {\n          this.bounceProject()\n        } else {\n          this.alertAppear = true;\n        }\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //\n        this.toggleReplay()\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        //hide extend buttons\n        this.showExtendBtns = false;\n      }\n    },\n    tutorStart() {\n      //01,23track45,\n      this.tutorSession = 1\n      this.$toast('')\n      tutorOnceEnter = setTimeout(this.tutorProgress,3000)\n      // setTimeout(()=>{this.tutorSession=2},3000)\n      // setTimeout(()=>{this.tutorSession=3;this.swiper.slidePrev()},5000)\n      // setTimeout(()=>{this.swiper.slideNext()},7000)\n      // setTimeout(()=>{this.tutorSession=4},8500)\n      // setTimeout(()=>{this.vuetimeline=120},9500)\n      // setTimeout(()=>{this.vuetimeline=0},10500)\n      // setTimeout(()=>{this.tutorSession=5},12000)\n      // setTimeout(()=>{this.showExtendBtns = true},13000)\n      // setTimeout(()=>{this.showExtendBtns=false},15000)\n      // setTimeout(()=>{this.tutorSession=0},16000)\n    },\n    tutorProgress() {\n      clearTimeout(tutorOnceEnter)\n      console.log('??????????')\n      this.tutorSession+=1;\n      console.log(this.tutorSession)\n      switch(this.tutorSession) {\n        case 1:\n          this.clearTutorTimeout()\n          this.$toast(',')\n          break;\n        case 2:\n          this.clearTutorTimeout()\n          this.handClass = 'hand'//clickhand\n          this.tutorClass = 'tutor2start'\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'clickhand'//clickhand\n            this.tutorClass = 'tutor2end'\n          },500))\n          tutorTimeout.push(setTimeout(()=>{this.vuetimeline=120;this.handClass = 'hand'},1500))\n          tutorTimeout.push(setTimeout(()=>{this.vuetimeline=0;this.handClass = 'hidehand'},2500))\n          break;\n        case 3:\n          this.clearTutorTimeout()\n          this.handClass = 'hand'//clickhand\n          this.tutorClass = 'tutor3start'\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'clickhand'//clickhand\n            this.tutorClass = 'tutor3end'\n          },500))\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'hand'//clickhand\n            this.tutorClass = 'tutor3end'\n          },800))\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'hidehand'\n          },1000))\n          break;\n        case 4:\n          this.clearTutorTimeout()\n          this.handClass = 'hand'//clickhand\n          this.tutorClass = 'tutor4start'\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'clickhand'//clickhand\n            this.tutorClass = 'tutor4end'\n          },500))\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'hand'//clickhand\n            this.tutorClass = 'tutor4start'\n            this.showExtendBtns = true;\n          },1500))\n          tutorTimeout.push(setTimeout(()=>{this.handClass = 'hidehand'},2500))\n          tutorTimeout.push(setTimeout(()=>{this.showExtendBtns=false;},3000))\n          break;\n        case 5:\n          this.clearTutorTimeout()\n          this.handClass = 'hand'//clickhand\n          this.tutorClass = 'tutor5start'\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'clickhand'//clickhand\n            this.tutorClass = 'tutor5end'\n          },1200))\n          tutorTimeout.push(setTimeout(()=>{this.swiper.slidePrev();},1500))\n          tutorTimeout.push(setTimeout(()=>{this.swiper.slideNext();this.handClass = 'hidehand'},2500))\n          break;\n        case 6:\n          this.clearTutorTimeout()\n          this.handClass = 'hand'//clickhand\n          this.tutorClass = 'tutor6start'\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'clickhand'//clickhand\n            this.tutorClass = 'tutor6end'\n          },500))\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'hand'//clickhand\n            this.tutorClass = 'tutor6end'\n          },800))\n          tutorTimeout.push(setTimeout(()=>{\n            this.handClass = 'hidehand'\n          },1500))\n          break;\n        default:\n          this.tutorSession = 0;\n          break;\n      }\n    },\n    clearTutorTimeout() {\n      this.showExtendBtns=false;\n      tutorTimeout.forEach(v=>clearTimeout(v))\n      tutorTimeout = []\n    }\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n\n    const self = this\n    Tone.Transport.cancel()\n    tonepart = []\n    bouncepart = []\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    this.PARTNUM = 3\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd: function(e) {\n          console.log('3', this.activeIndex) // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex\n          self.confirmRecordPart(!isLinger)\n        }\n      }\n    }\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    // alert(Cookies.get('serviceToken'))\n    WxShare.prepareShareConfig().then(()=>{\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:'',\n        fullPath:`${location.origin}${location.pathname}#/new-music-box-maker`,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n              // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          // alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-maker')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    Magic.clearTone(tonepart)\n    next()\n  },\n  mounted() {\n    // this.startRecord();\n    // pointer events\n    this.tutorStart()\n  },\n  updated() {\n  }\n};\n</script>\n\n<template>\n<div id=\"container\">\n  <!-- <v-touch @pan=\"onPan\"> -->\n  <div :class=\"['keys',tutorSession===8?'tutorial-highlight':'']\" @touchmove=\"keng\" @touchstart.stop.prevent=\"touchNoteStartHandler\" @touchend.stop.event=\"touchNoteEndHandler\">\n    <!-- using sharp sign => '#' as object key cause syntax error... -->\n    <!-- <div :class=\"['white', 'a', activeNote.A3?'active-note':'']\" id=\"A3\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb3?'active-note':'']\" id=\"Bb3\"></div>\n      <div :class=\"['white', 'b', activeNote.B3?'active-note':'']\" id=\"B3\"></div> -->\n    <div :class=\"['white', 'c', activeNote.C4?'active-note':'']\" id=\"C4\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db4?'active-note':'']\" id=\"Db4\"></div>\n    <div :class=\"['white', 'd', activeNote.D4?'active-note':'']\" id=\"D4\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb4?'active-note':'']\" id=\"Eb4\"></div>\n    <div :class=\"['white', 'e', activeNote.E4?'active-note':'']\" id=\"E4\"></div>\n    <div :class=\"['white', 'f', activeNote.F4?'active-note':'']\" id=\"F4\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb4?'active-note':'']\" id=\"Gb4\"></div>\n    <div :class=\"['white', 'g', activeNote.G4?'active-note':'']\" id=\"G4\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab4?'active-note':'']\" id=\"Ab4\"></div>\n    <div :class=\"['white', 'a', activeNote.A4?'active-note':'']\" id=\"A4\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb4?'active-note':'']\" id=\"Bb4\"></div>\n    <div :class=\"['white', 'b', activeNote.B4?'active-note':'']\" id=\"B4\"></div>\n    <div :class=\"['white', 'c', activeNote.C5?'active-note':'']\" id=\"C5\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db5?'active-note':'']\" id=\"Db5\"></div>\n    <div :class=\"['white', 'd', activeNote.D5?'active-note':'']\" id=\"D5\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb5?'active-note':'']\" id=\"Eb5\"></div>\n    <div :class=\"['white', 'e', activeNote.E5?'active-note':'']\" id=\"E5\"></div>\n    <div :class=\"['white', 'f', activeNote.F5?'active-note':'']\" id=\"F5\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb5?'active-note':'']\" id=\"Gb5\"></div>\n    <div :class=\"['white', 'g', activeNote.G5?'active-note':'']\" id=\"G5\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab5?'active-note':'']\" id=\"Ab5\"></div>\n    <div :class=\"['white', 'a', activeNote.A5?'active-note':'']\" id=\"A5\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb5?'active-note':'']\" id=\"Bb5\"></div>\n    <div :class=\"['white', 'b', activeNote.B5?'active-note':'']\" id=\"B5\"></div>\n    <div :class=\"['white', 'c', activeNote.C6?'active-note':'']\" id=\"C6\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db6?'active-note':'']\" id=\"Db6\"></div>\n    <div :class=\"['white', 'd', activeNote.D6?'active-note':'']\" id=\"D6\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb6?'active-note':'']\" id=\"Eb6\"></div>\n    <div :class=\"['white', 'e', activeNote.E6?'active-note':'']\" id=\"E6\"></div>\n    <div :class=\"['white', 'f', activeNote.F6?'active-note':'']\" id=\"F6\"></div>\n  </div>\n  <div :class=\"['keyshadow',tutorSession===8?'tutorial-highlight':'']\"></div>\n  <div class=\"scroll-container\"></div>\n  <div class=\"semi-piano-roll\" :class=\"[(tutorSession===5||tutorSession===6)?'tutorial-highlight':'']\" @touchmove.stop.prevent>\n    <swiper :options=\"pianoRollSwiperOption\" ref=\"pianoRoll\">\n      <!-- slides -->\n      <swiper-slide v-for=\"n in PARTNUM\">\n        <div class=\"current-piano-roll\">\n          <svg :style=\"{height:'90%',padding:timelineConfig.dotSize/2+'px 0'}\">\n            <defs>\n              \t<filter id=\"glowing\" height=\"400%\" width=\"130%\" x=\"-10%\" y=\"-130%\">\n              \t\t<!-- Thicken out the original shape -->\n              \t\t<feMorphology operator=\"dilate\" radius=\"1\" in=\"SourceAlpha\" result=\"thicken\" />\n\n              \t\t<!-- Use a gaussian blur to create the soft blurriness of the glow -->\n              \t\t<feGaussianBlur in=\"thicken\" stdDeviation=\"2\" result=\"blurred\" />\n\n              \t\t<!-- Change the colour -->\n              \t\t<feFlood flood-color=\"rgb(200,200,255)\" result=\"glowColor\" />\n\n              \t\t<!-- Color in the glows -->\n              \t\t<feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"softGlow_colored\" />\n\n              \t\t<!--\tLayer the effects together -->\n              \t\t<feMerge>\n              \t\t\t<feMergeNode in=\"softGlow_colored\"/>\n              \t\t\t<feMergeNode in=\"SourceGraphic\"/>\n              \t\t</feMerge>\n              \t</filter>\n            </defs>\n            <rect v-if=\"activePartIndex===(PARTNUM-n)\" v-for=\"(item,index) in recordPart\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"mapNoteTimeToColor(item.time)\"\n              filter=\"url(#glowing)\" />\n            <rect v-for=\"(item,index) in recordParts[PARTNUM-n]\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"activePartIndex===(PARTNUM-n)?mapNoteTimeToColor(item.time):'rgb(120,120,120)'\"\n              :filter=\"activePartIndex===(PARTNUM-n)?'url(#glowing)':''\" />\n          </svg>\n          <div class=\"temp\" @click=\"clearRecordPart(PARTNUM-n)\"></div>\n        </div>\n      </swiper-slide>\n      <!-- need the bottom two empty slides to fill whole swiper -->\n      <swiper-slide></swiper-slide>\n      <swiper-slide></swiper-slide>\n    </swiper>\n  </div>\n\n  <div class=\"g-controller\">\n    <vue-slider :class=\"[tutorSession===2?'tutorial-highlight':'']\" v-model=\"vuetimeline\" v-bind=\"timelineConfig\" @callback=\"adjustTimeline\" @drag-end=\"\"></vue-slider>\n    <div class=\"btnContainer\" :class=\"[(tutorSession===3||tutorSession===4)?'tutorial-highlight':'']\" @touchstart.stop.prevent=\"btnStart\" @touchend.stop.event=\"btnEnd\">\n      <div :class=\"[playing?'pauseBtn':'playBtn', 'rotate']\" @click=\"toggleReplay\"></div>\n      <div :class=\"[showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']\">\n        <div class='bounceBtn rotate'></div>\n        <div class='cancelBtn'></div>\n      </div>\n    </div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"alert-mask\" v-show=\"alertAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          \n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"alertAppear=false\"></span>\n          <span class=\"btn confirm\" @click=\"bounceProject\"></span>\n        </div>\n      </div>\n    </div>\n  </transition>\n  <!-- </v-touch> -->\n  <div class=\"mask\" v-show=\"bouncing\">\n    <p>...</p>\n  </div>\n  <div class=\"hint-mask\" id=\"tutorial-mask\" v-show=\"tutorSession>0\" @touchend=\"tutorProgress\">\n    <!-- <transition name=\"tutor1\"><div></div></transition> -->\n    <div v-show=\"tutorSession===2\" class=\"hint-text\" id=\"timeline-hint\"><h3></h3><p></p></div>\n    <div v-show=\"tutorSession===3\" class=\"hint-text\" id=\"play-hint\"><h3></h3><p>/</p></div>\n    <div v-show=\"tutorSession===4\" class=\"hint-text\" id=\"longpress-hint\"><h3></h3><p>/</p></div>\n    <div v-show=\"tutorSession===5\" class=\"hint-text\" id=\"swipe-hint\"><h3></h3><p></p></div>\n    <div v-show=\"tutorSession===6\" class=\"hint-text\" id=\"clear-hint\"><h3></h3><p></p></div>\n  </div>\n  <div id=\"tutorhand\" :class=\"[tutorClass]\" v-show=\"handClass!='hidehand'\">\n    <div :class=\"[handClass]\"></div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n#tutorhand {\n  position: absolute;\n  width:getRem(96);\n  height:getRem(98);\n  // transform:rotate(90deg);\n  // background-color:white;\n  z-index:500;\n  transition:background 0.05s ease,transform 1s linear;\n  &.tutor2start {top:.5rem;right:.8rem;transition:none;}\n  &.tutor2end {top:.5rem;right:.8rem;transform:translateY(5rem);}\n  &.tutor3start {bottom:.1rem;right:.6rem;transition:none;}\n  &.tutor3end {bottom:.1rem;right:.6rem;}\n  &.tutor4start {bottom:.1rem;right:.6rem;transition:none;}\n  &.tutor4end {bottom:.1rem;right:.6rem;}\n  &.tutor5start {top:2rem;right:3.5rem;transition:none;}\n  &.tutor5end {top:2rem;right:3.5rem;transform:translateX(1rem);}\n  &.tutor6start {bottom:.1rem;right:3.5rem;transition:none;}\n  &.tutor6end {bottom:.1rem;right:3.5rem;}\n}\n// .longclickhand {transform:rotate(90deg) translateY(1rem);background:url('../assets/tutorial/handlongclick.svg') no-repeat;background-size:contain}\n.hand { position:absolute;width:100%;height:100%;transform:rotate(90deg);background:url('../assets/tutorial/hand.svg') no-repeat;background-size:contain;}\n.clickhand { position:absolute;width:100%;height:100%;transform:rotate(90deg);background:url('../assets/tutorial/handclick.svg') no-repeat;background-size:contain}\n#tutorial-mask {\n  .hint-text {\n    color:white;\n    text-align: right;\n  }\n}\n.tutorial-highlight {\n  z-index:200;\n  pointer-events: none;\n}\n.g-controller {\n    position: absolute;\n    width: getRem(42);\n    height: 100%;\n    padding-top: getRem(44);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    right: 0.5rem;\n    // pointer-events: none;\n    // .timeline {\n    //     height: 90%;\n    //     width: getRem(16);\n    //     background-color: rgb(110,113,158);\n    //     .progress {\n    //         height: 5%;\n    //         background-color: rgb(69,106,255);\n    //     }\n    //     .indicator {\n    //         position: relative;\n    //         width: getRem(42);\n    //         height: getRem(42);\n    //         border-radius: getRem(21);\n    //         border: 4px;\n    //         border-color: yellow;\n    //         background-color: #fff;\n    //         right: getRem(13);\n    //     }\n    // }\n    .btnContainer {\n        position: relative;\n        width: getRem(84);\n        height: getRem(84);\n        margin-top: 0.3rem;\n        .playBtn {\n            z-index: 2;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            border-radius: getRem(42);\n            background: url('../assets/play.svg') center center no-repeat;\n            background-size: getRem(32);\n            background-color: rgb(69,106,255);\n        }\n        .pauseBtn {\n            z-index: 2;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            border-radius: getRem(42);\n            background: url('../assets/pause.svg') center center no-repeat;\n            background-size: getRem(32);\n            background-color: rgb(69,106,255);\n        }\n        .bounceBtn {\n            position: absolute;\n            width: getRem(84);\n            height: getRem(84);\n            border-radius: getRem(42);\n            left:getRem(310);\n            background: url('../assets/check.svg') center center no-repeat;\n            // background-size: getRem(32);\n        }\n        .cancelBtn {\n            position: absolute;\n            width: getRem(84);\n            height: getRem(84);\n            border-radius: getRem(42);\n            background: url('../assets/cancel.svg') center center no-repeat;\n            // background-size: getRem(32);\n        }\n        .extendBtns {\n            // this element is within rotate, everything is opposite\n            position: absolute;\n            height: getRem(84);\n            border-radius: getRem(42);\n            overflow: hidden;\n            right: -1px;\n            z-index: 1;\n            transition: width 1s;\n            background: linear-gradient(to right, rgb(254, 64, 64),rgb(142, 122, 239),rgb(69,106,255) 80%);\n        }\n        .extendBtnsShow {\n            width: getRem(690);\n        }\n        .extendBtnsHide {\n            width: getRem(84);\n        }\n    }\n}\n.scroll-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    background: url('../assets/pianolid.png') no-repeat;\n    background-size:getRem(46) 100%;\n    // background-color:black;\n    // transform: rotate(90deg);\n    width: getRem(46);\n    height: 100%;\n    left: getRem(380);\n}\n.keyshadow {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  // background: url('../assets/pianolid.png') no-repeat;\n  background: linear-gradient(to left, rgba(28,28,28,.92) 0%, rgba(48,48,48,.65) 10%,rgba(118,118,118,.1) 40%,rgba(0,0,0,0) 100%);\n  pointer-events: none;\n  // transform: rotate(90deg);\n  width: getRem(388);\n  height: 100%;\n  width: getRem(388);\n  left: 0;\n}\n.temp {\n    width: 0.7rem;\n    height: 0.7rem;\n    border-radius: 0.35rem;\n    margin: 0.5rem 0 0;\n    background: url('../assets/delete.svg') center center no-repeat;\n    background-size: getRem(32);\n    background-color: #8e7aef;\n}\n\n#container {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(19,19,21);\n}\nh2 {\n    font-size: 20px;\n    color: #2c3e50;\n}\n\n* {\n    user-select: none;\n    margin: 0;\n    padding: 0;\n}\n\n.container {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n\n.keys {\n    // position: absolute;  //make whole keys appear\n    //  adjust white and black heights influence all key layout\n    height: 100%;\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    float: left;\n    /* padding-right:getRem(347); */\n    box-sizing: border-box;\n}\n.semi-piano-roll {\n    top: 0;\n    width: getRem(328);\n    position: fixed;\n    right: 0;\n    height: 100%;\n    // background-color: rgb(19,19,21);\n    .swiper-container {\n        height: 100%;\n    }\n    .current-piano-roll {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        padding-top: getRem(44);\n        padding-left: getRem(18);\n        svg {\n            bottom: getRem(92);\n            height: 100%;\n            width: 100%;\n        }\n    }\n}\n\n.general-controller {\n    display: flex;\n    width: 2.5rem;\n    position: fixed;\n    right: 0;\n    height: 100%;\n    background: linear-gradient(90deg, rgba(40,40,40,.5) 0%, rgba(40,40,40,.8) 100%);\n    .funcBtn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: getRem(100);\n        height: getRem(220);\n        border-radius: getRem(10);\n        box-sizing: border-box;\n        &.record {\n            background-color: #b70411;\n            .recordHint {\n                width: getRem(50);\n                height: getRem(50);\n                background-color: white;\n                border-radius: 50%;\n            }\n            &.active {\n                background-color: red;\n                border: 1px solid white;\n            }\n        }\n        &.play {\n            background-color: #098244;\n            .playHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/play.svg') center center;\n                background-size: cover;\n            }\n            .stopHint {\n                width: getRem(45);\n                height: getRem(45);\n                background-color: white;\n                border-radius: 10%;\n            }\n            &.active {\n                background-color: #0aca0a;\n                border: 1px solid white;\n            }\n        }\n        &.undo {\n            background-color: #a4af00;\n            .undoHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/undo.svg') center center;\n                background-size: cover;\n            }\n            &:active {\n                background-color: #e3f300;\n                // border: 1px solid white;\n            }\n        }\n        &.bounce {\n            background-color: black;\n            .bounceHint {\n                width: getRem(50);\n                height: getRem(50);\n                background: url('../assets/bounce.svg') center center;\n                background-size: cover;\n            }\n            &.active {\n                background-color: green;\n                border: 1px solid white;\n            }\n        }\n    }\n}\n.general-controller-enter-active,\n.general-controller-leave-active {\n    transition: all 0.5s ease;\n}\n.general-controller-enter,\n.general-controller-leave-to {\n    transform: translateX(3.5rem);\n}\n\n.progressBar {\n    position: fixed;\n    width: getRem(750);\n}\n\n/* piano keyboard layout css  */\n\n.white {\n    width: getRem(388);\n    height: 5.56%;\n    z-index: 1;\n    // border-left: 1px solid #bbb;\n    // border-bottom: 1px solid #bbb;\n    // border-radius: 0 0 5px 5px;\n    // box-shadow: 1px 0 0 rgba(80, 80, 80, 0.8) inset, 0 0 5px #ccc inset, 0 0 3px rgba(0, 0, 0, 0.2);\n    box-shadow: 0 0 1px rgba(65, 65, 65, 0.5) inset, 0 0 2px rgba(211, 211, 211, 0.5) inset;\n    // background: linear-gradient(to left, rgba(28,28,28,.92) 0%, rgba(48,48,48,.65) 10%,rgba(118,118,118,.1) 40%,rgba(0,0,0,0) 100%);\n    background-color:white;\n    &.active-note {\n        box-shadow: 2px 0 3px rgba(0, 0, 0, 0.1) inset, -5px 5px 20px rgba(0, 0, 0, 0.2) inset, 0 0 3px rgba(0, 0, 0, 0.2);\n        // background: linear-gradient(to left, #555 0%, #ddd 40%, #eee 100%);\n        background:linear-gradient(to left, white,rgb(236,236,236));\n    }\n}\n\n.black {\n    position: relative;\n    width: getRem(200);\n    height: getRem(50);\n    margin-top: getRem(-50);\n    top: getRem(25);\n    // height: 4.3%; \n    // margin-top: -4.3%;\n    // top: 2.15%;\n    z-index: 2;\n    border: 2px solid #000;\n    border-radius: getRem(8) 0px 0px getRem(8);\n    // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -5px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 2px 4px rgba(0, 0, 0, 0.5);\n    // background: linear-gradient(45deg, #222 0%, #555 100%);\n    background:url('../assets/blackkey.png') center center no-repeat;\n    background-size:cover;\n    &.active-note {\n        // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -2px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 1px 2px rgba(0, 0, 0, 0.5);\n        // background: linear-gradient(to right, #444 0%, #222 100%);\n        background:url('../assets/blackkeydown.png') center center no-repeat;\n        background-size:cover;\n    }\n}\n\n/* mask layout */\n\n.mask {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 100;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color:white;\n    p {\n      font-size:.57rem;\n      font-weight:200;\n      transform: rotate(90deg);\n    }\n}\n.hint-mask {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color:white;\n  .hint-text {\n    transform:rotate(90deg);text-align: right;\n  }\n  p {\n    font-size:.43rem;\n    font-weight:200;\n  }\n  h3 {\n    font-size:.57rem;\n    font-weight:400;\n  }\n  #timeline-hint {position: absolute;top: 2rem;right: 1rem;}\n  #play-hint {position: absolute;bottom: 2rem;right: 1rem;}\n  #longpress-hint {position: absolute;bottom: 4rem;right: -1rem;}\n  #swipe-hint {position: absolute;top: 2rem;right: 4rem;}\n  #clear-hint {position: absolute;bottom: 2rem;right: 4rem;}\n}\n.fadein {\n    animation: fadein 1s;\n    animation-fill-mode: forwards;\n}\n\n.fadeout {\n    animation: fadeout 1s;\n    animation-fill-mode: forwards;\n}\n@keyframes fadein {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n@keyframes fadeout {\n    from {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n\n.hide {\n    display: none;\n}\n\n.rotate {\n    transform: rotate(90deg);\n}\n#alert-mask {\n  position: absolute;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);display: flex;align-items: center;justify-content: center;\n  .mb-dialog {\n    position: relative;rotate:90deg;width: getRem(570);padding-top:getRem(75); border-radius:getRem(50);height:getRem(344);background-color:rgba(255,255,255,.96);display:flex;flex-direction:column;\n    .title {flex:1;padding:0 getRem(77); display:flex;align-items:flex-end;position: relative;width:100%;font-size:.32rem;}\n    .input {\n      flex:2;flex-direction: column;padding:0 getRem(77);display:flex;align-items:flex-start;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      input {background: transparent;border: none;outline: none;width: 100%; height:1rem;font-size:.54rem;}\n      .splitter {position:relative;width:100%;height:1px;background-color:gray;padding:0 getRem(77);}\n    }\n    .btns {\n      flex:4;display:flex;align-items:center;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      span.btn {\n        position: relative;width:100%;height:100%;flex:1;display:flex;align-items:center;padding-top:.6rem;\n      }\n      .cancel {color:gray;text-align: right;justify-content: flex-start;padding-left:getRem(77);}\n      .confirm { color:blue;text-align: left;justify-content: flex-end;padding-right:getRem(77);}\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{class:['keys',_vm.tutorSession===8?'tutorial-highlight':''],on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{class:['keyshadow',_vm.tutorSession===8?'tutorial-highlight':'']}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",class:[(_vm.tutorSession===5||_vm.tutorSession===6)?'tutorial-highlight':''],on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({class:[_vm.tutorSession===2?'tutorial-highlight':''],on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",class:[(_vm.tutorSession===3||_vm.tutorSession===4)?'tutorial-highlight':''],on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"\")])])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bouncing),expression:\"bouncing\"}],staticClass:\"mask\"},[_c('p',[_vm._v(\"...\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession>0),expression:\"tutorSession>0\"}],staticClass:\"hint-mask\",attrs:{\"id\":\"tutorial-mask\"},on:{\"touchend\":_vm.tutorProgress}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===2),expression:\"tutorSession===2\"}],staticClass:\"hint-text\",attrs:{\"id\":\"timeline-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===3),expression:\"tutorSession===3\"}],staticClass:\"hint-text\",attrs:{\"id\":\"play-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"/\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===4),expression:\"tutorSession===4\"}],staticClass:\"hint-text\",attrs:{\"id\":\"longpress-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"/\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===5),expression:\"tutorSession===5\"}],staticClass:\"hint-text\",attrs:{\"id\":\"swipe-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===6),expression:\"tutorSession===6\"}],staticClass:\"hint-text\",attrs:{\"id\":\"clear-hint\"}},[_c('h3',[_vm._v(\"\")]),_c('p',[_vm._v(\"\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.handClass!='hidehand'),expression:\"handClass!='hidehand'\"}],class:[_vm.tutorClass],attrs:{\"id\":\"tutorhand\"}},[_c('div',{class:[_vm.handClass]})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-98a39902\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","<script>\n  export default {\n    // https://vuejs.org/v2/guide/components.html#Props\n    props: {\n      initCount:Number,\n      initActive:Boolean,\n      iconImg: String,\n      onClickCall: {\n        type: Function,\n        default() {\n          return function(){console.log('tap tap in count Button')};\n        },\n      },\n    },\n    computed: {\n      style() {\n        // return 'background-color: ' + this.hovering ? this.color: 'red';\n      }\n    },\n    data() {\n      return {\n        currentActiveCount:0,\n        currentActive:false,\n      };\n    },\n    watch: {\n    },\n    created() {\n      this.currentActive = this.initActive\n      this.currentActiveCount = this.currentActive?this.initCount:this.initCount+1\n    },\n    mounted() {\n    },\n    updated() {\n    },\n    methods: {\n      updateButton() {\n        // if (this.currentActive) {\n        //   this.currentActiveCount -= 1;\n        // } else {\n        //   this.currentActiveCount += 1;\n        // }\n        this.currentActive = !this.currentActive;\n        this.onClickCall()\n      }\n    },\n  };\n</script>\n\n<template>\n  <div class=\"btnContainer\" @click=\"updateButton\">\n    <transition name=\"fade\">\n      <div class=\"active-btn-background\" v-show=\"currentActive\"></div>\n    </transition>\n    <transition name=\"slideDown\">\n      <div class=\"btn active\" v-show=\"currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount}}</p>\n      </div>\n    </transition>\n    <transition name=\"slideUp\">\n      <div class=\"btn inactive\" v-show=\"!currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount-1}}</p>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../../_common/style/_functions.scss';\n@import '../../_common/style/_variables.scss';\n@import '../../_common/style/_mixins.scss';\n@import '../../_common/style/_reboot.scss';\n.btnContainer{\n  position: relative;width:getRem(92);height:getRem(92);border:1px solid #7D839E;border-radius:50%;overflow: hidden;\n  // -webkit-mask-image: -webkit-radial-gradient(circle, white, black);\n  .active-btn-background {position: absolute;width:100%;height:100%;background-color:#7D839E;border-radius:50%;border:none;overflow: hidden;}\n  .active {\n    // background-color:#7D839E;\n    position: absolute;width: 100%;height:100%;top: 0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:white;}\n  }\n  .inactive {\n    // background-color:blue;\n    position: absolute;width: 100%;height:100%;top:0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like-gray.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:#7D839E;}\n  }\n}\n//\n.slideDown-enter-active {\n  transition: all .3s ease-out;\n}\n.slideDown-leave-active {\n  transition: all .3s ease-out;\n}\n.slideDown-enter,.slideDown-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(100%);\n  opacity: 0;\n}\n.slideUp-enter-active {\n  transition: all .3s ease-out;\n}\n.slideUp-leave-active {\n  transition: all .3s ease-out;\n}\n.slideUp-enter,.slideUp-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(-100%);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/countButton.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd02150e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nlet musicPart = undefined\n\nexport default {\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading:true,\n      workIntroAppear:false,\n      controlPanalAppear:false,\n      titleUpdateAppear:false,\n      playing:false,\n      userId:0,\n      favStatus:false,\n      newWorkTitle:'',\n      finalNewWorkTitle:'',\n    }\n  },\n  computed: {\n    project() {\n      return this.$store.state.recordProject\n    },\n    projectInfo() {\n      return this.$store.state.recordProjectInfo\n    },\n  },\n  methods: {\n    load() {},\n    loadMusicById() {\n      console.log('hehe', this.$store.state)\n      const {id} = this.$store.state.route.query\n      if(id){ //id\n        console.log('mmm',id)\n        this.$store.dispatch('FETCH_MBOX',{id}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.favStatus = this.projectInfo.favStatus\n          // alert('load complete');\n          // this.togglePlay();\n          const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${this.$store.state.route.query.id}`\n          WxShare.prepareShareContent({\n            title:'MUSIXISE',\n            desc:`${this.projectInfo.userVO.realname}-${this.projectInfo.title}`,\n            // fullPath:location.href.split('#')[0],\n            fullPath,\n            imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n          })\n        })\n      } else {\n        // \n        this.$store.dispatch('FETCH_MBOX',{id:50}).then(() => {\n          console.log('workPart',this.project)\n          console.log('work info',this.projectInfo)\n          this.favStatus = this.projectInfo.favStatus\n          // alert('load complete');\n          // this.togglePlay();\n        })\n      }\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project,!this.playing)\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId:this.$store.state.route.query.id,\n        status:this.favStatus,\n      }).then(()=>{\n\n      }).catch((err)=>{\n        // alert(JSON.stringify(err))\n      })\n    },\n    updateWorkTitle() {\n      Api.updateWorkTitle({\n        id:this.$store.state.route.query.id,\n        title:this.newWorkTitle,\n      })\n      this.finalNewWorkTitle = this.newWorkTitle\n      const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${this.$store.state.route.query.id}`\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:`${this.projectInfo.userVO.realname}-${this.newWorkTitle}`,\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n      setTimeout(()=>{this.titleUpdateAppear=false},300);\n    },\n    redirectToMaker() {\n      this.$router.push({\n        path: '/new-music-box-maker',\n        // query: {\n        //   id\n        // }\n      })\n    },\n    redirectToMusixiser(id) {\n      if (id) {\n        this.$router.push({\n          path:'/musixiser',\n          query:{\n            id\n          }\n        })\n      }\n    },\n    purchaseItem() {\n      console.log(`you are about to purchase ${this.projectInfo.id}`)\n      this.$toast('')\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    Magic.clearTone()\n    next()\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) {\n       self.loadMusicById()\n       return\n     }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${self.$store.state.route.query.id}`\n    WxShare.prepareShareConfig().then(()=>{\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:'',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          self.userId = res.data.data.userId\n          // alert(`welcome${res.data.data.realname}`)\n          // if (!this.project) {\n            self.loadMusicById()\n          // }\n\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(()=>{this.loading = false},2000)\n    setTimeout(()=>{this.workIntroAppear = true;},4500)\n    setTimeout(()=>{this.controlPanalAppear = true},5500)\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div :class=\"['container', loading?'loading':'']\">\n  <div id=\"ground\"></div>\n  <div id=\"spirit\">\n    <div class=\"spirit-part\" id=\"spirit-body\"></div>\n    <div class=\"spirit-part\" id=\"spirit-front-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back1\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back2\"></div>\n  </div>\n  <div id=\"mb\" @click=\"togglePlay\">\n    <div :class=\"['mb-part', playing?'playing':'']\" id=\"mb-lid\"></div>\n    <div class=\"mb-part\" id=\"mb-body\">\n      <div id=\"play-btn\" v-show=\"!playing\"></div>\n      <div id=\"pause-btn\" v-show=\"playing\"></div>\n    </div>\n    <div id=\"mb-shiner\" :class=\"[playing?'':'not-playing']\"></div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"music-aurora\" v-show=\"playing\"></div>\n  </transition>\n  <div id=\"low-leaf1\"></div>\n  <div id=\"low-leaf2\"></div>\n  <div id=\"low-leaf3\"></div>\n  <div id=\"low-leaf4\"></div>\n  <div id=\"mid-leaf1\"></div>\n  <div id=\"mid-leaf2\"></div>\n  <div id=\"mid-leaf3\"></div>\n  <div id=\"mid-leaf4\"></div>\n  <div id=\"top-leaf1\"></div>\n  <div id=\"top-leaf2\"></div>\n  <div id=\"top-leaf3\"></div>\n  <div id=\"top-leaf4\"></div>\n  <div id=\"top-leaf5\"></div>\n  <div id=\"top-leaf6\"></div>\n  <transition name=\"bounce\">\n    <div id=\"work-intro\" v-if=\"workIntroAppear\">\n      <div class=\"title\" @click=\"userId === projectInfo.userId?titleUpdateAppear=true:titleUpdateAppear=false\">{{finalNewWorkTitle||projectInfo.title}}</div>\n      <div class=\"subtitle\"><span>by</span> <span @click=\"redirectToMusixiser(projectInfo.userVO.userId)\"><img :src=\"projectInfo.userVO.smallAvatar\" alt=\"\"></span><span>{{projectInfo.userVO.realname}}</span></div>\n      <div v-if=\"userId === projectInfo.userId\" id=\"edit-work\" @click=\"titleUpdateAppear=true\"></div>\n    </div>\n  </transition>\n  <transition name=\"bounce\">\n    <div id=\"control-panal\" v-if=\"controlPanalAppear\">\n      <!-- <div class=\"likeBtn\">\n        <div class=\"active\">\n          <div class=\"\"></div>\n          <p>1</p>\n        </div>\n        <div class=\"inactive\">\n          <div class=\"\"></div>\n          <p>0</p>\n        </div>\n      </div> -->\n      <count-button :initCount=\"projectInfo.collectNum?projectInfo.collectNum:0\" :initActive=\"projectInfo.favStatus?true:false\" iconImg=\"\" :onClickCall=\"toggleFav\" />\n      <div class=\"purchaseBtn\" @click=\"purchaseItem\"></div>\n      <div class=\"makeBtn\" @click=\"redirectToMaker\"></div>\n    </div>\n  </transition>\n  <transition name=\"fade\">\n    <div id=\"title-update-mask\" v-show=\"titleUpdateAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          \n        </div>\n        <div class=\"input\">\n          <input v-model=\"newWorkTitle\" type=\"text\" placeholder=\"\">\n          <div class=\"splitter\"></div>\n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"titleUpdateAppear=false\"></span>\n          <span class=\"btn confirm\" @click=\"updateWorkTitle\"></span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    flex-direction: column;\n    overflow:hidden;\n    #spirit {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:5rem;width: 9.8rem; height: 7.8rem; margin-left: .2rem;\n      .spirit-part {position: absolute;}\n      #spirit-body {z-index:4;left:getRem(220);top:getRem(136);width: getRem(266);height:getRem(368);background: url('../assets/viewer/spirit-body.png') center center no-repeat;background-size:cover;}\n      #spirit-front-leaf {z-index:5;left:getRem(340);top:getRem(12);width: getRem(398);height:getRem(492);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/spirit-front-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back-leaf {z-index:3;width: getRem(462);height:getRem(472);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/spirit-back-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back1 {z-index:1;left:getRem(40);top:getRem(16);opacity:.6;width: getRem(618);height:getRem(526);background: url('../assets/viewer/spirit-back1.png') center center no-repeat;background-size:cover;}\n      #spirit-back2 {z-index:2;transform:rotate(-14deg);opacity: .3;width: getRem(754);height:getRem(580);background: url('../assets/viewer/spirit-back2.png') center center no-repeat;background-size:cover;}\n    }\n    .not-playing {animation: box-shine 1s linear infinite;}\n    #mb {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:4.2rem;width: 1.4rem; height: 1.6rem; left: 2.4rem;\n      .mb-part {position: absolute;}\n      #mb-lid {z-index:2;left:getRem(0);top:getRem(0);transition: .5s ease-out;transform:rotate(54deg);width: getRem(48);height:getRem(64);background: url('../assets/viewer/mb-lid.png') center center no-repeat;background-size:cover;}\n      #mb-lid.playing {transform:rotate(0deg) translateX(-.3rem);}\n      #mb-body {\n        display:flex;align-items: center;justify-content: center;z-index:1;left:getRem(20);top:getRem(50);width: getRem(64);height:getRem(52);background: url('../assets/viewer/mb-body.png') center center no-repeat;background-size:cover;\n        #play-btn {position: relative;margin-top:.3rem;margin-left:.1rem;width: getRem(12);height:getRem(16);background: url('../assets/viewer/audio-play.png') center center no-repeat;background-size:cover;}\n        #pause-btn {position: relative;margin-top:.3rem;margin-left:.05rem;width: getRem(16);height:getRem(14);background: url('../assets/viewer/audio-pause.png') center center no-repeat;background-size:cover;}\n      }\n      #mb-shiner {position: absolute;width:.8rem;height:.3rem;background-color:rgba(252,245,141,.56);z-index: 1;bottom: 0.6rem;left: .3rem;border-radius:.4rem/0.2rem;}\n    }\n    #music-aurora {\n      position: absolute;\n      bottom: 4.2rem;\n      left:1.5rem;\n      width: getRem(577);\n      height: getRem(577);\n      background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/music_sprite.png'); // background:url('http://c.m.163.com/nc/qa/activity/xijing/img/cover_tit_step2.png');\n      background-size: getRem(577) getRem(4039);\n      animation: music-aurora steps(7) 1.5s infinite;\n      pointer-events: none;\n    }\n    #ground {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      position: absolute;left:-3rem;bottom:-2.3rem;opacity: .4;width: getRem(1522);height:getRem(852);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/ground.png') center center no-repeat;background-size:cover;\n    }\n    #low-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(168);opacity: .38;left:getRem(-160);bottom:6.5rem;background: url('../assets/viewer/low-leaf1.png') center center no-repeat;background-size:cover;}\n    #low-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(250);height: getRem(300);left:getRem(-106);bottom:2rem;background: url('../assets/viewer/low-leaf2.png') center center no-repeat;background-size:cover;}\n    #low-leaf3 {z-index:-1;will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(365);left:4rem;bottom:8.5rem;background: url('../assets/viewer/low-leaf3.png') center center no-repeat;background-size:cover;}\n    #low-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(310);height: getRem(336);transform:rotate(-23deg);right:-3.5rem;bottom:getRem(400);background: url('../assets/viewer/low-leaf4.png') center center no-repeat;background-size:cover;}\n    #mid-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(557);height: getRem(419);transform:rotate(-10deg);left:-3rem;bottom:getRem(940);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf1.png') center center no-repeat;background-size:cover;}\n    #mid-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(359);height: getRem(415);transform:rotate(-21deg);left:-2.8rem;bottom:getRem(840);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf2.png') center center no-repeat;background-size:cover;}\n    #mid-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(583);height: getRem(546);right:-4.2rem;transform:rotate(33deg);bottom:getRem(820);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf3.png') center center no-repeat;background-size:cover;}\n    #mid-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(384);height: getRem(537);right:-2.6rem;transform:rotate(25deg);bottom:getRem(740);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1226);height: getRem(1232);transform:rotate(56deg) scale(1);right: -10rem;bottom:getRem(1700);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1430);height: getRem(874);opacity: .9;transform:rotate(-6deg) scale(.7);right: -10rem;bottom:getRem(1200);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf2.png') center center no-repeat;background-size:cover;}\n    #top-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1250);height: getRem(986);transform:rotate(-2deg) scale(.7);left:-7rem;bottom:getRem(1870);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf3.png') center center no-repeat;background-size:cover;}\n    #top-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(918);height: getRem(752);transform:rotate(44deg) scale(.8);left:-9.5rem;bottom:getRem(1270);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf5 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1048);height: getRem(1054);opacity: .3;transform:rotate(22deg) scale(.9);right:-12rem;bottom:getRem(1500);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf6 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(718);height: getRem(566);opacity: .5;transform:rotate(-1deg) scale(1.2);left:-6rem;bottom:getRem(1700);background: url('//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf5.png') center center no-repeat;background-size:cover;}\n    #work-intro {\n      position: absolute;bottom:3.4rem;text-align: right;right:1rem;\n      .title{font-size:.6rem;margin-bottom:.3rem;color:#7d839e;}\n      .subtitle {\n        display:flex;\n        height:getRem(60);\n        font-size:.4rem;\n        align-items:center;\n        color:#7d839e;\n        img {width: getRem(60);height:getRem(60);border-radius: 50%;border:none;margin:0 .3rem 0 .3rem;}\n      }\n      #edit-work {\n        position: absolute;width: getRem(28);height: getRem(28);right: getRem(-34);top:getRem(18);background: url('../assets/viewer/edit.svg') center center no-repeat;background-size:cover;\n      }\n    }\n    #control-panal {\n      position: absolute; width: 100%; bottom:0rem; display: flex;height:2.4rem;padding: 0 getRem(50);justify-content: space-between;align-items: center;\n      .purchaseBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n      .makeBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n    }\n    #playBtn {\n      width: 2rem;\n      height: 2rem;\n      background-color:pink;\n    }\n}\n.loading {\n  #spirit {\n    transition: none;\n    transform:translateY(13rem) scale(.85);\n  }\n  #mb {\n    transition: none;\n    transform:translateY(13rem);\n  }\n  #ground {\n    transition: none;transform:translateY(13rem);\n  }\n  #low-leaf1 {transition: none;transform:translateY(13rem);opacity:1}\n  #low-leaf2 {transition: none;transform:translateY(13rem) translateX(2rem);}\n  #low-leaf3 {transition: none;transform:translateY(13rem);}\n  #low-leaf4 {transition: none;transform:translateY(13rem) rotate(0deg);}\n  #mid-leaf1 {transition: none;transform:translateY(12rem) rotate(9deg) scale(0.9);opacity:.9;}\n  #mid-leaf2 {transition: none;transform:translateY(14rem) translateX(1.8rem) rotate(-8deg) scale(0.9);opacity:.8;}\n  #mid-leaf3 {transition: none;transform:translateY(14rem) rotate(8deg) scale(0.9);opacity:.8;}\n  #mid-leaf4 {transition: none;transform:translateY(14rem) rotate(0deg) scale(0.9);opacity:.8;}\n  #top-leaf1 {transition: none;transform:translateY(16.5rem) rotate(35deg) scale(0.7);opacity:1;}\n  #top-leaf2 {transition: none;transform:translateY(14.5rem) translateX(-1rem) rotate(-20deg) scale(0.6);opacity:.9;}\n  #top-leaf3 {transition: none;transform:translateY(15rem) translateX(1rem) rotate(13deg) scale(0.6);opacity:.95;}\n  #top-leaf4 {transition: none;transform:translateY(13rem) translateX(4.5rem) rotate(52deg) scale(0.7);opacity:1;}\n  #top-leaf5 {transition: none;transform:translateY(18rem) translateX(-5rem) rotate(12deg) scale(0.7);opacity:.3;}\n  #top-leaf6 {transition: none;transform:translateY(14.5rem) translateX(2.5rem) rotate(39deg) scale(1);opacity:.5;}\n}\n.bounce-enter-active {\n  transition: all 2s cubic-bezier(.19,2,.32,.91);;\n}\n.bounce-leave-active {\n  transition: all .8s cubic-bezier(.19,1.58,.42,.91);\n}\n.bounce-enter, .bounce-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(3rem);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n@keyframes music-aurora {\n  0% {\n    background-position: 0 0;\n  }\n  // 50% {\n  //   background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  //   // background-position: 0 getRem(-1590); // background-position: 0 -97.7%\n  // }\n  100% {\n    background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  }\n}\n@keyframes box-shine {\n  0% { box-shadow: 0px 0px 0px 0px rgba(252,245,141,1); }\n  50% { box-shadow: 0px 0px 31px 0px rgba(252,247,170,.8); }\n  100% { box-shadow: 0px 0px 0px 0px rgba(252,245,141,1); }\n}\n#title-update-mask {\n  position: absolute;width:100%;height:100%;background-color:rgba(0,0,0,.3);display: flex;align-items: center;justify-content: center;\n  .mb-dialog {\n    position: relative;width: getRem(570);padding-top:getRem(75); border-radius:getRem(50);height:getRem(344);background-color:rgba(255,255,255,.96);display:flex;flex-direction:column;\n    .title {flex:1;padding:0 getRem(77); display:flex;align-items:flex-end;position: relative;width:100%;font-size:.32rem;}\n    .input {\n      flex:2;flex-direction: column;padding:0 getRem(77);display:flex;align-items:flex-start;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      input {background: transparent;border: none;outline: none;width: 100%; height:1rem;font-size:.54rem;}\n      .splitter {position:relative;width:100%;height:1px;background-color:gray;padding:0 getRem(77);}\n    }\n    .btns {\n      flex:4;display:flex;align-items:center;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      span.btn {\n        position: relative;width:100%;height:100%;flex:1;display:flex;align-items:center;padding-top:.6rem;\n      }\n      .cancel {color:gray;text-align: right;justify-content: flex-start;padding-left:getRem(77);}\n      .confirm { color:blue;text-align: left;justify-content: flex-end;padding-right:getRem(77);}\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBViewer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})]),_vm._v(\" \"),_c('div',{class:[_vm.playing?'':'not-playing'],attrs:{\"id\":\"mb-shiner\"}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\",on:{\"click\":function($event){_vm.userId === _vm.projectInfo.userId?_vm.titleUpdateAppear=true:_vm.titleUpdateAppear=false}}},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.redirectToMusixiser(_vm.projectInfo.userVO.userId)}}},[_c('img',{attrs:{\"src\":_vm.projectInfo.userVO.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.userVO.realname))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c579ca46\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","<script>\nwindow.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\n// import countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nlet musicPart = undefined\nimport Vue from 'vue'\nimport VueKonva from 'vue-konva'\nconst musicScale = [0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24, 26, 28, 29]\nconst colors = ['#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#edda28', '#f7943d']\nlet last_i = -1\nlet last_j = -1\nwindow.schedules = []\nlet aInterval = undefined;\nconst TIME_PER_NOTE = 0.25\nconst FULL_NOTE_NUM = 80 //80 notes, then if set 20 per page, it would be 4 pages\nconst NOTE_NUM_PER_SECTOR = 10\nVue.use(VueKonva)\nvar synth = new Tone.Sampler({\n  'C4': 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  'A4': 'A4.[mp3|ogg]',\n  'C5': 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  'A5': 'A5.[mp3|ogg]',\n  'C6': 'C6.[mp3|ogg]',\n}, {\n  'release': 1,\n  // 'baseUrl': '/static/audio/'\n  'baseUrl': '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster()\nvar pulseOptions = {\n  oscillator: {\n    type: \"triangle\"\n  },\n  envelope: {\n    release: 0.07\n  }\n};\nconst piano = new Tone.PolySynth(18, Tone.Synth, pulseOptions).toMaster();\nexport default {\n  components: {\n    // countButton,\n  },\n  data() {\n    return {\n      NOTE_CATEGORY: 18,\n      ONE_PAGE_NOTE_NUM: 20,\n      NOTE_NUM_PER_SECTOR,\n      tempo: 120,\n      configKonva: {\n        width: 0,\n        height: 0\n      },\n      configNoteRect: {\n\n      },\n      activeJ: -1, // highlight timeline\n      sector: 1, // 2*4-1,74\n      rectArray: [\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        []\n      ],\n      alertAppear: false,\n    }\n  },\n  computed: {\n\n  },\n  methods: {\n    setupCanvas() {\n      const docElem = document.documentElement;\n      this.configKonva = {\n        width: docElem.getBoundingClientRect().width - 60,\n        height: window.innerHeight\n      };\n      this.configNoteRect = {\n        width: (docElem.getBoundingClientRect().width - 60) / this.NOTE_CATEGORY,\n        height: window.innerHeight / this.ONE_PAGE_NOTE_NUM,\n        fill: '#fff',\n        stroke: '#d2ecfc',\n        strokeWidth: 1\n      }\n      for (let j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n        for (let sector = 0; sector <= this.sector; sector++) {\n          // console.log(111)\n          Tone.Transport.scheduleRepeat((time) => {\n            this.activeJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n        }\n      }\n\n    },\n    setupRect(i, j, sector) {\n      let fill = '';\n      // split NOTE_NUM_PER_SECTOR and this.NOTE_NUM_PER_SECTOR for ANIMATION!!!\n      if (j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR == this.activeJ &&\n        this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]) {\n        // active current note: lighter color\n        fill = colors[i]\n      } else if (\n        j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR == this.activeJ &&\n        !this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]\n      ) {\n        // inactive current light blue\n        fill = '#f0f8ff'\n      } else if (this.rectArray[i][j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR]) {\n        // active non-current note\n        fill = colors[i]\n      } else {\n        // incative non-current note\n        fill = '#fff';\n      }\n      return {\n        ...this.configNoteRect,\n        x: i * this.configKonva.width / this.NOTE_CATEGORY,\n        y: j * this.configKonva.height / this.ONE_PAGE_NOTE_NUM,\n        fill\n      }\n    },\n    handleTouchRect(i, j, sector) {\n      // console.log(`trigger ${i},${j+(sector-1)*this.NOTE_NUM_PER_SECTOR}`)\n      // make sound\n      synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5)\n      // this.rectArray[i][j] = !this.rectArray[i][j] // this is how to assign a two dim array in vue 2.0...\n      const newRow = this.rectArray[i].slice(0)\n      newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]\n      this.$set(this.rectArray, i, newRow)\n      // schedule/clearEvent\n      if (newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) { //schedule\n        schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat((time) => {\n          synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5)\n        }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n        console.log(`schedule ${i},${j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n      } else { // clear\n        console.log(`clear ${i},${j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n        Tone.Transport.clear(schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n      }\n      // update last\n      last_i = i\n      last_j = j\n    },\n    handleMoveRect(i, j, sector) {\n      if (j != last_j) { // take this as real note, store arrange\n        this.handleTouchRect(i, j, sector)\n      } else if (i != last_i && j == last_j) { // take this as testing note, no store, no arrange\n        // make sound\n        synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5)\n\n        // operate current note view\n        const newRow = this.rectArray[i].slice(0)\n        newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]\n        this.$set(this.rectArray, i, newRow)\n\n        // operate current note scheduling\n        if (newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) { // to activate the note\n          schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat((time) => {\n            // this.activeJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n            // console.log('bibibi', this.activeJ)\n            synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], \"midi\"), 0.5)\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n          console.log(`schedule ${i},${j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n        } else {\n          Tone.Transport.clear(schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n          console.log(`clear ${i},${j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[i][j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n        }\n        // restore last note view\n        const newLastRow = this.rectArray[last_i].slice(0)\n        newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]\n        this.$set(this.rectArray, last_i, newLastRow)\n        // restore last note scheduling\n        if (newLastRow[last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR]) {\n          schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = Tone.Transport.scheduleRepeat((time) => {\n            // this.activeJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n            // console.log('bibibi', this.activeJ)\n            synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[last_i], \"midi\"), 0.5)\n          }, FULL_NOTE_NUM * TIME_PER_NOTE * 120 / this.tempo, (last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR) * TIME_PER_NOTE * 120 / this.tempo);\n          console.log(`reschedule ${last_i},${last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n        } else {\n          console.log(`reclear ${last_i},${last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR}`, schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n          Tone.Transport.clear(schedules[last_i][last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR])\n        }\n        // update last\n        last_i = i\n        last_j = j\n      } else {\n        // console.log(`ignore ${i},${j}`)\n      }\n    },\n    startloop() {\n      Tone.Transport.start('+0.1')\n    },\n    stoploop() {\n      Tone.Transport.stop()\n    },\n    minusTempo() {\n      this.tempo -= 10\n      Tone.Transport.bpm.rampTo(this.tempo, .1);\n    },\n    addTempo() {\n      this.tempo += 10\n      Tone.Transport.bpm.rampTo(this.tempo, .1);\n    },\n    scrolldown() {\n      clearInterval(aInterval)\n      this.sector == (FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 1) ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR - 2 : this.NOTE_NUM_PER_SECTOR = 1 // for animation,\n      this.sector <= (FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 2) ? this.sector += 1 : '' // this line is real scroll down\n      // below is for animation\n      aInterval = setInterval(() => {\n        this.NOTE_NUM_PER_SECTOR += 1;\n        if (this.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval)\n        }\n      }, 50)\n    },\n    scrollup() {\n      clearInterval(aInterval)\n      this.sector == 1 ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR + 2 : this.NOTE_NUM_PER_SECTOR = 20 // for animation,\n      this.sector >= 2 ? this.sector -= 1 : ''\n      aInterval = setInterval(() => {\n        this.NOTE_NUM_PER_SECTOR -= 1;\n        if (this.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval)\n        }\n      }, 50)\n    },\n    checkBouncibility() {\n      const result = []\n      for (let i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (let j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], \"midi\").toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            })\n          }\n        }\n      }\n      result.sort((a, b) => (0 + a.time - b.time))\n      return Magic.RealMagic(result)\n    },\n    bounceProject() {\n      // finally get something like [{note:'A4',time:0},{note:'A5',time:0.3227}]\n      const result = []\n      for (let i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (let j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], \"midi\").toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            })\n          }\n        }\n      }\n      this.$store.dispatch('BOUNCE_PROJECT', {\n        record: result,\n        info: {\n          title: '',\n          content: 'default',\n          cover: 'default'\n        },\n      }).then(id => {\n        console.log('successfully bounced')\n        this.bouncing = false;\n        this.$toast('')\n        this.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id\n          }\n        })\n      }).catch((err) => {\n        this.bouncing = false;\n        this.$toast('')\n      })\n    },\n    submitProject() {\n      if (this.checkBouncibility()) {\n        alert(1)\n        this.bounceProject()\n      } else {\n        alert(2)\n        this.alertAppear = true;\n      }\n    },\n    clearProject() {\n\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone()\n    next()\n  },\n  created() {\n    this.setupCanvas()\n    schedules = JSON.parse(JSON.stringify(this.rectArray))\n\n    // regular setup\n    const self = this\n    Tone.Transport.cancel()\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) return\n    // alert(Cookies.get('serviceToken'))\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '',\n        fullPath: `${location.origin}${location.pathname}#/new-music-box-roll`,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n              // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-roll')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          // alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-roll')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(location.origin+location.pathname+'#/new-music-box-roll')}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div class=\"\">\n  <v-stage :config=\"configKonva\">\n    <v-layer>\n      <template v-for='i in NOTE_CATEGORY'>\n          <v-rect v-for='j in ONE_PAGE_NOTE_NUM'\n          @touchstart=\"handleTouchRect(i-1,j-1,sector)\"\n          @touchmove=\"handleMoveRect(i-1,j-1,sector)\"\n          :config=\"setupRect(i-1,j-1,sector)\" />\n        </template>\n    </v-layer>\n  </v-stage>\n  <div class=\"control-panal\">\n    <div @touchstart=\"startloop\">></div>\n    <div @touchstart=\"stoploop\"></div>\n    <div @touchstart=\"scrollup\"></div>\n    <div @touchstart=\"scrolldown\"></div>\n    <div style=\"font-size:16px;line-height:46px;\" @touchstart=\"minusTempo\"></div>\n    <div style=\"font-size:16px;line-height:46px;\" @touchstart=\"addTempo\"></div>\n    <div @touchstart=\"clearProject\">x</div>\n    <div @touchstart=\"submitProject\"></div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"alert-mask\" v-show=\"alertAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          \n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"alertAppear=false\"></span>\n          <span class=\"btn confirm\" @click=\"bounceProject\"></span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.control-panal {\n    position: absolute;\n    width: 60px;\n    height: 100%;\n    top: 0;\n    right: 0;\n}\n\n.fadein {\n    animation: fadein 1s;\n    animation-fill-mode: forwards;\n}\n\n.fadeout {\n    animation: fadeout 1s;\n    animation-fill-mode: forwards;\n}\n@keyframes fadein {\n    from {\n        opacity: 0;\n    }\n\n    to {\n        opacity: 1;\n    }\n}\n@keyframes fadeout {\n    from {\n        opacity: 1;\n    }\n\n    to {\n        opacity: 0;\n    }\n}\n#alert-mask {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,.3);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .mb-dialog {\n        position: relative;\n        rotate: 90deg;\n        width: getRem(570);\n        padding-top: getRem(75);\n        border-radius: getRem(50);\n        height: getRem(344);\n        background-color: rgba(255,255,255,.96);\n        display: flex;\n        flex-direction: column;\n        .title {\n            flex: 1;\n            padding: 0 getRem(77);\n            display: flex;\n            align-items: flex-end;\n            position: relative;\n            width: 100%;\n            font-size: 0.32rem;\n        }\n        .input {\n            flex: 2;\n            flex-direction: column;\n            padding: 0 getRem(77);\n            display: flex;\n            align-items: flex-start;\n            justify-content: center;\n            position: relative;\n            width: 100%;\n            text-align: center;\n            font-size: 0.5rem;\n            input {\n                background: transparent;\n                border: none;\n                outline: none;\n                width: 100%;\n                height: 1rem;\n                font-size: 0.54rem;\n            }\n            .splitter {\n                position: relative;\n                width: 100%;\n                height: 1px;\n                background-color: gray;\n                padding: 0 getRem(77);\n            }\n        }\n        .btns {\n            flex: 4;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            width: 100%;\n            text-align: center;\n            font-size: 0.5rem;\n            span.btn {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                flex: 1;\n                display: flex;\n                align-items: center;\n                padding-top: 0.6rem;\n            }\n            .cancel {\n                color: gray;\n                text-align: right;\n                justify-content: flex-start;\n                padding-left: getRem(77);\n            }\n            .confirm {\n                color: blue;\n                text-align: left;\n                justify-content: flex-end;\n                padding-right: getRem(77);\n            }\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MBRollMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('v-stage',{attrs:{\"config\":_vm.configKonva}},[_c('v-layer',[_vm._l((_vm.NOTE_CATEGORY),function(i){return _vm._l((_vm.ONE_PAGE_NOTE_NUM),function(j){return _c('v-rect',{attrs:{\"config\":_vm.setupRect(i-1,j-1,_vm.sector)},on:{\"touchstart\":function($event){_vm.handleTouchRect(i-1,j-1,_vm.sector)},\"touchmove\":function($event){_vm.handleMoveRect(i-1,j-1,_vm.sector)}}})})})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"control-panal\"},[_c('div',{on:{\"touchstart\":_vm.startloop}},[_vm._v(\">\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.stoploop}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.scrollup}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.scrolldown}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"16px\",\"line-height\":\"46px\"},on:{\"touchstart\":_vm.minusTempo}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"16px\",\"line-height\":\"46px\"},on:{\"touchstart\":_vm.addTempo}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.clearProject}},[_vm._v(\"x\")]),_vm._v(\" \"),_c('div',{on:{\"touchstart\":_vm.submitProject}},[_vm._v(\"\")])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"\")])])])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-503ec609\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBRollMaker.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nimport infiniteScroll from 'vue-infinite-scroll'\n\nlet musicPart = undefined\n\nexport default {\n  directives: {\n    infiniteScroll,\n  },\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true,\n    }\n  },\n  computed: {\n    musixiserInfo() {\n      return this.$store.state.musixiserInfo\n    },\n    musixiserWorksObj() {\n      return this.$store.state.musixiserWorksObj\n    }\n  },\n  methods: {\n    loadMusixiserById() {\n      console.log('my id: ', this.userId)\n      const id = this.userId\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id\n      })\n      this.busy = false\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore() { //will call automatically when enter!\n      const id = this.userId\n      // alert(id)\n      this.busy = true\n      console.log('1111111',this.musixiserWorksObj.current)\n      this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n        id,\n        page: this.musixiserWorksObj.current ? this.musixiserWorksObj.current + 1 : 1\n      }).then(() => {\n        console.log('2222222',this.musixiserWorksObj)\n        if (this.musixiserWorksObj.content.length < this.musixiserWorksObj.total) {\n          this.busy = false\n        }\n      })\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project)\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus,\n      })\n    },\n    redirectToWork(id) {\n      this.$router.push({\n        path:'/new-music-box-viewer',\n        query:{\n          id\n        }\n      })\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone()\n    next()\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149\n      self.loadMusixiserById()\n      return\n    }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${self.$store.state.route.query.id}`\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: 'd',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          self.userId = this.$store.state.route.query.id || res.data.data.userId\n          self.isMe = self.userId == res.data.data.userId\n          self.loadMusixiserById()\n\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false\n    }, 2000)\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div class=\"container\">\n  <!-- <div class=\"\">\n    {{musixiserInfo.realname}}\n  </div> -->\n  <div class=\"worklist\" v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"busy\" infinite-scroll-distance=\"10\">\n    <div class=\"work\" v-for=\"item in musixiserWorksObj.content\" @click=\"redirectToWork(item.id)\">\n      <img class=\"cover\" :src=\"item.cover=='default'?item.userVO.smallAvatar:item.cover\" alt=\"\">\n      <div class=\"detail\">\n        <div class=\"hairline\"></div>\n        <div class=\"line line1\">\n          <p class=\"title\">{{ item.title }}</p>\n          <p class=\"date\">{{ item.createdDate }}</p>\n        </div>\n        <div class=\"line line2\">\n          <p class=\"creator\">{{ item.userVO.realname }}</p>\n          <p class=\"likes\">: {{item.collectNum}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"emptysection\" v-show=\"!loading && musixiserWorksObj.content.length==0\">\n    <div>\n      <p class=\"emptytitle\"></p>\n      <img src=\"../assets/oops.png\" style=\"width:6rem;\"alt=\"\">\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n\n.container {position:absolute;height:100%;width:100%;background-color:#404249;}\n.worklist {\n  position:relative;padding:getRem(20);background-color:#404249;\n}\n.hairline {height:1px;background:#979797;transform: scaleY(0.5);}\n.work {\n  position:relative;display:flex;height:getRem(174);margin-bottom:getRem(30);\n  .cover {position:relative;width:getRem(174);height:getRem(174);margin-top:getRem(18);}\n  .detail {\n    flex:1;padding-left:getRem(30);\n    .line {display:flex;justify-content: space-between;}\n    .line1 {padding-top:getRem(40);padding-bottom:getRem(60);line-height:getRem(30);}\n    .line2 {padding-bottom:getRem(30);line-height:getRem(30);}\n    .title {font-size:getRem(28);color:#8c8c92;}\n    .date {font-size:getRem(20);color:#6D6E75;}\n    .creator {font-size:getRem(24);color:#6D6E75;}\n    .likes {font-size:getRem(20);color:rgba(255,255,255,.3);}\n  }\n}\n.emptysection {\n  position: relative;height:100%;color:white;display:flex;align-items:center;justify-content:center;\n  .emptytitle {font-size:1.4rem;font-weight:200;}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MusixiserDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.musixiserWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.userVO.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.userVO.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\": \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.musixiserWorksObj.content.length==0),expression:\"!loading && musixiserWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":require(\"../assets/oops.png\"),\"alt\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fd399b5a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MusixiserDetail.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nimport infiniteScroll from 'vue-infinite-scroll'\n\nlet musicPart = undefined\n\nexport default {\n  directives: {\n    infiniteScroll,\n  },\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true,\n    }\n  },\n  computed: {\n    musixiserInfo() {\n      return this.$store.state.musixiserInfo\n    },\n    favWorksObj() {\n      return this.$store.state.favWorksObj\n    }\n  },\n  methods: {\n    loadMusixiserById() {\n      console.log('my id: ', this.userId)\n      const id = this.userId\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id\n      })\n      this.busy = false\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore() { //will call automatically when enter!\n      const id = this.userId\n      // alert(id)\n      this.busy = true\n      console.log('1111111',this.favWorksObj.current)\n      this.$store.dispatch('FETCH_FAV_WORKS', {\n        id,\n        page: this.favWorksObj.current ? this.favWorksObj.current + 1 : 1\n      }).then(() => {\n        console.log('2222222',this.favWorksObj)\n        if (this.favWorksObj.content.length < this.favWorksObj.total) {\n          this.busy = false\n        }\n      })\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project)\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus,\n      })\n    },\n    redirectToWork(id) {\n      if (id) {\n        this.$router.push({\n          path:'/new-music-box-viewer',\n          query:{\n            id\n          }\n        })\n      }\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone()\n    next()\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149\n      self.loadMusixiserById()\n      return\n    }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${self.$store.state.route.query.id}`\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: 'd',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          self.userId = this.$store.state.route.query.id || res.data.data.userId\n          self.isMe = self.userId == res.data.data.userId\n          self.loadMusixiserById()\n\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false\n    }, 2000)\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div class=\"container\">\n  <!-- <div class=\"\">\n    {{musixiserInfo.realname}}\n  </div> -->\n  <div class=\"worklist\" v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"busy\" infinite-scroll-distance=\"10\">\n    <div class=\"work\" v-for=\"item in favWorksObj.content\" @click=\"redirectToWork(item.id)\">\n      <img class=\"cover\" :src=\"item.cover=='default'?item.user.smallAvatar:item.cover\" alt=\"\">\n      <div class=\"detail\">\n        <div class=\"hairline\"></div>\n        <div class=\"line line1\">\n          <p class=\"title\">{{ item.title }}</p>\n          <p class=\"date\">{{ item.createdDate }}</p>\n        </div>\n        <div class=\"line line2\">\n          <p class=\"creator\">{{ item.user.realname }}</p>\n          <p class=\"likes\">: {{item.collectNum}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"emptysection\" v-show=\"!loading && favWorksObj.content.length==0\">\n    <div>\n      <p class=\"emptytitle\"></p>\n      <img src=\"../assets/oops.png\" style=\"width:6rem;\"alt=\"\">\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n\n.container {position:absolute;height:100%;width:100%;background-color:#404249;}\n.worklist {\n  position:relative;padding:getRem(20);background-color:#404249;\n}\n.hairline {height:1px;background:#979797;transform: scaleY(0.5);}\n.work {\n  position:relative;display:flex;height:getRem(174);margin-bottom:getRem(30);\n  .cover {position:relative;width:getRem(174);height:getRem(174);margin-top:getRem(18);}\n  .detail {\n    flex:1;padding-left:getRem(30);\n    .line {display:flex;justify-content: space-between;}\n    .line1 {padding-top:getRem(40);padding-bottom:getRem(60);line-height:getRem(30);}\n    .line2 {padding-bottom:getRem(30);line-height:getRem(30);}\n    .title {font-size:getRem(28);color:#8c8c92;}\n    .date {font-size:getRem(20);color:#6D6E75;}\n    .creator {font-size:getRem(24);color:#6D6E75;}\n    .likes {font-size:getRem(20);color:rgba(255,255,255,.3);}\n  }\n}\n.emptysection {\n  position: relative;height:100%;color:white;display:flex;align-items:center;justify-content:center;\n  .emptytitle {font-size:1.4rem;font-weight:200;}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MyFav.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.favWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.user.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.user.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\": \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.favWorksObj.content.length==0),expression:\"!loading && favWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":require(\"../assets/oops.png\"),\"alt\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c75542ca\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MyFav.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util'\nimport * as Api from '../_common/js/api'\nimport * as Cookies from \"js-cookie\"\nimport * as Magic from '../_common/js/magic'\nimport countButton from './common/countButton'\nimport * as WxShare from '../_common/js/wx_share'\nlet musicPart = undefined\n\nexport default {\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      searching: false,\n      loading: false,\n      recommendations: {},\n    }\n  },\n  computed: {\n\n  },\n  methods: {\n    load() {\n      Api.getRecommendations().then((res)=>{console.log('index:',res)})\n    },\n    search() {\n\n    },\n  },\n  beforeRouteLeave (to, from, next) {\n    Magic.clearTone()\n    next()\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase())\n    if (!inWechat) {\n       self.loadMusicById()\n       return\n     }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${self.$store.state.route.query.id}`\n    WxShare.prepareShareConfig().then(()=>{\n      WxShare.prepareShareContent({\n        title:'MUSIXISE',\n        desc:'',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl:'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      })\n    })\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then((res) => {\n          if (res.data.errcode >= 20000) {\n            // cookie\n            Cookies.remove('serviceToken')\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            )\n          }\n          self.userId = res.data.data.userId\n          // alert(`welcome${res.data.data.realname}`)\n          // if (!this.project) {\n            self.loadMusicById()\n          // }\n\n          console.log('get user info success', res.data.data)\n        })\n        .catch((err) => {\n          Cookies.remove('serviceToken')\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          )\n        })\n    } else { //auth codetokencookie\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2cb950ff65a142c5&redirect_uri=${encodeURIComponent(fullPath)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      )\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(()=>{this.loading = false},2000)\n    setTimeout(()=>{this.workIntroAppear = true;},4500)\n    setTimeout(()=>{this.controlPanalAppear = true},5500)\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n<div :class=\"['container', loading?'loading':'']\">\n  <div id=\"ground\"></div>\n  <div id=\"spirit\">\n    <div class=\"spirit-part\" id=\"spirit-body\"></div>\n    <div class=\"spirit-part\" id=\"spirit-front-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back-leaf\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back1\"></div>\n    <div class=\"spirit-part\" id=\"spirit-back2\"></div>\n  </div>\n  <div id=\"mb\" @click=\"togglePlay\">\n    <div :class=\"['mb-part', playing?'playing':'']\" id=\"mb-lid\"></div>\n    <div class=\"mb-part\" id=\"mb-body\">\n      <div id=\"play-btn\" v-show=\"!playing\"></div>\n      <div id=\"pause-btn\" v-show=\"playing\"></div>\n    </div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"music-aurora\" v-show=\"playing\"></div>\n  </transition>\n  <div id=\"low-leaf1\"></div>\n  <div id=\"low-leaf2\"></div>\n  <div id=\"low-leaf3\"></div>\n  <div id=\"low-leaf4\"></div>\n  <div id=\"mid-leaf1\"></div>\n  <div id=\"mid-leaf2\"></div>\n  <div id=\"mid-leaf3\"></div>\n  <div id=\"mid-leaf4\"></div>\n  <div id=\"top-leaf1\"></div>\n  <div id=\"top-leaf2\"></div>\n  <div id=\"top-leaf3\"></div>\n  <div id=\"top-leaf4\"></div>\n  <div id=\"top-leaf5\"></div>\n  <div id=\"top-leaf6\"></div>\n  <transition name=\"bounce\">\n    <div id=\"work-intro\" v-if=\"workIntroAppear\">\n      <div class=\"title\">{{finalNewWorkTitle||projectInfo.title}}</div>\n      <div class=\"subtitle\"><span>by</span> <span><img :src=\"projectInfo.owner.smallAvatar\" alt=\"\"></span><span>{{projectInfo.owner.nickName}}</span></div>\n      <div v-if=\"userId === projectInfo.userId\" id=\"edit-work\" @click=\"titleUpdateAppear=true\"></div>\n    </div>\n  </transition>\n  <transition name=\"bounce\">\n    <div id=\"control-panal\" v-if=\"controlPanalAppear\">\n      <!-- <div class=\"likeBtn\">\n        <div class=\"active\">\n          <div class=\"\"></div>\n          <p>1</p>\n        </div>\n        <div class=\"inactive\">\n          <div class=\"\"></div>\n          <p>0</p>\n        </div>\n      </div> -->\n      <count-button :initCount=\"projectInfo.collectNum?projectInfo.collectNum:0\" :initActive=\"projectInfo.favStatus?true:false\" iconImg=\"\" :onClickCall=\"toggleFav\" />\n      <div class=\"purchaseBtn\" @click=\"purchaseItem\"></div>\n      <div class=\"makeBtn\" @click=\"redirectToMaker\"></div>\n    </div>\n  </transition>\n  <transition name=\"fade\">\n    <div id=\"title-update-mask\" v-show=\"titleUpdateAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          \n        </div>\n        <div class=\"input\">\n          <input v-model=\"newWorkTitle\" type=\"text\" placeholder=\"\">\n          <div class=\"splitter\"></div>\n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"titleUpdateAppear=false\"></span>\n          <span class=\"btn confirm\" @click=\"updateWorkTitle\"></span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n.container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    flex-direction: column;\n    overflow:hidden;\n    #spirit {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:5rem;width: 9.8rem; height: 7.8rem; margin-left: .2rem;\n      .spirit-part {position: absolute;}\n      #spirit-body {z-index:4;left:getRem(220);top:getRem(136);width: getRem(266);height:getRem(368);background: url('../assets/viewer/spirit-body.png') center center no-repeat;background-size:cover;}\n      #spirit-front-leaf {z-index:5;left:getRem(340);top:getRem(12);width: getRem(398);height:getRem(492);background: url('../assets/viewer/spirit-front-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back-leaf {z-index:3;width: getRem(462);height:getRem(472);background: url('../assets/viewer/spirit-back-leaf.png') center center no-repeat;background-size:cover;}\n      #spirit-back1 {z-index:1;left:getRem(40);top:getRem(16);opacity:.6;width: getRem(618);height:getRem(526);background: url('../assets/viewer/spirit-back1.png') center center no-repeat;background-size:cover;}\n      #spirit-back2 {z-index:2;transform:rotate(-14deg);opacity: .3;width: getRem(754);height:getRem(580);background: url('../assets/viewer/spirit-back2.png') center center no-repeat;background-size:cover;}\n    }\n    #mb {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      transform:translateY(0);\n      position: absolute;bottom:4.2rem;width: 1.4rem; height: 1.6rem; left: 2.4rem;\n      .mb-part {position: absolute;}\n      #mb-lid {z-index:2;left:getRem(0);top:getRem(0);transition: .5s ease-out;transform:rotate(54deg);width: getRem(48);height:getRem(64);background: url('../assets/viewer/mb-lid.png') center center no-repeat;background-size:cover;}\n      #mb-lid.playing {transform:rotate(0deg) translateX(-.3rem);}\n      #mb-body {\n        display:flex;align-items: center;justify-content: center;z-index:1;left:getRem(20);top:getRem(50);width: getRem(64);height:getRem(52);background: url('../assets/viewer/mb-body.png') center center no-repeat;background-size:cover;\n        #play-btn {position: relative;margin-top:.3rem;margin-left:.1rem;width: getRem(12);height:getRem(16);background: url('../assets/viewer/audio-play.png') center center no-repeat;background-size:cover;}\n        #pause-btn {position: relative;margin-top:.3rem;margin-left:.05rem;width: getRem(16);height:getRem(14);background: url('../assets/viewer/audio-pause.png') center center no-repeat;background-size:cover;}\n      }\n    }\n    #music-aurora {\n      position: absolute;\n      bottom: 4.2rem;\n      left:1.5rem;\n      width: getRem(577);\n      height: getRem(577);\n      background: url('../assets/viewer/music_sprite.png'); // background:url('http://c.m.163.com/nc/qa/activity/xijing/img/cover_tit_step2.png');\n      background-size: getRem(577) getRem(4039);\n      animation: music-aurora steps(7) 1.5s infinite;\n      pointer-events: none;\n    }\n    #ground {\n      will-change: transform;\n      transition: transform 4.5s ease-out;\n      position: absolute;left:-3rem;bottom:-2.3rem;opacity: .4;width: getRem(1522);height:getRem(852);background: url('../assets/viewer/ground.png') center center no-repeat;background-size:cover;\n    }\n    #low-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(168);opacity: .38;left:getRem(-160);bottom:6.5rem;background: url('../assets/viewer/low-leaf1.png') center center no-repeat;background-size:cover;}\n    #low-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(250);height: getRem(300);left:getRem(-106);bottom:2rem;background: url('../assets/viewer/low-leaf2.png') center center no-repeat;background-size:cover;}\n    #low-leaf3 {z-index:-1;will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(162);height: getRem(365);left:4rem;bottom:8.5rem;background: url('../assets/viewer/low-leaf3.png') center center no-repeat;background-size:cover;}\n    #low-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(310);height: getRem(336);transform:rotate(-23deg);right:-3.5rem;bottom:getRem(400);background: url('../assets/viewer/low-leaf4.png') center center no-repeat;background-size:cover;}\n    #mid-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(557);height: getRem(419);transform:rotate(-10deg);left:-3rem;bottom:getRem(940);background: url('../assets/viewer/mid-leaf1.png') center center no-repeat;background-size:cover;}\n    #mid-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(359);height: getRem(415);transform:rotate(-21deg);left:-2.8rem;bottom:getRem(840);background: url('../assets/viewer/mid-leaf2.png') center center no-repeat;background-size:cover;}\n    #mid-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(583);height: getRem(546);right:-4.2rem;transform:rotate(33deg);bottom:getRem(820);background: url('../assets/viewer/mid-leaf3.png') center center no-repeat;background-size:cover;}\n    #mid-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(384);height: getRem(537);right:-2.6rem;transform:rotate(25deg);bottom:getRem(740);background: url('../assets/viewer/mid-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf1 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1226);height: getRem(1232);transform:rotate(56deg) scale(1);right: -10rem;bottom:getRem(1700);background: url('../assets/viewer/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf2 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1430);height: getRem(874);opacity: .9;transform:rotate(-6deg) scale(.7);right: -10rem;bottom:getRem(1200);background: url('../assets/viewer/top-leaf2.png') center center no-repeat;background-size:cover;}\n    #top-leaf3 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1250);height: getRem(986);transform:rotate(-2deg) scale(.7);left:-7rem;bottom:getRem(1870);background: url('../assets/viewer/top-leaf3.png') center center no-repeat;background-size:cover;}\n    #top-leaf4 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(918);height: getRem(752);transform:rotate(44deg) scale(.8);left:-9.5rem;bottom:getRem(1270);background: url('../assets/viewer/top-leaf4.png') center center no-repeat;background-size:cover;}\n    #top-leaf5 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(1048);height: getRem(1054);opacity: .3;transform:rotate(22deg) scale(.9);right:-12rem;bottom:getRem(1500);background: url('../assets/viewer/top-leaf1.png') center center no-repeat;background-size:cover;}\n    #top-leaf6 {will-change: transform;transition: transform 4.5s ease-out,opacity 4.5s ease-out;position: absolute;width: getRem(718);height: getRem(566);opacity: .5;transform:rotate(-1deg) scale(1.2);left:-6rem;bottom:getRem(1700);background: url('../assets/viewer/top-leaf5.png') center center no-repeat;background-size:cover;}\n    #work-intro {\n      position: absolute;bottom:3.4rem;text-align: right;right:1rem;\n      .title{font-size:.6rem;margin-bottom:.3rem;color:#7d839e;}\n      .subtitle {\n        display:flex;\n        height:getRem(60);\n        font-size:.4rem;\n        align-items:center;\n        color:#7d839e;\n        img {width: getRem(60);height:getRem(60);border-radius: 50%;border:none;margin:0 .3rem 0 .3rem;}\n      }\n      #edit-work {\n        position: absolute;width: getRem(28);height: getRem(28);right: getRem(-34);top:getRem(18);background: url('../assets/viewer/edit.svg') center center no-repeat;background-size:cover;\n      }\n    }\n    #control-panal {\n      position: absolute; width: 100%; bottom:0rem; display: flex;height:2.4rem;padding: 0 getRem(50);justify-content: space-between;align-items: center;\n      .purchaseBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n      .makeBtn{position: relative;width: getRem(250);height: getRem(92);border:none;border-radius:getRem(46);background-color:#4266F5;font-size:.47rem;color:white;text-align: center;line-height: getRem(92);}\n    }\n    #playBtn {\n      width: 2rem;\n      height: 2rem;\n      background-color:pink;\n    }\n}\n.loading {\n  #spirit {\n    transition: none;\n    transform:translateY(13rem) scale(.85);\n  }\n  #mb {\n    transition: none;\n    transform:translateY(13rem);\n  }\n  #ground {\n    transition: none;transform:translateY(13rem);\n  }\n  #low-leaf1 {transition: none;transform:translateY(13rem);opacity:1}\n  #low-leaf2 {transition: none;transform:translateY(13rem) translateX(2rem);}\n  #low-leaf3 {transition: none;transform:translateY(13rem);}\n  #low-leaf4 {transition: none;transform:translateY(13rem) rotate(0deg);}\n  #mid-leaf1 {transition: none;transform:translateY(12rem) rotate(9deg) scale(0.9);opacity:.9;}\n  #mid-leaf2 {transition: none;transform:translateY(14rem) translateX(1.8rem) rotate(-8deg) scale(0.9);opacity:.8;}\n  #mid-leaf3 {transition: none;transform:translateY(14rem) rotate(8deg) scale(0.9);opacity:.8;}\n  #mid-leaf4 {transition: none;transform:translateY(14rem) rotate(0deg) scale(0.9);opacity:.8;}\n  #top-leaf1 {transition: none;transform:translateY(16.5rem) rotate(35deg) scale(0.7);opacity:1;}\n  #top-leaf2 {transition: none;transform:translateY(14.5rem) translateX(-1rem) rotate(-20deg) scale(0.6);opacity:.9;}\n  #top-leaf3 {transition: none;transform:translateY(15rem) translateX(1rem) rotate(13deg) scale(0.6);opacity:.95;}\n  #top-leaf4 {transition: none;transform:translateY(13rem) translateX(4.5rem) rotate(52deg) scale(0.7);opacity:1;}\n  #top-leaf5 {transition: none;transform:translateY(18rem) translateX(-5rem) rotate(12deg) scale(0.7);opacity:.3;}\n  #top-leaf6 {transition: none;transform:translateY(14.5rem) translateX(2.5rem) rotate(39deg) scale(1);opacity:.5;}\n}\n.bounce-enter-active {\n  transition: all 2s cubic-bezier(.19,2,.32,.91);;\n}\n.bounce-leave-active {\n  transition: all .8s cubic-bezier(.19,1.58,.42,.91);\n}\n.bounce-enter, .bounce-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(3rem);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n@keyframes music-aurora {\n  0% {\n    background-position: 0 0;\n  }\n  // 50% {\n  //   background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  //   // background-position: 0 getRem(-1590); // background-position: 0 -97.7%\n  // }\n  100% {\n    background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  }\n}\n#title-update-mask {\n  position: absolute;width:100%;height:100%;background-color:rgba(0,0,0,.3);display: flex;align-items: center;justify-content: center;\n  .mb-dialog {\n    position: relative;width: getRem(570);padding-top:getRem(75); border-radius:getRem(50);height:getRem(344);background-color:rgba(255,255,255,.96);display:flex;flex-direction:column;\n    .title {flex:1;padding:0 getRem(77); display:flex;align-items:flex-end;position: relative;width:100%;font-size:.32rem;}\n    .input {\n      flex:2;flex-direction: column;padding:0 getRem(77);display:flex;align-items:flex-start;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      input {background: transparent;border: none;outline: none;width: 100%; height:1rem;font-size:.54rem;}\n      .splitter {position:relative;width:100%;height:1px;background-color:gray;padding:0 getRem(77);}\n    }\n    .btns {\n      flex:4;display:flex;align-items:center;justify-content: center;position: relative;width:100%;text-align: center;font-size:.5rem;\n      span.btn {\n        position: relative;width:100%;height:100%;flex:1;display:flex;align-items:center;padding-top:.6rem;\n      }\n      .cancel {color:gray;text-align: right;justify-content: flex-start;padding-left:getRem(77);}\n      .confirm { color:blue;text-align: left;justify-content: flex-end;padding-right:getRem(77);}\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Recommend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          \\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-268f8d33\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Recommend.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\nimport HelloWorld from '@/components/HelloWorld';\n// import MBMaker from '@/components/MBMaker';\n\n// import MBAuthor from '@/components/MBAuthor';\nimport NMBMaker from '@/components/NMBMaker';\n// import MBViewer from '@/components/MBViewer';\nimport NMBViewer from '@/components/NMBViewer';\nimport MBRoll from '@/components/MBRollMaker';\nimport MusixiserDetail from '@/components/MusixiserDetail';\nimport MyFav from '@/components/MyFav';\nimport Recommend from '@/components/Recommend';\n\nVue.use(Router);\n\nexport default new Router({\n  // mode: 'history', // avoid hash in url\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld,\n    },\n    {\n      path: '/new-music-box-maker',\n      name: 'NMBMaker',\n      component: NMBMaker,\n    },\n    {\n      path: '/new-music-box-roll',\n      name: 'MBRoll',\n      component: MBRoll,\n    },\n    {\n      path: '/new-music-box-viewer',\n      name: 'NMBViewer',\n      component: NMBViewer,\n    },\n    {\n      path: '/musixiser',\n      name: 'MusixiserDetail',\n      component: MusixiserDetail,\n    },\n    {\n      path: '/myfav',\n      name: 'MyFav',\n      component: MyFav,\n    },\n    {\n      path: '/recommend',\n      name: 'Recommend',\n      component: Recommend,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport { sync } from 'vuex-router-sync';\n// import VueTouch from 'vue-touch';\nimport 'vue2-toast/lib/toast.css';\nimport Toast from 'vue2-toast';\nimport { createStore } from './store';\nimport App from './App';\nimport router from './router';\n\n// Vue.use(VueTouch, { name: 'v-touch' });\nVue.use(Toast, { defaultType: 'center', duration: 2500, wordWrap: false, width: 'auto' });\nVue.config.productionTip = false;\nconst store = createStore();\nsync(store, router);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = __webpack_public_path__ + \"static/img/oops.7bb4a06.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/oops.png\n// module id = SpEx\n// module chunks = 1"],"sourceRoot":""}